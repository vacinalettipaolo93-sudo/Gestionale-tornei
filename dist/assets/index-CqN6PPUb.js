(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function e0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Dh={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function bb(){if(Iy)return Yl;Iy=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:a,type:r,key:m,ref:o!==void 0?o:null,props:d}}return Yl.Fragment=e,Yl.jsx=s,Yl.jsxs=s,Yl}var Dy;function Eb(){return Dy||(Dy=1,Dh.exports=bb()),Dh.exports}var h=Eb(),Mh={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function Tb(){if(My)return Bt;My=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),R=Symbol.iterator;function B(C){return C===null||typeof C!="object"?null:(C=R&&C[R]||C["@@iterator"],typeof C=="function"?C:null)}var it={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,D={};function Q(C,j,k){this.props=C,this.context=j,this.refs=D,this.updater=k||it}Q.prototype.isReactComponent={},Q.prototype.setState=function(C,j){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,j,"setState")},Q.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Z(){}Z.prototype=Q.prototype;function Y(C,j,k){this.props=C,this.context=j,this.refs=D,this.updater=k||it}var rt=Y.prototype=new Z;rt.constructor=Y,F(rt,Q.prototype),rt.isPureReactComponent=!0;var gt=Array.isArray;function yt(){}var A={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(C,j,k){var P=k.ref;return{$$typeof:a,type:C,key:j,ref:P!==void 0?P:null,props:k}}function V(C,j){return N(C.type,j,C.props)}function M(C){return typeof C=="object"&&C!==null&&C.$$typeof===a}function z(C){var j={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(k){return j[k]})}var I=/\/+/g;function wt(C,j){return typeof C=="object"&&C!==null&&C.key!=null?z(""+C.key):j.toString(36)}function St(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(yt,yt):(C.status="pending",C.then(function(j){C.status==="pending"&&(C.status="fulfilled",C.value=j)},function(j){C.status==="pending"&&(C.status="rejected",C.reason=j)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function tt(C,j,k,P,ct){var st=typeof C;(st==="undefined"||st==="boolean")&&(C=null);var pt=!1;if(C===null)pt=!0;else switch(st){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(C.$$typeof){case a:case e:pt=!0;break;case b:return pt=C._init,tt(pt(C._payload),j,k,P,ct)}}if(pt)return ct=ct(C),pt=P===""?"."+wt(C,0):P,gt(ct)?(k="",pt!=null&&(k=pt.replace(I,"$&/")+"/"),tt(ct,j,k,"",function(Ut){return Ut})):ct!=null&&(M(ct)&&(ct=V(ct,k+(ct.key==null||C&&C.key===ct.key?"":(""+ct.key).replace(I,"$&/")+"/")+pt)),j.push(ct)),1;pt=0;var Nt=P===""?".":P+":";if(gt(C))for(var At=0;At<C.length;At++)P=C[At],st=Nt+wt(P,At),pt+=tt(P,j,k,st,ct);else if(At=B(C),typeof At=="function")for(C=At.call(C),At=0;!(P=C.next()).done;)P=P.value,st=Nt+wt(P,At++),pt+=tt(P,j,k,st,ct);else if(st==="object"){if(typeof C.then=="function")return tt(St(C),j,k,P,ct);throw j=String(C),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return pt}function H(C,j,k){if(C==null)return C;var P=[],ct=0;return tt(C,P,"","",function(st){return j.call(k,st,ct++)}),P}function q(C){if(C._status===-1){var j=C._result;j=j(),j.then(function(k){(C._status===0||C._status===-1)&&(C._status=1,C._result=k)},function(k){(C._status===0||C._status===-1)&&(C._status=2,C._result=k)}),C._status===-1&&(C._status=0,C._result=j)}if(C._status===1)return C._result.default;throw C._result}var L=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},J={map:H,forEach:function(C,j,k){H(C,function(){j.apply(this,arguments)},k)},count:function(C){var j=0;return H(C,function(){j++}),j},toArray:function(C){return H(C,function(j){return j})||[]},only:function(C){if(!M(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Bt.Activity=E,Bt.Children=J,Bt.Component=Q,Bt.Fragment=s,Bt.Profiler=o,Bt.PureComponent=Y,Bt.StrictMode=r,Bt.Suspense=x,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return A.H.useMemoCache(C)}},Bt.cache=function(C){return function(){return C.apply(null,arguments)}},Bt.cacheSignal=function(){return null},Bt.cloneElement=function(C,j,k){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var P=F({},C.props),ct=C.key;if(j!=null)for(st in j.key!==void 0&&(ct=""+j.key),j)!w.call(j,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&j.ref===void 0||(P[st]=j[st]);var st=arguments.length-2;if(st===1)P.children=k;else if(1<st){for(var pt=Array(st),Nt=0;Nt<st;Nt++)pt[Nt]=arguments[Nt+2];P.children=pt}return N(C.type,ct,P)},Bt.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},Bt.createElement=function(C,j,k){var P,ct={},st=null;if(j!=null)for(P in j.key!==void 0&&(st=""+j.key),j)w.call(j,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(ct[P]=j[P]);var pt=arguments.length-2;if(pt===1)ct.children=k;else if(1<pt){for(var Nt=Array(pt),At=0;At<pt;At++)Nt[At]=arguments[At+2];ct.children=Nt}if(C&&C.defaultProps)for(P in pt=C.defaultProps,pt)ct[P]===void 0&&(ct[P]=pt[P]);return N(C,st,ct)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(C){return{$$typeof:p,render:C}},Bt.isValidElement=M,Bt.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:q}},Bt.memo=function(C,j){return{$$typeof:y,type:C,compare:j===void 0?null:j}},Bt.startTransition=function(C){var j=A.T,k={};A.T=k;try{var P=C(),ct=A.S;ct!==null&&ct(k,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(yt,L)}catch(st){L(st)}finally{j!==null&&k.types!==null&&(j.types=k.types),A.T=j}},Bt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Bt.use=function(C){return A.H.use(C)},Bt.useActionState=function(C,j,k){return A.H.useActionState(C,j,k)},Bt.useCallback=function(C,j){return A.H.useCallback(C,j)},Bt.useContext=function(C){return A.H.useContext(C)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(C,j){return A.H.useDeferredValue(C,j)},Bt.useEffect=function(C,j){return A.H.useEffect(C,j)},Bt.useEffectEvent=function(C){return A.H.useEffectEvent(C)},Bt.useId=function(){return A.H.useId()},Bt.useImperativeHandle=function(C,j,k){return A.H.useImperativeHandle(C,j,k)},Bt.useInsertionEffect=function(C,j){return A.H.useInsertionEffect(C,j)},Bt.useLayoutEffect=function(C,j){return A.H.useLayoutEffect(C,j)},Bt.useMemo=function(C,j){return A.H.useMemo(C,j)},Bt.useOptimistic=function(C,j){return A.H.useOptimistic(C,j)},Bt.useReducer=function(C,j,k){return A.H.useReducer(C,j,k)},Bt.useRef=function(C){return A.H.useRef(C)},Bt.useState=function(C){return A.H.useState(C)},Bt.useSyncExternalStore=function(C,j,k){return A.H.useSyncExternalStore(C,j,k)},Bt.useTransition=function(){return A.H.useTransition()},Bt.version="19.2.0",Bt}var Vy;function Tf(){return Vy||(Vy=1,Mh.exports=Tb()),Mh.exports}var lt=Tf();const Sb=e0(lt);var Vh={exports:{}},Xl={},Oh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function Ab(){return Oy||(Oy=1,(function(a){function e(tt,H){var q=tt.length;tt.push(H);t:for(;0<q;){var L=q-1>>>1,J=tt[L];if(0<o(J,H))tt[L]=H,tt[q]=J,q=L;else break t}}function s(tt){return tt.length===0?null:tt[0]}function r(tt){if(tt.length===0)return null;var H=tt[0],q=tt.pop();if(q!==H){tt[0]=q;t:for(var L=0,J=tt.length,C=J>>>1;L<C;){var j=2*(L+1)-1,k=tt[j],P=j+1,ct=tt[P];if(0>o(k,q))P<J&&0>o(ct,k)?(tt[L]=ct,tt[P]=q,L=P):(tt[L]=k,tt[j]=q,L=j);else if(P<J&&0>o(ct,q))tt[L]=ct,tt[P]=q,L=P;else break t}}return H}function o(tt,H){var q=tt.sortIndex-H.sortIndex;return q!==0?q:tt.id-H.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var m=Date,p=m.now();a.unstable_now=function(){return m.now()-p}}var x=[],y=[],b=1,E=null,R=3,B=!1,it=!1,F=!1,D=!1,Q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function rt(tt){for(var H=s(y);H!==null;){if(H.callback===null)r(y);else if(H.startTime<=tt)r(y),H.sortIndex=H.expirationTime,e(x,H);else break;H=s(y)}}function gt(tt){if(F=!1,rt(tt),!it)if(s(x)!==null)it=!0,yt||(yt=!0,z());else{var H=s(y);H!==null&&St(gt,H.startTime-tt)}}var yt=!1,A=-1,w=5,N=-1;function V(){return D?!0:!(a.unstable_now()-N<w)}function M(){if(D=!1,yt){var tt=a.unstable_now();N=tt;var H=!0;try{t:{it=!1,F&&(F=!1,Z(A),A=-1),B=!0;var q=R;try{e:{for(rt(tt),E=s(x);E!==null&&!(E.expirationTime>tt&&V());){var L=E.callback;if(typeof L=="function"){E.callback=null,R=E.priorityLevel;var J=L(E.expirationTime<=tt);if(tt=a.unstable_now(),typeof J=="function"){E.callback=J,rt(tt),H=!0;break e}E===s(x)&&r(x),rt(tt)}else r(x);E=s(x)}if(E!==null)H=!0;else{var C=s(y);C!==null&&St(gt,C.startTime-tt),H=!1}}break t}finally{E=null,R=q,B=!1}H=void 0}}finally{H?z():yt=!1}}}var z;if(typeof Y=="function")z=function(){Y(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,wt=I.port2;I.port1.onmessage=M,z=function(){wt.postMessage(null)}}else z=function(){Q(M,0)};function St(tt,H){A=Q(function(){tt(a.unstable_now())},H)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(tt){tt.callback=null},a.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<tt?Math.floor(1e3/tt):5},a.unstable_getCurrentPriorityLevel=function(){return R},a.unstable_next=function(tt){switch(R){case 1:case 2:case 3:var H=3;break;default:H=R}var q=R;R=H;try{return tt()}finally{R=q}},a.unstable_requestPaint=function(){D=!0},a.unstable_runWithPriority=function(tt,H){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var q=R;R=tt;try{return H()}finally{R=q}},a.unstable_scheduleCallback=function(tt,H,q){var L=a.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?L+q:L):q=L,tt){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=q+J,tt={id:b++,callback:H,priorityLevel:tt,startTime:q,expirationTime:J,sortIndex:-1},q>L?(tt.sortIndex=q,e(y,tt),s(x)===null&&tt===s(y)&&(F?(Z(A),A=-1):F=!0,St(gt,q-L))):(tt.sortIndex=J,e(x,tt),it||B||(it=!0,yt||(yt=!0,z()))),tt},a.unstable_shouldYield=V,a.unstable_wrapCallback=function(tt){var H=R;return function(){var q=R;R=H;try{return tt.apply(this,arguments)}finally{R=q}}}})(zh)),zh}var zy;function wb(){return zy||(zy=1,Oh.exports=Ab()),Oh.exports}var kh={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function Nb(){if(ky)return gn;ky=1;var a=Tf();function e(x){var y="https://react.dev/errors/"+x;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(x,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:x,containerInfo:y,implementation:b}}var m=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,y){if(x==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(x,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(x,y,null,b)},gn.flushSync=function(x){var y=m.T,b=r.p;try{if(m.T=null,r.p=2,x)return x()}finally{m.T=y,r.p=b,r.d.f()}},gn.preconnect=function(x,y){typeof x=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(x,y))},gn.prefetchDNS=function(x){typeof x=="string"&&r.d.D(x)},gn.preinit=function(x,y){if(typeof x=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(x,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:R,fetchPriority:B}):b==="script"&&r.d.X(x,{crossOrigin:E,integrity:R,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},gn.preinitModule=function(x,y){if(typeof x=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);r.d.M(x,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(x)},gn.preload=function(x,y){if(typeof x=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);r.d.L(x,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},gn.preloadModule=function(x,y){if(typeof x=="string")if(y){var b=p(y.as,y.crossOrigin);r.d.m(x,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(x)},gn.requestFormReset=function(x){r.d.r(x)},gn.unstable_batchedUpdates=function(x,y){return x(y)},gn.useFormState=function(x,y,b){return m.H.useFormState(x,y,b)},gn.useFormStatus=function(){return m.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var Uy;function Rb(){if(Uy)return kh.exports;Uy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),kh.exports=Nb(),kh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function Cb(){if(Ly)return Xl;Ly=1;var a=wb(),e=Tf(),s=Rb();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function m(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function x(t){if(d(t)!==t)throw Error(r(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(r(188));return n!==t?null:t}for(var i=t,l=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return x(u),t;if(f===l)return x(u),n;f=f.sibling}throw Error(r(188))}if(i.return!==l.return)i=u,l=f;else{for(var v=!1,T=u.child;T;){if(T===i){v=!0,i=u,l=f;break}if(T===l){v=!0,l=u,i=f;break}T=T.sibling}if(!v){for(T=f.child;T;){if(T===i){v=!0,i=f,l=u;break}if(T===l){v=!0,l=f,i=u;break}T=T.sibling}if(!v)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:n}function b(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=b(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,R=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),it=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function wt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case Q:return"Profiler";case D:return"StrictMode";case gt:return"Suspense";case yt:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case it:return"Portal";case Y:return t.displayName||"Context";case Z:return(t._context.displayName||"Context")+".Consumer";case rt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return n=t.displayName||null,n!==null?n:wt(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return wt(t(n))}catch{}}return null}var St=Array.isArray,tt=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},L=[],J=-1;function C(t){return{current:t}}function j(t){0>J||(t.current=L[J],L[J]=null,J--)}function k(t,n){J++,L[J]=t.current,t.current=n}var P=C(null),ct=C(null),st=C(null),pt=C(null);function Nt(t,n){switch(k(st,n),k(ct,t),k(P,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?ty(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=ty(n),t=ey(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}j(P),k(P,t)}function At(){j(P),j(ct),j(st)}function Ut(t){t.memoizedState!==null&&k(pt,t);var n=P.current,i=ey(n,t.type);n!==i&&(k(ct,t),k(P,i))}function re(t){ct.current===t&&(j(P),j(ct)),pt.current===t&&(j(pt),Gl._currentValue=q)}var je,ft;function vt(t){if(je===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);je=n&&n[1]||"",ft=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+t+ft}var zt=!1;function kt(t,n){if(!t||zt)return"";zt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(nt){var W=nt}Reflect.construct(t,[],ut)}else{try{ut.call()}catch(nt){W=nt}t.call(ut.prototype)}}else{try{throw Error()}catch(nt){W=nt}(ut=t())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(nt){if(nt&&W&&typeof nt.stack=="string")return[nt.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],T=f[1];if(v&&T){var O=v.split(`
`),$=T.split(`
`);for(u=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;if(l===O.length||u===$.length)for(l=O.length-1,u=$.length-1;1<=l&&0<=u&&O[l]!==$[u];)u--;for(;1<=l&&0<=u;l--,u--)if(O[l]!==$[u]){if(l!==1||u!==1)do if(l--,u--,0>u||O[l]!==$[u]){var at=`
`+O[l].replace(" at new "," at ");return t.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",t.displayName)),at}while(1<=l&&0<=u);break}}}finally{zt=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?vt(i):""}function ce(t,n){switch(t.tag){case 26:case 27:case 5:return vt(t.type);case 16:return vt("Lazy");case 13:return t.child!==n&&n!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return kt(t.type,!1);case 11:return kt(t.type.render,!1);case 1:return kt(t.type,!0);case 31:return vt("Activity");default:return""}}function te(t){try{var n="",i=null;do n+=ce(t,i),i=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ft=Object.prototype.hasOwnProperty,fe=a.unstable_scheduleCallback,Ie=a.unstable_cancelCallback,Wn=a.unstable_shouldYield,ts=a.unstable_requestPaint,We=a.unstable_now,ms=a.unstable_getCurrentPriorityLevel,hi=a.unstable_ImmediatePriority,fi=a.unstable_UserBlockingPriority,mt=a.unstable_NormalPriority,ue=a.unstable_LowPriority,ye=a.unstable_IdlePriority,Mt=a.log,Dt=a.unstable_setDisableYieldValue,Rt=null,xe=null;function tn(t){if(typeof Mt=="function"&&Dt(t),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(Rt,t)}catch{}}var Ot=Math.clz32?Math.clz32:Eo,en=Math.log,Ga=Math.LN2;function Eo(t){return t>>>=0,t===0?32:31-(en(t)/Ga|0)|0}var gs=256,aa=262144,Le=4194304;function ps(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ys(t,n,i){var l=t.pendingLanes;if(l===0)return 0;var u=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?u=ps(l):(v&=T,v!==0?u=ps(v):i||(i=T&~t,i!==0&&(u=ps(i))))):(T=l&~f,T!==0?u=ps(T):v!==0?u=ps(v):i||(i=l&~t,i!==0&&(u=ps(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function es(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function zu(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var t=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),t}function xs(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function ra(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ku(t,n,i,l,u,f){var v=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,$=t.hiddenUpdates;for(i=v&~i;0<i;){var at=31-Ot(i),ut=1<<at;T[at]=0,O[at]=-1;var W=$[at];if(W!==null)for($[at]=null,at=0;at<W.length;at++){var nt=W[at];nt!==null&&(nt.lane&=-536870913)}i&=~ut}l!==0&&la(t,l,0),f!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~n))}function la(t,n,i){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Ot(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|i&261930}function Xr(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var l=31-Ot(i),u=1<<l;u&n|t[l]&n&&(t[l]|=n),i&=~u}}function Kr(t,n){var i=n&-n;return i=(i&42)!==0?1:oa(i),(i&(t.suspendedLanes|n))!==0?0:i}function oa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function So(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:Sy(t.type))}function ns(t,n){var i=H.p;try{return H.p=t,n()}finally{H.p=i}}var ss=Math.random().toString(36).slice(2),Be="__reactFiber$"+ss,nn="__reactProps$"+ss,vs="__reactContainer$"+ss,Ha="__reactEvents$"+ss,Uu="__reactListeners$"+ss,Ao="__reactHandles$"+ss,wo="__reactResources$"+ss,_s="__reactMarker$"+ss;function Fa(t){delete t[Be],delete t[nn],delete t[Ha],delete t[Uu],delete t[Ao]}function bs(t){var n=t[Be];if(n)return n;for(var i=t.parentNode;i;){if(n=i[vs]||i[Be]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=oy(t);t!==null;){if(i=t[Be])return i;t=oy(t)}return n}t=i,i=t.parentNode}return null}function Bn(t){if(t=t[Be]||t[vs]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function jn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Es(t){var n=t[wo];return n||(n=t[wo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Pe(t){t[_s]=!0}var $r=new Set,Zr={};function Ts(t,n){Ss(t,n),Ss(t+"Capture",n)}function Ss(t,n){for(Zr[t]=n,t=0;t<n.length;t++)$r.add(n[t])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wr={},tl={};function No(t){return Ft.call(tl,t)?!0:Ft.call(Wr,t)?!1:Jr.test(t)?tl[t]=!0:(Wr[t]=!0,!1)}function Qa(t,n,i){if(No(n))if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+i)}}function In(t,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+i)}}function qe(t,n,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(n,i,""+l)}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function el(t,n,i){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,f=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return u.call(this)},set:function(v){i=""+v,f.call(this,v)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(v){i=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function me(t){if(!t._valueTracker){var n=mi(t)?"checked":"value";t._valueTracker=el(t,n,""+t[n])}}function ca(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return t&&(l=mi(t)?t.checked?"true":"false":t.value),t=l,t!==i?(n.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ua=/[\n"\\]/g;function bn(t){return t.replace(ua,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ya(t,n,i,l,u,f,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+sn(n)):t.value!==""+sn(n)&&(t.value=""+sn(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?nl(t,v,sn(n)):i!=null?nl(t,v,sn(i)):l!=null&&t.removeAttribute("value"),u==null&&f!=null&&(t.defaultChecked=!!f),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+sn(T):t.removeAttribute("name")}function Ro(t,n,i,l,u,f,v,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){me(t);return}i=i!=null?""+sn(i):"",n=n!=null?""+sn(n):i,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),me(t)}function nl(t,n,i){n==="number"&&As(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function gi(t,n,i,l){if(t=t.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<t.length;i++)u=n.hasOwnProperty("$"+t[i].value),t[i].selected!==u&&(t[i].selected=u),u&&l&&(t[i].defaultSelected=!0)}else{for(i=""+sn(i),n=null,u=0;u<t.length;u++){if(t[u].value===i){t[u].selected=!0,l&&(t[u].defaultSelected=!0);return}n!==null||t[u].disabled||(n=t[u])}n!==null&&(n.selected=!0)}}function Co(t,n,i){if(n!=null&&(n=""+sn(n),n!==t.value&&(t.value=n),i==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=i!=null?""+sn(i):""}function pi(t,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(r(92));if(St(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=sn(n),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l),me(t)}function En(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(t,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,i):typeof i!="number"||i===0||jo.has(n)?n==="float"?t.cssFloat=i:t[n]=(""+i).trim():t[n]=i+"px"}function il(t,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var u in n)l=n[u],n.hasOwnProperty(u)&&i[u]!==l&&sl(t,u,l)}else for(var f in n)n.hasOwnProperty(f)&&sl(t,f,n[f])}function Xa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ka(t){return yi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function is(){}var al=null;function Pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xi=null,ws=null;function da(t){var n=Bn(t);if(n&&(t=n.stateNode)){var i=t[nn]||null;t:switch(t=n.stateNode,n.type){case"input":if(Ya(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+bn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==t&&l.form===t.form){var u=l[nn]||null;if(!u)throw Error(r(90));Ya(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===t.form&&ca(l)}break t;case"textarea":Co(t,i.value,i.defaultValue);break t;case"select":n=i.value,n!=null&&gi(t,!!i.multiple,n,!1)}}}var $a=!1;function vi(t,n,i){if($a)return t(n,i);$a=!0;try{var l=t(n);return l}finally{if($a=!1,(xi!==null||ws!==null)&&(Sc(),xi&&(n=xi,t=ws,ws=xi=null,da(n),t)))for(n=0;n<t.length;n++)da(t[n])}}function as(t,n){var i=t.stateNode;if(i===null)return null;var l=i[nn]||null;if(l===null)return null;i=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(qn)try{var ve={};Object.defineProperty(ve,"passive",{get:function(){ha=!0}}),window.addEventListener("test",ve,ve),window.removeEventListener("test",ve,ve)}catch{ha=!1}var Ns=null,rl=null,fa=null;function ll(){if(fa)return fa;var t,n=rl,i=n.length,l,u="value"in Ns?Ns.value:Ns.textContent,f=u.length;for(t=0;t<i&&n[t]===u[t];t++);var v=i-t;for(l=1;l<=v&&n[i-l]===u[f-l];l++);return fa=u.slice(t,1<l?1-l:void 0)}function ma(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Fs(){return!0}function rs(){return!1}function ln(t){function n(i,l,u,f,v){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(i=t[T],this[T]=i?i(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fs:rs,this.isPropagationStopped=rs,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),n}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=ln(Qs),_i=E({},Qs,{view:0,detail:0}),ol=ln(_i),bi,Za,Cs,Ja=E({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cs&&(Cs&&t.type==="mousemove"?(bi=t.screenX-Cs.screenX,Za=t.screenY-Cs.screenY):Za=bi=0,Cs=t),bi)},movementY:function(t){return"movementY"in t?t.movementY:Za}}),cl=ln(Ja),ga=E({},Ja,{dataTransfer:0}),Do=ln(ga),Mo=E({},_i,{relatedTarget:0}),pa=ln(Mo),ul=E({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Vo=ln(ul),Wa=E({},Qs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Oo=ln(Wa),zo=E({},Qs,{data:0}),js=ln(zo),ko={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Lo[t])?!!n[t]:!1}function Ei(){return Bo}var vn=E({},_i,{key:function(t){if(t.key){var n=ko[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ma(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(t){return t.type==="keypress"?ma(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ma(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Po=ln(vn),qo=E({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ys=ln(qo),c=E({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),g=ln(c),_=E({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=ln(_),X=E({},Ja,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),et=ln(X),xt=E({},Qs,{newState:0,oldState:0}),qt=ln(xt),Oe=[9,13,27,32],le=qn&&"CompositionEvent"in window,Re=null;qn&&"documentMode"in document&&(Re=document.documentMode);var Gn=qn&&"TextEvent"in window&&!Re,Is=qn&&(!le||Re&&8<Re&&11>=Re),ls=" ",os=!1;function ya(t,n){switch(t){case"keyup":return Oe.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function Fv(t,n){switch(t){case"compositionend":return tr(n);case"keypress":return n.which!==32?null:(os=!0,ls);case"textInput":return t=n.data,t===ls&&os?null:t;default:return null}}function Qv(t,n){if(er)return t==="compositionend"||!le&&ya(t,n)?(t=ll(),fa=rl=Ns=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Is&&n.locale!=="ko"?null:n.data;default:return null}}var Yv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Yv[t.type]:n==="textarea"}function hm(t,n,i,l){xi?ws?ws.push(l):ws=[l]:xi=l,n=Ic(n,"onChange"),0<n.length&&(i=new Rs("onChange","change",null,i,l),t.push({event:i,listeners:n}))}var dl=null,hl=null;function Xv(t){Xp(t,0)}function Go(t){var n=jn(t);if(ca(n))return t}function fm(t,n){if(t==="change")return n}var mm=!1;if(qn){var Lu;if(qn){var Bu="oninput"in document;if(!Bu){var gm=document.createElement("div");gm.setAttribute("oninput","return;"),Bu=typeof gm.oninput=="function"}Lu=Bu}else Lu=!1;mm=Lu&&(!document.documentMode||9<document.documentMode)}function pm(){dl&&(dl.detachEvent("onpropertychange",ym),hl=dl=null)}function ym(t){if(t.propertyName==="value"&&Go(hl)){var n=[];hm(n,hl,t,Pn(t)),vi(Xv,n)}}function Kv(t,n,i){t==="focusin"?(pm(),dl=n,hl=i,dl.attachEvent("onpropertychange",ym)):t==="focusout"&&pm()}function $v(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(hl)}function Zv(t,n){if(t==="click")return Go(n)}function Jv(t,n){if(t==="input"||t==="change")return Go(n)}function Wv(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Dn=typeof Object.is=="function"?Object.is:Wv;function fl(t,n){if(Dn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!Ft.call(n,u)||!Dn(t[u],n[u]))return!1}return!0}function xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,n){var i=xm(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=n&&l>=n)return{node:i,offset:n-t};t=l}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=xm(i)}}function _m(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?_m(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function bm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=As(t.document);n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=As(t.document)}return n}function Pu(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var t_=qn&&"documentMode"in document&&11>=document.documentMode,nr=null,qu=null,ml=null,Gu=!1;function Em(t,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Gu||nr==null||nr!==As(l)||(l=nr,"selectionStart"in l&&Pu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&fl(ml,l)||(ml=l,l=Ic(qu,"onSelect"),0<l.length&&(n=new Rs("onSelect","select",null,n,i),t.push({event:n,listeners:l}),n.target=nr)))}function xa(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var sr={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},Hu={},Tm={};qn&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function va(t){if(Hu[t])return Hu[t];if(!sr[t])return t;var n=sr[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in Tm)return Hu[t]=n[i];return t}var Sm=va("animationend"),Am=va("animationiteration"),wm=va("animationstart"),e_=va("transitionrun"),n_=va("transitionstart"),s_=va("transitioncancel"),Nm=va("transitionend"),Rm=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function cs(t,n){Rm.set(t,n),Ts(n,[t])}var Ho=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Hn=[],ir=0,Qu=0;function Fo(){for(var t=ir,n=Qu=ir=0;n<t;){var i=Hn[n];Hn[n++]=null;var l=Hn[n];Hn[n++]=null;var u=Hn[n];Hn[n++]=null;var f=Hn[n];if(Hn[n++]=null,l!==null&&u!==null){var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}f!==0&&Cm(i,u,f)}}function Qo(t,n,i,l){Hn[ir++]=t,Hn[ir++]=n,Hn[ir++]=i,Hn[ir++]=l,Qu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Yu(t,n,i,l){return Qo(t,n,i,l),Yo(t)}function _a(t,n){return Qo(t,null,null,n),Yo(t)}function Cm(t,n,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var u=!1,f=t.return;f!==null;)f.childLanes|=i,l=f.alternate,l!==null&&(l.childLanes|=i),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(u=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,u&&n!==null&&(u=31-Ot(i),t=f.hiddenUpdates,l=t[u],l===null?t[u]=[n]:l.push(n),n.lane=i|536870912),f):null}function Yo(t){if(50<zl)throw zl=0,nh=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ar={};function i_(t,n,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,n,i,l){return new i_(t,n,i,l)}function Xu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xs(t,n){var i=t.alternate;return i===null?(i=Mn(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function jm(t,n){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,n=i.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Xo(t,n,i,l,u,f){var v=0;if(l=t,typeof t=="function")Xu(t)&&(v=1);else if(typeof t=="string")v=cb(t,i,P.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case N:return t=Mn(31,i,n,u),t.elementType=N,t.lanes=f,t;case F:return ba(i.children,u,f,n);case D:v=8,u|=24;break;case Q:return t=Mn(12,i,n,u|2),t.elementType=Q,t.lanes=f,t;case gt:return t=Mn(13,i,n,u),t.elementType=gt,t.lanes=f,t;case yt:return t=Mn(19,i,n,u),t.elementType=yt,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:v=10;break t;case Z:v=9;break t;case rt:v=11;break t;case A:v=14;break t;case w:v=16,l=null;break t}v=29,i=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=Mn(v,i,n,u),n.elementType=t,n.type=l,n.lanes=f,n}function ba(t,n,i,l){return t=Mn(7,t,l,n),t.lanes=i,t}function Ku(t,n,i){return t=Mn(6,t,null,n),t.lanes=i,t}function Im(t){var n=Mn(18,null,null,0);return n.stateNode=t,n}function $u(t,n,i){return n=Mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Dm=new WeakMap;function Fn(t,n){if(typeof t=="object"&&t!==null){var i=Dm.get(t);return i!==void 0?i:(n={value:t,source:n,stack:te(n)},Dm.set(t,n),n)}return{value:t,source:n,stack:te(n)}}var rr=[],lr=0,Ko=null,gl=0,Qn=[],Yn=0,Ti=null,Ds=1,Ms="";function Ks(t,n){rr[lr++]=gl,rr[lr++]=Ko,Ko=t,gl=n}function Mm(t,n,i){Qn[Yn++]=Ds,Qn[Yn++]=Ms,Qn[Yn++]=Ti,Ti=t;var l=Ds;t=Ms;var u=32-Ot(l)-1;l&=~(1<<u),i+=1;var f=32-Ot(n)+u;if(30<f){var v=u-u%5;f=(l&(1<<v)-1).toString(32),l>>=v,u-=v,Ds=1<<32-Ot(n)+u|i<<u|l,Ms=f+t}else Ds=1<<f|i<<u|l,Ms=t}function Zu(t){t.return!==null&&(Ks(t,1),Mm(t,1,0))}function Ju(t){for(;t===Ko;)Ko=rr[--lr],rr[lr]=null,gl=rr[--lr],rr[lr]=null;for(;t===Ti;)Ti=Qn[--Yn],Qn[Yn]=null,Ms=Qn[--Yn],Qn[Yn]=null,Ds=Qn[--Yn],Qn[Yn]=null}function Vm(t,n){Qn[Yn++]=Ds,Qn[Yn++]=Ms,Qn[Yn++]=Ti,Ds=n.id,Ms=n.overflow,Ti=t}var on=null,Ae=null,Wt=!1,Si=null,Xn=!1,Wu=Error(r(519));function Ai(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Fn(n,t)),Wu}function Om(t){var n=t.stateNode,i=t.type,l=t.memoizedProps;switch(n[Be]=t,n[nn]=l,i){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(i=0;i<Ul.length;i++)Xt(Ul[i],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":Xt("invalid",n),Ro(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Xt("invalid",n);break;case"textarea":Xt("invalid",n),pi(n,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||Jp(n.textContent,i)?(l.popover!=null&&(Xt("beforetoggle",n),Xt("toggle",n)),l.onScroll!=null&&Xt("scroll",n),l.onScrollEnd!=null&&Xt("scrollend",n),l.onClick!=null&&(n.onclick=is),n=!0):n=!1,n||Ai(t,!0)}function zm(t){for(on=t.return;on;)switch(on.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:on=on.return}}function or(t){if(t!==on)return!1;if(!Wt)return zm(t),Wt=!0,!1;var n=t.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||yh(t.type,t.memoizedProps)),i=!i),i&&Ae&&Ai(t),zm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Ae=ly(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Ae=ly(t)}else n===27?(n=Ae,Li(t.type)?(t=Eh,Eh=null,Ae=t):Ae=n):Ae=on?$n(t.stateNode.nextSibling):null;return!0}function Ea(){Ae=on=null,Wt=!1}function td(){var t=Si;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Si=null),t}function pl(t){Si===null?Si=[t]:Si.push(t)}var ed=C(null),Ta=null,$s=null;function wi(t,n,i){k(ed,n._currentValue),n._currentValue=i}function Zs(t){t._currentValue=ed.current,j(ed)}function nd(t,n,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===i)break;t=t.return}}function sd(t,n,i,l){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=u;for(var O=0;O<n.length;O++)if(T.context===n[O]){f.lanes|=i,T=f.alternate,T!==null&&(T.lanes|=i),nd(f.return,i,t),l||(v=null);break t}f=T.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(r(341));v.lanes|=i,f=v.alternate,f!==null&&(f.lanes|=i),nd(v,i,t),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===t){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function cr(t,n,i,l){t=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=u.type;Dn(u.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(u===pt.current){if(v=u.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(Gl):t=[Gl])}u=u.return}t!==null&&sd(n,t,i,l),n.flags|=262144}function $o(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Sa(t){Ta=t,$s=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function cn(t){return km(Ta,t)}function Zo(t,n){return Ta===null&&Sa(t),km(t,n)}function km(t,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},$s===null){if(t===null)throw Error(r(308));$s=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else $s=$s.next=n;return i}var a_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(i){return i()})}},r_=a.unstable_scheduleCallback,l_=a.unstable_NormalPriority,Ge={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new a_,data:new Map,refCount:0}}function yl(t){t.refCount--,t.refCount===0&&r_(l_,function(){t.controller.abort()})}var xl=null,ad=0,ur=0,dr=null;function o_(t,n){if(xl===null){var i=xl=[];ad=0,ur=oh(),dr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return ad++,n.then(Um,Um),n}function Um(){if(--ad===0&&xl!==null){dr!==null&&(dr.status="fulfilled");var t=xl;xl=null,ur=0,dr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function c_(t,n){var i=[],l={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(l.status="rejected",l.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),l}var Lm=tt.S;tt.S=function(t,n){Ep=We(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&o_(t,n),Lm!==null&&Lm(t,n)};var Aa=C(null);function rd(){var t=Aa.current;return t!==null?t:Te.pooledCache}function Jo(t,n){n===null?k(Aa,Aa.current):k(Aa,n.pool)}function Bm(){var t=rd();return t===null?null:{parent:Ge._currentValue,pool:t}}var hr=Error(r(460)),ld=Error(r(474)),Wo=Error(r(542)),tc={then:function(){}};function Pm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qm(t,n,i){switch(i=t[i],i===void 0?t.push(n):i!==n&&(n.then(is,is),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Hm(t),t;default:if(typeof n.status=="string")n.then(is,is);else{if(t=Te,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=l}},function(l){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Hm(t),t}throw Na=n,hr}}function wa(t){try{var n=t._init;return n(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Na=i,hr):i}}var Na=null;function Gm(){if(Na===null)throw Error(r(459));var t=Na;return Na=null,t}function Hm(t){if(t===hr||t===Wo)throw Error(r(483))}var fr=null,vl=0;function ec(t){var n=vl;return vl+=1,fr===null&&(fr=[]),qm(fr,t,n)}function _l(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function nc(t,n){throw n.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Fm(t){function n(G,U){if(t){var K=G.deletions;K===null?(G.deletions=[U],G.flags|=16):K.push(U)}}function i(G,U){if(!t)return null;for(;U!==null;)n(G,U),U=U.sibling;return null}function l(G){for(var U=new Map;G!==null;)G.key!==null?U.set(G.key,G):U.set(G.index,G),G=G.sibling;return U}function u(G,U){return G=Xs(G,U),G.index=0,G.sibling=null,G}function f(G,U,K){return G.index=K,t?(K=G.alternate,K!==null?(K=K.index,K<U?(G.flags|=67108866,U):K):(G.flags|=67108866,U)):(G.flags|=1048576,U)}function v(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function T(G,U,K,ot){return U===null||U.tag!==6?(U=Ku(K,G.mode,ot),U.return=G,U):(U=u(U,K),U.return=G,U)}function O(G,U,K,ot){var Ct=K.type;return Ct===F?at(G,U,K.props.children,ot,K.key):U!==null&&(U.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===w&&wa(Ct)===U.type)?(U=u(U,K.props),_l(U,K),U.return=G,U):(U=Xo(K.type,K.key,K.props,null,G.mode,ot),_l(U,K),U.return=G,U)}function $(G,U,K,ot){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=$u(K,G.mode,ot),U.return=G,U):(U=u(U,K.children||[]),U.return=G,U)}function at(G,U,K,ot,Ct){return U===null||U.tag!==7?(U=ba(K,G.mode,ot,Ct),U.return=G,U):(U=u(U,K),U.return=G,U)}function ut(G,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Ku(""+U,G.mode,K),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case B:return K=Xo(U.type,U.key,U.props,null,G.mode,K),_l(K,U),K.return=G,K;case it:return U=$u(U,G.mode,K),U.return=G,U;case w:return U=wa(U),ut(G,U,K)}if(St(U)||z(U))return U=ba(U,G.mode,K,null),U.return=G,U;if(typeof U.then=="function")return ut(G,ec(U),K);if(U.$$typeof===Y)return ut(G,Zo(G,U),K);nc(G,U)}return null}function W(G,U,K,ot){var Ct=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ct!==null?null:T(G,U,""+K,ot);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case B:return K.key===Ct?O(G,U,K,ot):null;case it:return K.key===Ct?$(G,U,K,ot):null;case w:return K=wa(K),W(G,U,K,ot)}if(St(K)||z(K))return Ct!==null?null:at(G,U,K,ot,null);if(typeof K.then=="function")return W(G,U,ec(K),ot);if(K.$$typeof===Y)return W(G,U,Zo(G,K),ot);nc(G,K)}return null}function nt(G,U,K,ot,Ct){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return G=G.get(K)||null,T(U,G,""+ot,Ct);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case B:return G=G.get(ot.key===null?K:ot.key)||null,O(U,G,ot,Ct);case it:return G=G.get(ot.key===null?K:ot.key)||null,$(U,G,ot,Ct);case w:return ot=wa(ot),nt(G,U,K,ot,Ct)}if(St(ot)||z(ot))return G=G.get(K)||null,at(U,G,ot,Ct,null);if(typeof ot.then=="function")return nt(G,U,K,ec(ot),Ct);if(ot.$$typeof===Y)return nt(G,U,K,Zo(U,ot),Ct);nc(U,ot)}return null}function Et(G,U,K,ot){for(var Ct=null,ie=null,Tt=U,Ht=U=0,$t=null;Tt!==null&&Ht<K.length;Ht++){Tt.index>Ht?($t=Tt,Tt=null):$t=Tt.sibling;var ae=W(G,Tt,K[Ht],ot);if(ae===null){Tt===null&&(Tt=$t);break}t&&Tt&&ae.alternate===null&&n(G,Tt),U=f(ae,U,Ht),ie===null?Ct=ae:ie.sibling=ae,ie=ae,Tt=$t}if(Ht===K.length)return i(G,Tt),Wt&&Ks(G,Ht),Ct;if(Tt===null){for(;Ht<K.length;Ht++)Tt=ut(G,K[Ht],ot),Tt!==null&&(U=f(Tt,U,Ht),ie===null?Ct=Tt:ie.sibling=Tt,ie=Tt);return Wt&&Ks(G,Ht),Ct}for(Tt=l(Tt);Ht<K.length;Ht++)$t=nt(Tt,G,Ht,K[Ht],ot),$t!==null&&(t&&$t.alternate!==null&&Tt.delete($t.key===null?Ht:$t.key),U=f($t,U,Ht),ie===null?Ct=$t:ie.sibling=$t,ie=$t);return t&&Tt.forEach(function(Hi){return n(G,Hi)}),Wt&&Ks(G,Ht),Ct}function It(G,U,K,ot){if(K==null)throw Error(r(151));for(var Ct=null,ie=null,Tt=U,Ht=U=0,$t=null,ae=K.next();Tt!==null&&!ae.done;Ht++,ae=K.next()){Tt.index>Ht?($t=Tt,Tt=null):$t=Tt.sibling;var Hi=W(G,Tt,ae.value,ot);if(Hi===null){Tt===null&&(Tt=$t);break}t&&Tt&&Hi.alternate===null&&n(G,Tt),U=f(Hi,U,Ht),ie===null?Ct=Hi:ie.sibling=Hi,ie=Hi,Tt=$t}if(ae.done)return i(G,Tt),Wt&&Ks(G,Ht),Ct;if(Tt===null){for(;!ae.done;Ht++,ae=K.next())ae=ut(G,ae.value,ot),ae!==null&&(U=f(ae,U,Ht),ie===null?Ct=ae:ie.sibling=ae,ie=ae);return Wt&&Ks(G,Ht),Ct}for(Tt=l(Tt);!ae.done;Ht++,ae=K.next())ae=nt(Tt,G,Ht,ae.value,ot),ae!==null&&(t&&ae.alternate!==null&&Tt.delete(ae.key===null?Ht:ae.key),U=f(ae,U,Ht),ie===null?Ct=ae:ie.sibling=ae,ie=ae);return t&&Tt.forEach(function(_b){return n(G,_b)}),Wt&&Ks(G,Ht),Ct}function Ee(G,U,K,ot){if(typeof K=="object"&&K!==null&&K.type===F&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case B:t:{for(var Ct=K.key;U!==null;){if(U.key===Ct){if(Ct=K.type,Ct===F){if(U.tag===7){i(G,U.sibling),ot=u(U,K.props.children),ot.return=G,G=ot;break t}}else if(U.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===w&&wa(Ct)===U.type){i(G,U.sibling),ot=u(U,K.props),_l(ot,K),ot.return=G,G=ot;break t}i(G,U);break}else n(G,U);U=U.sibling}K.type===F?(ot=ba(K.props.children,G.mode,ot,K.key),ot.return=G,G=ot):(ot=Xo(K.type,K.key,K.props,null,G.mode,ot),_l(ot,K),ot.return=G,G=ot)}return v(G);case it:t:{for(Ct=K.key;U!==null;){if(U.key===Ct)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){i(G,U.sibling),ot=u(U,K.children||[]),ot.return=G,G=ot;break t}else{i(G,U);break}else n(G,U);U=U.sibling}ot=$u(K,G.mode,ot),ot.return=G,G=ot}return v(G);case w:return K=wa(K),Ee(G,U,K,ot)}if(St(K))return Et(G,U,K,ot);if(z(K)){if(Ct=z(K),typeof Ct!="function")throw Error(r(150));return K=Ct.call(K),It(G,U,K,ot)}if(typeof K.then=="function")return Ee(G,U,ec(K),ot);if(K.$$typeof===Y)return Ee(G,U,Zo(G,K),ot);nc(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(i(G,U.sibling),ot=u(U,K),ot.return=G,G=ot):(i(G,U),ot=Ku(K,G.mode,ot),ot.return=G,G=ot),v(G)):i(G,U)}return function(G,U,K,ot){try{vl=0;var Ct=Ee(G,U,K,ot);return fr=null,Ct}catch(Tt){if(Tt===hr||Tt===Wo)throw Tt;var ie=Mn(29,Tt,null,G.mode);return ie.lanes=ot,ie.return=G,ie}finally{}}}var Ra=Fm(!0),Qm=Fm(!1),Ni=!1;function od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ri(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ci(t,n,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,n=Yo(t),Cm(t,null,i),n}return Qo(t,l,n,i),Yo(t)}function bl(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Xr(t,i)}}function ud(t,n){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}var dd=!1;function El(){if(dd){var t=dr;if(t!==null)throw t}}function Tl(t,n,i,l){dd=!1;var u=t.updateQueue;Ni=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,T=u.shared.pending;if(T!==null){u.shared.pending=null;var O=T,$=O.next;O.next=null,v===null?f=$:v.next=$,v=O;var at=t.alternate;at!==null&&(at=at.updateQueue,T=at.lastBaseUpdate,T!==v&&(T===null?at.firstBaseUpdate=$:T.next=$,at.lastBaseUpdate=O))}if(f!==null){var ut=u.baseState;v=0,at=$=O=null,T=f;do{var W=T.lane&-536870913,nt=W!==T.lane;if(nt?(Kt&W)===W:(l&W)===W){W!==0&&W===ur&&(dd=!0),at!==null&&(at=at.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Et=t,It=T;W=n;var Ee=i;switch(It.tag){case 1:if(Et=It.payload,typeof Et=="function"){ut=Et.call(Ee,ut,W);break t}ut=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=It.payload,W=typeof Et=="function"?Et.call(Ee,ut,W):Et,W==null)break t;ut=E({},ut,W);break t;case 2:Ni=!0}}W=T.callback,W!==null&&(t.flags|=64,nt&&(t.flags|=8192),nt=u.callbacks,nt===null?u.callbacks=[W]:nt.push(W))}else nt={lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},at===null?($=at=nt,O=ut):at=at.next=nt,v|=W;if(T=T.next,T===null){if(T=u.shared.pending,T===null)break;nt=T,T=nt.next,nt.next=null,u.lastBaseUpdate=nt,u.shared.pending=null}}while(!0);at===null&&(O=ut),u.baseState=O,u.firstBaseUpdate=$,u.lastBaseUpdate=at,f===null&&(u.shared.lanes=0),Vi|=v,t.lanes=v,t.memoizedState=ut}}function Ym(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Xm(t,n){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Ym(i[t],n)}var mr=C(null),sc=C(0);function Km(t,n){t=ri,k(sc,t),k(mr,n),ri=t|n.baseLanes}function hd(){k(sc,ri),k(mr,mr.current)}function fd(){ri=sc.current,j(mr),j(sc)}var Vn=C(null),Kn=null;function ji(t){var n=t.alternate;k(ze,ze.current&1),k(Vn,t),Kn===null&&(n===null||mr.current!==null||n.memoizedState!==null)&&(Kn=t)}function md(t){k(ze,ze.current),k(Vn,t),Kn===null&&(Kn=t)}function $m(t){t.tag===22?(k(ze,ze.current),k(Vn,t),Kn===null&&(Kn=t)):Ii()}function Ii(){k(ze,ze.current),k(Vn,Vn.current)}function On(t){j(Vn),Kn===t&&(Kn=null),j(ze)}var ze=C(0);function ic(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||_h(i)||bh(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Js=0,Gt=null,_e=null,He=null,ac=!1,gr=!1,Ca=!1,rc=0,Sl=0,pr=null,u_=0;function Me(){throw Error(r(321))}function gd(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Dn(t[i],n[i]))return!1;return!0}function pd(t,n,i,l,u,f){return Js=f,Gt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,tt.H=t===null||t.memoizedState===null?Mg:Id,Ca=!1,f=i(l,u),Ca=!1,gr&&(f=Jm(n,i,l,u)),Zm(t),f}function Zm(t){tt.H=Nl;var n=_e!==null&&_e.next!==null;if(Js=0,He=_e=Gt=null,ac=!1,Sl=0,pr=null,n)throw Error(r(300));t===null||Fe||(t=t.dependencies,t!==null&&$o(t)&&(Fe=!0))}function Jm(t,n,i,l){Gt=t;var u=0;do{if(gr&&(pr=null),Sl=0,gr=!1,25<=u)throw Error(r(301));if(u+=1,He=_e=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}tt.H=Vg,f=n(i,l)}while(gr);return f}function d_(){var t=tt.H,n=t.useState()[0];return n=typeof n.then=="function"?Al(n):n,t=t.useState()[0],(_e!==null?_e.memoizedState:null)!==t&&(Gt.flags|=1024),n}function yd(){var t=rc!==0;return rc=0,t}function xd(t,n,i){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i}function vd(t){if(ac){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}ac=!1}Js=0,He=_e=Gt=null,gr=!1,Sl=rc=0,pr=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Gt.memoizedState=He=t:He=He.next=t,He}function ke(){if(_e===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var n=He===null?Gt.memoizedState:He.next;if(n!==null)He=n,_e=t;else{if(t===null)throw Gt.alternate===null?Error(r(467)):Error(r(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},He===null?Gt.memoizedState=He=t:He=He.next=t}return He}function lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(t){var n=Sl;return Sl+=1,pr===null&&(pr=[]),t=qm(pr,t,n),n=Gt,(He===null?n.memoizedState:He.next)===null&&(n=n.alternate,tt.H=n===null||n.memoizedState===null?Mg:Id),t}function oc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Al(t);if(t.$$typeof===Y)return cn(t)}throw Error(r(438,String(t)))}function _d(t){var n=null,i=Gt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=Gt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=lc(),Gt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(t),l=0;l<t;l++)i[l]=V;return n.index++,i}function Ws(t,n){return typeof n=="function"?n(t):n}function cc(t){var n=ke();return bd(n,_e,t)}function bd(t,n,i){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=t.baseQueue,f=l.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}n.baseQueue=u=f,l.pending=null}if(f=t.baseState,u===null)t.memoizedState=f;else{n=u.next;var T=v=null,O=null,$=n,at=!1;do{var ut=$.lane&-536870913;if(ut!==$.lane?(Kt&ut)===ut:(Js&ut)===ut){var W=$.revertLane;if(W===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ut===ur&&(at=!0);else if((Js&W)===W){$=$.next,W===ur&&(at=!0);continue}else ut={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=ut,v=f):O=O.next=ut,Gt.lanes|=W,Vi|=W;ut=$.action,Ca&&i(f,ut),f=$.hasEagerState?$.eagerState:i(f,ut)}else W={lane:ut,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=W,v=f):O=O.next=W,Gt.lanes|=ut,Vi|=ut;$=$.next}while($!==null&&$!==n);if(O===null?v=f:O.next=T,!Dn(f,t.memoizedState)&&(Fe=!0,at&&(i=dr,i!==null)))throw i;t.memoizedState=f,t.baseState=v,t.baseQueue=O,l.lastRenderedState=f}return u===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ed(t){var n=ke(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var l=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var v=u=u.next;do f=t(f,v.action),v=v.next;while(v!==u);Dn(f,n.memoizedState)||(Fe=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function Wm(t,n,i){var l=Gt,u=ke(),f=Wt;if(f){if(i===void 0)throw Error(r(407));i=i()}else i=n();var v=!Dn((_e||u).memoizedState,i);if(v&&(u.memoizedState=i,Fe=!0),u=u.queue,Ad(ng.bind(null,l,u,t),[t]),u.getSnapshot!==n||v||He!==null&&He.memoizedState.tag&1){if(l.flags|=2048,yr(9,{destroy:void 0},eg.bind(null,l,u,i,n),null),Te===null)throw Error(r(349));f||(Js&127)!==0||tg(l,n,i)}return i}function tg(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=Gt.updateQueue,n===null?(n=lc(),Gt.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function eg(t,n,i,l){n.value=i,n.getSnapshot=l,sg(n)&&ig(t)}function ng(t,n,i){return i(function(){sg(n)&&ig(t)})}function sg(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Dn(t,i)}catch{return!0}}function ig(t){var n=_a(t,2);n!==null&&Nn(n,t,2)}function Td(t){var n=_n();if(typeof t=="function"){var i=t;if(t=i(),Ca){tn(!0);try{i()}finally{tn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},n}function ag(t,n,i,l){return t.baseState=i,bd(t,_e,typeof l=="function"?l:Ws)}function h_(t,n,i,l,u){if(hc(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};tt.T!==null?i(!0):f.isTransition=!1,l(f),i=n.pending,i===null?(f.next=n.pending=f,rg(n,f)):(f.next=i.next,n.pending=i.next=f)}}function rg(t,n){var i=n.action,l=n.payload,u=t.state;if(n.isTransition){var f=tt.T,v={};tt.T=v;try{var T=i(u,l),O=tt.S;O!==null&&O(v,T),lg(t,n,T)}catch($){Sd(t,n,$)}finally{f!==null&&v.types!==null&&(f.types=v.types),tt.T=f}}else try{f=i(u,l),lg(t,n,f)}catch($){Sd(t,n,$)}}function lg(t,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){og(t,n,l)},function(l){return Sd(t,n,l)}):og(t,n,i)}function og(t,n,i){n.status="fulfilled",n.value=i,cg(n),t.state=i,n=t.pending,n!==null&&(i=n.next,i===n?t.pending=null:(i=i.next,n.next=i,rg(t,i)))}function Sd(t,n,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,cg(n),n=n.next;while(n!==l)}t.action=null}function cg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function ug(t,n){return n}function dg(t,n){if(Wt){var i=Te.formState;if(i!==null){t:{var l=Gt;if(Wt){if(Ae){e:{for(var u=Ae,f=Xn;u.nodeType!==8;){if(!f){u=null;break e}if(u=$n(u.nextSibling),u===null){u=null;break e}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Ae=$n(u.nextSibling),l=u.data==="F!";break t}}Ai(l)}l=!1}l&&(n=i[0])}}return i=_n(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ug,lastRenderedState:n},i.queue=l,i=jg.bind(null,Gt,l),l.dispatch=i,l=Td(!1),f=jd.bind(null,Gt,!1,l.queue),l=_n(),u={state:n,dispatch:null,action:t,pending:null},l.queue=u,i=h_.bind(null,Gt,u,f,i),u.dispatch=i,l.memoizedState=t,[n,i,!1]}function hg(t){var n=ke();return fg(n,_e,t)}function fg(t,n,i){if(n=bd(t,n,ug)[0],t=cc(Ws)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Al(n)}catch(v){throw v===hr?Wo:v}else l=n;n=ke();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Gt.flags|=2048,yr(9,{destroy:void 0},f_.bind(null,u,i),null)),[l,f,t]}function f_(t,n){t.action=n}function mg(t){var n=ke(),i=_e;if(i!==null)return fg(n,i,t);ke(),n=n.memoizedState,i=ke();var l=i.queue.dispatch;return i.memoizedState=t,[n,l,!1]}function yr(t,n,i,l){return t={tag:t,create:i,deps:l,inst:n,next:null},n=Gt.updateQueue,n===null&&(n=lc(),Gt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,n.lastEffect=t),t}function gg(){return ke().memoizedState}function uc(t,n,i,l){var u=_n();Gt.flags|=t,u.memoizedState=yr(1|n,{destroy:void 0},i,l===void 0?null:l)}function dc(t,n,i,l){var u=ke();l=l===void 0?null:l;var f=u.memoizedState.inst;_e!==null&&l!==null&&gd(l,_e.memoizedState.deps)?u.memoizedState=yr(n,f,i,l):(Gt.flags|=t,u.memoizedState=yr(1|n,f,i,l))}function pg(t,n){uc(8390656,8,t,n)}function Ad(t,n){dc(2048,8,t,n)}function m_(t){Gt.flags|=4;var n=Gt.updateQueue;if(n===null)n=lc(),Gt.updateQueue=n,n.events=[t];else{var i=n.events;i===null?n.events=[t]:i.push(t)}}function yg(t){var n=ke().memoizedState;return m_({ref:n,nextImpl:t}),function(){if((oe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function xg(t,n){return dc(4,2,t,n)}function vg(t,n){return dc(4,4,t,n)}function _g(t,n){if(typeof n=="function"){t=t();var i=n(t);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function bg(t,n,i){i=i!=null?i.concat([t]):null,dc(4,4,_g.bind(null,n,t),i)}function wd(){}function Eg(t,n){var i=ke();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&gd(n,l[1])?l[0]:(i.memoizedState=[t,n],t)}function Tg(t,n){var i=ke();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&gd(n,l[1]))return l[0];if(l=t(),Ca){tn(!0);try{t()}finally{tn(!1)}}return i.memoizedState=[l,n],l}function Nd(t,n,i){return i===void 0||(Js&1073741824)!==0&&(Kt&261930)===0?t.memoizedState=n:(t.memoizedState=i,t=Sp(),Gt.lanes|=t,Vi|=t,i)}function Sg(t,n,i,l){return Dn(i,n)?i:mr.current!==null?(t=Nd(t,i,l),Dn(t,n)||(Fe=!0),t):(Js&42)===0||(Js&1073741824)!==0&&(Kt&261930)===0?(Fe=!0,t.memoizedState=i):(t=Sp(),Gt.lanes|=t,Vi|=t,n)}function Ag(t,n,i,l,u){var f=H.p;H.p=f!==0&&8>f?f:8;var v=tt.T,T={};tt.T=T,jd(t,!1,n,i);try{var O=u(),$=tt.S;if($!==null&&$(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var at=c_(O,l);wl(t,n,at,Un(t))}else wl(t,n,l,Un(t))}catch(ut){wl(t,n,{then:function(){},status:"rejected",reason:ut},Un())}finally{H.p=f,v!==null&&T.types!==null&&(v.types=T.types),tt.T=v}}function g_(){}function Rd(t,n,i,l){if(t.tag!==5)throw Error(r(476));var u=wg(t).queue;Ag(t,u,n,q,i===null?g_:function(){return Ng(t),i(l)})}function wg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:q},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:i},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Ng(t){var n=wg(t);n.next===null&&(n=t.alternate.memoizedState),wl(t,n.next.queue,{},Un())}function Cd(){return cn(Gl)}function Rg(){return ke().memoizedState}function Cg(){return ke().memoizedState}function p_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var i=Un();t=Ri(i);var l=Ci(n,t,i);l!==null&&(Nn(l,n,i),bl(l,n,i)),n={cache:id()},t.payload=n;return}n=n.return}}function y_(t,n,i){var l=Un();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},hc(t)?Ig(n,i):(i=Yu(t,n,i,l),i!==null&&(Nn(i,t,l),Dg(i,n,l)))}function jg(t,n,i){var l=Un();wl(t,n,i,l)}function wl(t,n,i,l){var u={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(hc(t))Ig(n,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,T=f(v,i);if(u.hasEagerState=!0,u.eagerState=T,Dn(T,v))return Qo(t,n,u,0),Te===null&&Fo(),!1}catch{}finally{}if(i=Yu(t,n,u,l),i!==null)return Nn(i,t,l),Dg(i,n,l),!0}return!1}function jd(t,n,i,l){if(l={lane:2,revertLane:oh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},hc(t)){if(n)throw Error(r(479))}else n=Yu(t,i,l,2),n!==null&&Nn(n,t,2)}function hc(t){var n=t.alternate;return t===Gt||n!==null&&n===Gt}function Ig(t,n){gr=ac=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function Dg(t,n,i){if((i&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Xr(t,i)}}var Nl={readContext:cn,use:oc,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me};Nl.useEffectEvent=Me;var Mg={readContext:cn,use:oc,useCallback:function(t,n){return _n().memoizedState=[t,n===void 0?null:n],t},useContext:cn,useEffect:pg,useImperativeHandle:function(t,n,i){i=i!=null?i.concat([t]):null,uc(4194308,4,_g.bind(null,n,t),i)},useLayoutEffect:function(t,n){return uc(4194308,4,t,n)},useInsertionEffect:function(t,n){uc(4,2,t,n)},useMemo:function(t,n){var i=_n();n=n===void 0?null:n;var l=t();if(Ca){tn(!0);try{t()}finally{tn(!1)}}return i.memoizedState=[l,n],l},useReducer:function(t,n,i){var l=_n();if(i!==void 0){var u=i(n);if(Ca){tn(!0);try{i(n)}finally{tn(!1)}}}else u=n;return l.memoizedState=l.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},l.queue=t,t=t.dispatch=y_.bind(null,Gt,t),[l.memoizedState,t]},useRef:function(t){var n=_n();return t={current:t},n.memoizedState=t},useState:function(t){t=Td(t);var n=t.queue,i=jg.bind(null,Gt,n);return n.dispatch=i,[t.memoizedState,i]},useDebugValue:wd,useDeferredValue:function(t,n){var i=_n();return Nd(i,t,n)},useTransition:function(){var t=Td(!1);return t=Ag.bind(null,Gt,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,i){var l=Gt,u=_n();if(Wt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),Te===null)throw Error(r(349));(Kt&127)!==0||tg(l,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,pg(ng.bind(null,l,f,t),[t]),l.flags|=2048,yr(9,{destroy:void 0},eg.bind(null,l,f,i,n),null),i},useId:function(){var t=_n(),n=Te.identifierPrefix;if(Wt){var i=Ms,l=Ds;i=(l&~(1<<32-Ot(l)-1)).toString(32)+i,n="_"+n+"R_"+i,i=rc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=u_++,n="_"+n+"r_"+i.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Cd,useFormState:dg,useActionState:dg,useOptimistic:function(t){var n=_n();n.memoizedState=n.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=jd.bind(null,Gt,!0,i),i.dispatch=n,[t,n]},useMemoCache:_d,useCacheRefresh:function(){return _n().memoizedState=p_.bind(null,Gt)},useEffectEvent:function(t){var n=_n(),i={impl:t};return n.memoizedState=i,function(){if((oe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},Id={readContext:cn,use:oc,useCallback:Eg,useContext:cn,useEffect:Ad,useImperativeHandle:bg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Tg,useReducer:cc,useRef:gg,useState:function(){return cc(Ws)},useDebugValue:wd,useDeferredValue:function(t,n){var i=ke();return Sg(i,_e.memoizedState,t,n)},useTransition:function(){var t=cc(Ws)[0],n=ke().memoizedState;return[typeof t=="boolean"?t:Al(t),n]},useSyncExternalStore:Wm,useId:Rg,useHostTransitionStatus:Cd,useFormState:hg,useActionState:hg,useOptimistic:function(t,n){var i=ke();return ag(i,_e,t,n)},useMemoCache:_d,useCacheRefresh:Cg};Id.useEffectEvent=yg;var Vg={readContext:cn,use:oc,useCallback:Eg,useContext:cn,useEffect:Ad,useImperativeHandle:bg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Tg,useReducer:Ed,useRef:gg,useState:function(){return Ed(Ws)},useDebugValue:wd,useDeferredValue:function(t,n){var i=ke();return _e===null?Nd(i,t,n):Sg(i,_e.memoizedState,t,n)},useTransition:function(){var t=Ed(Ws)[0],n=ke().memoizedState;return[typeof t=="boolean"?t:Al(t),n]},useSyncExternalStore:Wm,useId:Rg,useHostTransitionStatus:Cd,useFormState:mg,useActionState:mg,useOptimistic:function(t,n){var i=ke();return _e!==null?ag(i,_e,t,n):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:_d,useCacheRefresh:Cg};Vg.useEffectEvent=yg;function Dd(t,n,i,l){n=t.memoizedState,i=i(l,n),i=i==null?n:E({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Md={enqueueSetState:function(t,n,i){t=t._reactInternals;var l=Un(),u=Ri(l);u.payload=n,i!=null&&(u.callback=i),n=Ci(t,u,l),n!==null&&(Nn(n,t,l),bl(n,t,l))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var l=Un(),u=Ri(l);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Ci(t,u,l),n!==null&&(Nn(n,t,l),bl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Un(),l=Ri(i);l.tag=2,n!=null&&(l.callback=n),n=Ci(t,l,i),n!==null&&(Nn(n,t,i),bl(n,t,i))}};function Og(t,n,i,l,u,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):n.prototype&&n.prototype.isPureReactComponent?!fl(i,l)||!fl(u,f):!0}function zg(t,n,i,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==t&&Md.enqueueReplaceState(n,n.state,null)}function ja(t,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(t=t.defaultProps){i===n&&(i=E({},i));for(var u in t)i[u]===void 0&&(i[u]=t[u])}return i}function kg(t){Ho(t)}function Ug(t){console.error(t)}function Lg(t){Ho(t)}function fc(t,n){try{var i=t.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Bg(t,n,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Vd(t,n,i){return i=Ri(i),i.tag=3,i.payload={element:null},i.callback=function(){fc(t,n)},i}function Pg(t){return t=Ri(t),t.tag=3,t}function qg(t,n,i,l){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;t.payload=function(){return u(f)},t.callback=function(){Bg(n,i,l)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Bg(n,i,l),typeof u!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function x_(t,n,i,l,u){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&cr(n,i,u,!0),i=Vn.current,i!==null){switch(i.tag){case 31:case 13:return Kn===null?Ac():i.alternate===null&&Ve===0&&(Ve=3),i.flags&=-257,i.flags|=65536,i.lanes=u,l===tc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),ah(t,l,u)),!1;case 22:return i.flags|=65536,l===tc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),ah(t,l,u)),!1}throw Error(r(435,i.tag))}return ah(t,l,u),Ac(),!1}if(Wt)return n=Vn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,l!==Wu&&(t=Error(r(422),{cause:l}),pl(Fn(t,i)))):(l!==Wu&&(n=Error(r(423),{cause:l}),pl(Fn(n,i))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,l=Fn(l,i),u=Vd(t.stateNode,l,u),ud(t,u),Ve!==4&&(Ve=2)),!1;var f=Error(r(520),{cause:l});if(f=Fn(f,i),Ol===null?Ol=[f]:Ol.push(f),Ve!==4&&(Ve=2),n===null)return!0;l=Fn(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,t=u&-u,i.lanes|=t,t=Vd(i.stateNode,l,t),ud(i,t),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Oi===null||!Oi.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Pg(u),qg(u,t,i,l),ud(i,u),!1}i=i.return}while(i!==null);return!1}var Od=Error(r(461)),Fe=!1;function un(t,n,i,l){n.child=t===null?Qm(n,null,i,l):Ra(n,t.child,i,l)}function Gg(t,n,i,l,u){i=i.render;var f=n.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Sa(n),l=pd(t,n,i,v,f,u),T=yd(),t!==null&&!Fe?(xd(t,n,u),ti(t,n,u)):(Wt&&T&&Zu(n),n.flags|=1,un(t,n,l,u),n.child)}function Hg(t,n,i,l,u){if(t===null){var f=i.type;return typeof f=="function"&&!Xu(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,Fg(t,n,f,l,u)):(t=Xo(i.type,null,l,n,n.mode,u),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Gd(t,u)){var v=f.memoizedProps;if(i=i.compare,i=i!==null?i:fl,i(v,l)&&t.ref===n.ref)return ti(t,n,u)}return n.flags|=1,t=Xs(f,l),t.ref=n.ref,t.return=n,n.child=t}function Fg(t,n,i,l,u){if(t!==null){var f=t.memoizedProps;if(fl(f,l)&&t.ref===n.ref)if(Fe=!1,n.pendingProps=l=f,Gd(t,u))(t.flags&131072)!==0&&(Fe=!0);else return n.lanes=t.lanes,ti(t,n,u)}return zd(t,n,i,l,u)}function Qg(t,n,i,l){var u=l.children,f=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,t!==null){for(l=n.child=t.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~f}else l=0,n.child=null;return Yg(t,n,f,i,l)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Jo(n,f!==null?f.cachePool:null),f!==null?Km(n,f):hd(),$m(n);else return l=n.lanes=536870912,Yg(t,n,f!==null?f.baseLanes|i:i,i,l)}else f!==null?(Jo(n,f.cachePool),Km(n,f),Ii(),n.memoizedState=null):(t!==null&&Jo(n,null),hd(),Ii());return un(t,n,u,i),n.child}function Rl(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Yg(t,n,i,l,u){var f=rd();return f=f===null?null:{parent:Ge._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},t!==null&&Jo(n,null),hd(),$m(n),t!==null&&cr(t,n,l,!0),n.childLanes=u,null}function mc(t,n){return n=pc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Xg(t,n,i){return Ra(n,t.child,null,i),t=mc(n,n.pendingProps),t.flags|=2,On(n),n.memoizedState=null,t}function v_(t,n,i){var l=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Wt){if(l.mode==="hidden")return t=mc(n,l),n.lanes=536870912,Rl(null,t);if(md(n),(t=Ae)?(t=ry(t,Xn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ti!==null?{id:Ds,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},i=Im(t),i.return=n,n.child=i,on=n,Ae=null)):t=null,t===null)throw Ai(n);return n.lanes=536870912,null}return mc(n,l)}var f=t.memoizedState;if(f!==null){var v=f.dehydrated;if(md(n),u)if(n.flags&256)n.flags&=-257,n=Xg(t,n,i);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Fe||cr(t,n,i,!1),u=(i&t.childLanes)!==0,Fe||u){if(l=Te,l!==null&&(v=Kr(l,i),v!==0&&v!==f.retryLane))throw f.retryLane=v,_a(t,v),Nn(l,t,v),Od;Ac(),n=Xg(t,n,i)}else t=f.treeContext,Ae=$n(v.nextSibling),on=n,Wt=!0,Si=null,Xn=!1,t!==null&&Vm(n,t),n=mc(n,l),n.flags|=4096;return n}return t=Xs(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function gc(t,n){var i=n.ref;if(i===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(n.flags|=4194816)}}function zd(t,n,i,l,u){return Sa(n),i=pd(t,n,i,l,void 0,u),l=yd(),t!==null&&!Fe?(xd(t,n,u),ti(t,n,u)):(Wt&&l&&Zu(n),n.flags|=1,un(t,n,i,u),n.child)}function Kg(t,n,i,l,u,f){return Sa(n),n.updateQueue=null,i=Jm(n,l,i,u),Zm(t),l=yd(),t!==null&&!Fe?(xd(t,n,f),ti(t,n,f)):(Wt&&l&&Zu(n),n.flags|=1,un(t,n,i,f),n.child)}function $g(t,n,i,l,u){if(Sa(n),n.stateNode===null){var f=ar,v=i.contextType;typeof v=="object"&&v!==null&&(f=cn(v)),f=new i(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Md,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},od(n),v=i.contextType,f.context=typeof v=="object"&&v!==null?cn(v):ar,f.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Dd(n,i,v,l),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Md.enqueueReplaceState(f,f.state,null),Tl(n,l,f,u),El(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var T=n.memoizedProps,O=ja(i,T);f.props=O;var $=f.context,at=i.contextType;v=ar,typeof at=="object"&&at!==null&&(v=cn(at));var ut=i.getDerivedStateFromProps;at=typeof ut=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,at||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||$!==v)&&zg(n,f,l,v),Ni=!1;var W=n.memoizedState;f.state=W,Tl(n,l,f,u),El(),$=n.memoizedState,T||W!==$||Ni?(typeof ut=="function"&&(Dd(n,i,ut,l),$=n.memoizedState),(O=Ni||Og(n,i,O,l,W,$,v))?(at||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=$),f.props=l,f.state=$,f.context=v,l=O):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,cd(t,n),v=n.memoizedProps,at=ja(i,v),f.props=at,ut=n.pendingProps,W=f.context,$=i.contextType,O=ar,typeof $=="object"&&$!==null&&(O=cn($)),T=i.getDerivedStateFromProps,($=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ut||W!==O)&&zg(n,f,l,O),Ni=!1,W=n.memoizedState,f.state=W,Tl(n,l,f,u),El();var nt=n.memoizedState;v!==ut||W!==nt||Ni||t!==null&&t.dependencies!==null&&$o(t.dependencies)?(typeof T=="function"&&(Dd(n,i,T,l),nt=n.memoizedState),(at=Ni||Og(n,i,at,l,W,nt,O)||t!==null&&t.dependencies!==null&&$o(t.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,nt,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,nt,O)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=nt),f.props=l,f.state=nt,f.context=O,l=at):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,gc(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=Ra(n,t.child,null,u),n.child=Ra(n,null,i,u)):un(t,n,i,u),n.memoizedState=f.state,t=n.child):t=ti(t,n,u),t}function Zg(t,n,i,l){return Ea(),n.flags|=256,un(t,n,i,l),n.child}var kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(t){return{baseLanes:t,cachePool:Bm()}}function Ld(t,n,i){return t=t!==null?t.childLanes&~i:0,n&&(t|=kn),t}function Jg(t,n,i){var l=n.pendingProps,u=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),v&&(u=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(Wt){if(u?ji(n):Ii(),(t=Ae)?(t=ry(t,Xn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ti!==null?{id:Ds,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},i=Im(t),i.return=n,n.child=i,on=n,Ae=null)):t=null,t===null)throw Ai(n);return bh(t)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,u?(Ii(),u=n.mode,T=pc({mode:"hidden",children:T},u),l=ba(l,u,i,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Ud(i),l.childLanes=Ld(t,v,i),n.memoizedState=kd,Rl(null,l)):(ji(n),Bd(n,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(f)n.flags&256?(ji(n),n.flags&=-257,n=Pd(t,n,i)):n.memoizedState!==null?(Ii(),n.child=t.child,n.flags|=128,n=null):(Ii(),T=l.fallback,u=n.mode,l=pc({mode:"visible",children:l.children},u),T=ba(T,u,i,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,Ra(n,t.child,null,i),l=n.child,l.memoizedState=Ud(i),l.childLanes=Ld(t,v,i),n.memoizedState=kd,n=Rl(null,l));else if(ji(n),bh(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var $=v.dgst;v=$,l=Error(r(419)),l.stack="",l.digest=v,pl({value:l,source:null,stack:null}),n=Pd(t,n,i)}else if(Fe||cr(t,n,i,!1),v=(i&t.childLanes)!==0,Fe||v){if(v=Te,v!==null&&(l=Kr(v,i),l!==0&&l!==O.retryLane))throw O.retryLane=l,_a(t,l),Nn(v,t,l),Od;_h(T)||Ac(),n=Pd(t,n,i)}else _h(T)?(n.flags|=192,n.child=t.child,n=null):(t=O.treeContext,Ae=$n(T.nextSibling),on=n,Wt=!0,Si=null,Xn=!1,t!==null&&Vm(n,t),n=Bd(n,l.children),n.flags|=4096);return n}return u?(Ii(),T=l.fallback,u=n.mode,O=t.child,$=O.sibling,l=Xs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,$!==null?T=Xs($,T):(T=ba(T,u,i,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,Rl(null,l),l=n.child,T=t.child.memoizedState,T===null?T=Ud(i):(u=T.cachePool,u!==null?(O=Ge._currentValue,u=u.parent!==O?{parent:O,pool:O}:u):u=Bm(),T={baseLanes:T.baseLanes|i,cachePool:u}),l.memoizedState=T,l.childLanes=Ld(t,v,i),n.memoizedState=kd,Rl(t.child,l)):(ji(n),i=t.child,t=i.sibling,i=Xs(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=i,n.memoizedState=null,i)}function Bd(t,n){return n=pc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function pc(t,n){return t=Mn(22,t,null,n),t.lanes=0,t}function Pd(t,n,i){return Ra(n,t.child,null,i),t=Bd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Wg(t,n,i){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),nd(t.return,n,i)}function qd(t,n,i,l,u,f){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u,treeForkCount:f}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=i,v.tailMode=u,v.treeForkCount=f)}function tp(t,n,i){var l=n.pendingProps,u=l.revealOrder,f=l.tail;l=l.children;var v=ze.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,k(ze,v),un(t,n,l,i),l=Wt?gl:0,!T&&t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wg(t,i,n);else if(t.tag===19)Wg(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(i=n.child,u=null;i!==null;)t=i.alternate,t!==null&&ic(t)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),qd(n,!1,u,i,f,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(t=u.alternate,t!==null&&ic(t)===null){n.child=u;break}t=u.sibling,u.sibling=i,i=u,u=t}qd(n,!0,i,null,f,l);break;case"together":qd(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function ti(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Vi|=n.lanes,(i&n.childLanes)===0)if(t!==null){if(cr(t,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,i=Xs(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Xs(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Gd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&$o(t)))}function __(t,n,i){switch(n.tag){case 3:Nt(n,n.stateNode.containerInfo),wi(n,Ge,t.memoizedState.cache),Ea();break;case 27:case 5:Ut(n);break;case 4:Nt(n,n.stateNode.containerInfo);break;case 10:wi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,md(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ji(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Jg(t,n,i):(ji(n),t=ti(t,n,i),t!==null?t.sibling:null);ji(n);break;case 19:var u=(t.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(cr(t,n,i,!1),l=(i&n.childLanes)!==0),u){if(l)return tp(t,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),k(ze,ze.current),l)break;return null;case 22:return n.lanes=0,Qg(t,n,i,n.pendingProps);case 24:wi(n,Ge,t.memoizedState.cache)}return ti(t,n,i)}function ep(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps)Fe=!0;else{if(!Gd(t,i)&&(n.flags&128)===0)return Fe=!1,__(t,n,i);Fe=(t.flags&131072)!==0}else Fe=!1,Wt&&(n.flags&1048576)!==0&&Mm(n,gl,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(t=wa(n.elementType),n.type=t,typeof t=="function")Xu(t)?(l=ja(t,l),n.tag=1,n=$g(null,n,t,l,i)):(n.tag=0,n=zd(null,n,t,l,i));else{if(t!=null){var u=t.$$typeof;if(u===rt){n.tag=11,n=Gg(null,n,t,l,i);break t}else if(u===A){n.tag=14,n=Hg(null,n,t,l,i);break t}}throw n=wt(t)||t,Error(r(306,n,""))}}return n;case 0:return zd(t,n,n.type,n.pendingProps,i);case 1:return l=n.type,u=ja(l,n.pendingProps),$g(t,n,l,u,i);case 3:t:{if(Nt(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;u=f.element,cd(t,n),Tl(n,l,null,i);var v=n.memoizedState;if(l=v.cache,wi(n,Ge,l),l!==f.cache&&sd(n,[Ge],i,!0),El(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Zg(t,n,l,i);break t}else if(l!==u){u=Fn(Error(r(424)),n),pl(u),n=Zg(t,n,l,i);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ae=$n(t.firstChild),on=n,Wt=!0,Si=null,Xn=!0,i=Qm(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ea(),l===u){n=ti(t,n,i);break t}un(t,n,l,i)}n=n.child}return n;case 26:return gc(t,n),t===null?(i=hy(n.type,null,n.pendingProps,null))?n.memoizedState=i:Wt||(i=n.type,t=n.pendingProps,l=Dc(st.current).createElement(i),l[Be]=n,l[nn]=t,dn(l,i,t),Pe(l),n.stateNode=l):n.memoizedState=hy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Ut(n),t===null&&Wt&&(l=n.stateNode=cy(n.type,n.pendingProps,st.current),on=n,Xn=!0,u=Ae,Li(n.type)?(Eh=u,Ae=$n(l.firstChild)):Ae=u),un(t,n,n.pendingProps.children,i),gc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Wt&&((u=l=Ae)&&(l=$_(l,n.type,n.pendingProps,Xn),l!==null?(n.stateNode=l,on=n,Ae=$n(l.firstChild),Xn=!1,u=!0):u=!1),u||Ai(n)),Ut(n),u=n.type,f=n.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,yh(u,f)?l=null:v!==null&&yh(u,v)&&(n.flags|=32),n.memoizedState!==null&&(u=pd(t,n,d_,null,null,i),Gl._currentValue=u),gc(t,n),un(t,n,l,i),n.child;case 6:return t===null&&Wt&&((t=i=Ae)&&(i=Z_(i,n.pendingProps,Xn),i!==null?(n.stateNode=i,on=n,Ae=null,t=!0):t=!1),t||Ai(n)),null;case 13:return Jg(t,n,i);case 4:return Nt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Ra(n,null,l,i):un(t,n,l,i),n.child;case 11:return Gg(t,n,n.type,n.pendingProps,i);case 7:return un(t,n,n.pendingProps,i),n.child;case 8:return un(t,n,n.pendingProps.children,i),n.child;case 12:return un(t,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,wi(n,n.type,l.value),un(t,n,l.children,i),n.child;case 9:return u=n.type._context,l=n.pendingProps.children,Sa(n),u=cn(u),l=l(u),n.flags|=1,un(t,n,l,i),n.child;case 14:return Hg(t,n,n.type,n.pendingProps,i);case 15:return Fg(t,n,n.type,n.pendingProps,i);case 19:return tp(t,n,i);case 31:return v_(t,n,i);case 22:return Qg(t,n,i,n.pendingProps);case 24:return Sa(n),l=cn(Ge),t===null?(u=rd(),u===null&&(u=Te,f=id(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:l,cache:u},od(n),wi(n,Ge,u)):((t.lanes&i)!==0&&(cd(t,n),Tl(n,null,null,i),El()),u=t.memoizedState,f=n.memoizedState,u.parent!==l?(u={parent:l,cache:l},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),wi(n,Ge,l)):(l=f.cache,wi(n,Ge,l),l!==u.cache&&sd(n,[Ge],i,!0))),un(t,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ei(t){t.flags|=4}function Hd(t,n,i,l,u){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(Rp())t.flags|=8192;else throw Na=tc,ld}else t.flags&=-16777217}function np(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yy(n))if(Rp())t.flags|=8192;else throw Na=tc,ld}function yc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?To():536870912,t.lanes|=n,br|=n)}function Cl(t,n){if(!Wt)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function we(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(n)for(var u=t.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=l,t.childLanes=i,n}function b_(t,n,i){var l=n.pendingProps;switch(Ju(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(n),null;case 1:return we(n),null;case 3:return i=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Zs(Ge),At(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(or(n)?ei(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,td())),we(n),null;case 26:var u=n.type,f=n.memoizedState;return t===null?(ei(n),f!==null?(we(n),np(n,f)):(we(n),Hd(n,u,null,l,i))):f?f!==t.memoizedState?(ei(n),we(n),np(n,f)):(we(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&ei(n),we(n),Hd(n,u,t,l,i)),null;case 27:if(re(n),i=st.current,u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ei(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return we(n),null}t=P.current,or(n)?Om(n):(t=cy(u,l,i),n.stateNode=t,ei(n))}return we(n),null;case 5:if(re(n),u=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ei(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return we(n),null}if(f=P.current,or(n))Om(n);else{var v=Dc(st.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?v.createElement(u,{is:l.is}):v.createElement(u)}}f[Be]=n,f[nn]=l;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=f;t:switch(dn(f,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&ei(n)}}return we(n),Hd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,i),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&ei(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=st.current,or(n)){if(t=n.stateNode,i=n.memoizedProps,l=null,u=on,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}t[Be]=n,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Jp(t.nodeValue,i)),t||Ai(n,!0)}else t=Dc(t).createTextNode(l),t[Be]=n,n.stateNode=t}return we(n),null;case 31:if(i=n.memoizedState,t===null||t.memoizedState!==null){if(l=or(n),i!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Be]=n}else Ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;we(n),t=!1}else i=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return n.flags&256?(On(n),n):(On(n),null);if((n.flags&128)!==0)throw Error(r(558))}return we(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=or(n),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[Be]=n}else Ea(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;we(n),u=!1}else u=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(On(n),n):(On(n),null)}return On(n),(n.flags&128)!==0?(n.lanes=i,n):(i=l!==null,t=t!==null&&t.memoizedState!==null,i&&(l=n.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)),i!==t&&i&&(n.child.flags|=8192),yc(n,n.updateQueue),we(n),null);case 4:return At(),t===null&&hh(n.stateNode.containerInfo),we(n),null;case 10:return Zs(n.type),we(n),null;case 19:if(j(ze),l=n.memoizedState,l===null)return we(n),null;if(u=(n.flags&128)!==0,f=l.rendering,f===null)if(u)Cl(l,!1);else{if(Ve!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=ic(t),f!==null){for(n.flags|=128,Cl(l,!1),t=f.updateQueue,n.updateQueue=t,yc(n,t),n.subtreeFlags=0,t=i,i=n.child;i!==null;)jm(i,t),i=i.sibling;return k(ze,ze.current&1|2),Wt&&Ks(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&We()>Ec&&(n.flags|=128,u=!0,Cl(l,!1),n.lanes=4194304)}else{if(!u)if(t=ic(f),t!==null){if(n.flags|=128,u=!0,t=t.updateQueue,n.updateQueue=t,yc(n,t),Cl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Wt)return we(n),null}else 2*We()-l.renderingStartTime>Ec&&i!==536870912&&(n.flags|=128,u=!0,Cl(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(t=l.last,t!==null?t.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=We(),t.sibling=null,i=ze.current,k(ze,u?i&1|2:i&1),Wt&&Ks(n,l.treeForkCount),t):(we(n),null);case 22:case 23:return On(n),fd(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(we(n),n.subtreeFlags&6&&(n.flags|=8192)):we(n),i=n.updateQueue,i!==null&&yc(n,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),t!==null&&j(Aa),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Zs(Ge),we(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function E_(t,n){switch(Ju(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Zs(Ge),At(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return re(n),null;case 31:if(n.memoizedState!==null){if(On(n),n.alternate===null)throw Error(r(340));Ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(On(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Ea()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return j(ze),null;case 4:return At(),null;case 10:return Zs(n.type),null;case 22:case 23:return On(n),fd(),t!==null&&j(Aa),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Zs(Ge),null;case 25:return null;default:return null}}function sp(t,n){switch(Ju(n),n.tag){case 3:Zs(Ge),At();break;case 26:case 27:case 5:re(n);break;case 4:At();break;case 31:n.memoizedState!==null&&On(n);break;case 13:On(n);break;case 19:j(ze);break;case 10:Zs(n.type);break;case 22:case 23:On(n),fd(),t!==null&&j(Aa);break;case 24:Zs(Ge)}}function jl(t,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var u=l.next;i=u;do{if((i.tag&t)===t){l=void 0;var f=i.create,v=i.inst;l=f(),v.destroy=l}i=i.next}while(i!==u)}}catch(T){pe(n,n.return,T)}}function Di(t,n,i){try{var l=n.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,u=n;var O=i,$=T;try{$()}catch(at){pe(u,O,at)}}}l=l.next}while(l!==f)}}catch(at){pe(n,n.return,at)}}function ip(t){var n=t.updateQueue;if(n!==null){var i=t.stateNode;try{Xm(n,i)}catch(l){pe(t,t.return,l)}}}function ap(t,n,i){i.props=ja(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){pe(t,n,l)}}function Il(t,n){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof i=="function"?t.refCleanup=i(l):i.current=l}}catch(u){pe(t,n,u)}}function Vs(t,n){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(u){pe(t,n,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){pe(t,n,u)}else i.current=null}function rp(t){var n=t.type,i=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break t;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(u){pe(t,t.return,u)}}function Fd(t,n,i){try{var l=t.stateNode;H_(l,t.type,i,n),l[nn]=n}catch(u){pe(t,t.return,u)}}function lp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Li(t.type)||t.tag===4}function Qd(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||lp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Li(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(t),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=is));else if(l!==4&&(l===27&&Li(t.type)&&(i=t.stateNode,n=null),t=t.child,t!==null))for(Yd(t,n,i),t=t.sibling;t!==null;)Yd(t,n,i),t=t.sibling}function xc(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(l!==4&&(l===27&&Li(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(xc(t,n,i),t=t.sibling;t!==null;)xc(t,n,i),t=t.sibling}function op(t){var n=t.stateNode,i=t.memoizedProps;try{for(var l=t.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);dn(n,l,i),n[Be]=t,n[nn]=i}catch(f){pe(t,t.return,f)}}var ni=!1,Qe=!1,Xd=!1,cp=typeof WeakSet=="function"?WeakSet:Set,an=null;function T_(t,n){if(t=t.containerInfo,gh=Lc,t=bm(t),Pu(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break t}var v=0,T=-1,O=-1,$=0,at=0,ut=t,W=null;e:for(;;){for(var nt;ut!==i||u!==0&&ut.nodeType!==3||(T=v+u),ut!==f||l!==0&&ut.nodeType!==3||(O=v+l),ut.nodeType===3&&(v+=ut.nodeValue.length),(nt=ut.firstChild)!==null;)W=ut,ut=nt;for(;;){if(ut===t)break e;if(W===i&&++$===u&&(T=v),W===f&&++at===l&&(O=v),(nt=ut.nextSibling)!==null)break;ut=W,W=ut.parentNode}ut=nt}i=T===-1||O===-1?null:{start:T,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(ph={focusedElem:t,selectionRange:i},Lc=!1,an=n;an!==null;)if(n=an,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,an=t;else for(;an!==null;){switch(n=an,f=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)u=t[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,l=i.stateNode;try{var Et=ja(i.type,u);t=l.getSnapshotBeforeUpdate(Et,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(It){pe(i,i.return,It)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,i=t.nodeType,i===9)vh(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,an=t;break}an=n.return}}function up(t,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ii(t,i),l&4&&jl(5,i);break;case 1:if(ii(t,i),l&4)if(t=i.stateNode,n===null)try{t.componentDidMount()}catch(v){pe(i,i.return,v)}else{var u=ja(i.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(u,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){pe(i,i.return,v)}}l&64&&ip(i),l&512&&Il(i,i.return);break;case 3:if(ii(t,i),l&64&&(t=i.updateQueue,t!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Xm(t,n)}catch(v){pe(i,i.return,v)}}break;case 27:n===null&&l&4&&op(i);case 26:case 5:ii(t,i),n===null&&l&4&&rp(i),l&512&&Il(i,i.return);break;case 12:ii(t,i);break;case 31:ii(t,i),l&4&&fp(t,i);break;case 13:ii(t,i),l&4&&mp(t,i),l&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=D_.bind(null,i),J_(t,i))));break;case 22:if(l=i.memoizedState!==null||ni,!l){n=n!==null&&n.memoizedState!==null||Qe,u=ni;var f=Qe;ni=l,(Qe=n)&&!f?ai(t,i,(i.subtreeFlags&8772)!==0):ii(t,i),ni=u,Qe=f}break;case 30:break;default:ii(t,i)}}function dp(t){var n=t.alternate;n!==null&&(t.alternate=null,dp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Fa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ce=null,Tn=!1;function si(t,n,i){for(i=i.child;i!==null;)hp(t,n,i),i=i.sibling}function hp(t,n,i){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(Rt,i)}catch{}switch(i.tag){case 26:Qe||Vs(i,n),si(t,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Qe||Vs(i,n);var l=Ce,u=Tn;Li(i.type)&&(Ce=i.stateNode,Tn=!1),si(t,n,i),Bl(i.stateNode),Ce=l,Tn=u;break;case 5:Qe||Vs(i,n);case 6:if(l=Ce,u=Tn,Ce=null,si(t,n,i),Ce=l,Tn=u,Ce!==null)if(Tn)try{(Ce.nodeType===9?Ce.body:Ce.nodeName==="HTML"?Ce.ownerDocument.body:Ce).removeChild(i.stateNode)}catch(f){pe(i,n,f)}else try{Ce.removeChild(i.stateNode)}catch(f){pe(i,n,f)}break;case 18:Ce!==null&&(Tn?(t=Ce,iy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Cr(t)):iy(Ce,i.stateNode));break;case 4:l=Ce,u=Tn,Ce=i.stateNode.containerInfo,Tn=!0,si(t,n,i),Ce=l,Tn=u;break;case 0:case 11:case 14:case 15:Di(2,i,n),Qe||Di(4,i,n),si(t,n,i);break;case 1:Qe||(Vs(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&ap(i,n,l)),si(t,n,i);break;case 21:si(t,n,i);break;case 22:Qe=(l=Qe)||i.memoizedState!==null,si(t,n,i),Qe=l;break;default:si(t,n,i)}}function fp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Cr(t)}catch(i){pe(n,n.return,i)}}}function mp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Cr(t)}catch(i){pe(n,n.return,i)}}function S_(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new cp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new cp),n;default:throw Error(r(435,t.tag))}}function vc(t,n){var i=S_(t);n.forEach(function(l){if(!i.has(l)){i.add(l);var u=M_.bind(null,t,l);l.then(u,u)}})}function Sn(t,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l],f=t,v=n,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(Li(T.type)){Ce=T.stateNode,Tn=!1;break t}break;case 5:Ce=T.stateNode,Tn=!1;break t;case 3:case 4:Ce=T.stateNode.containerInfo,Tn=!0;break t}T=T.return}if(Ce===null)throw Error(r(160));hp(f,v,u),Ce=null,Tn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)gp(n,t),n=n.sibling}var us=null;function gp(t,n){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(n,t),An(t),l&4&&(Di(3,t,t.return),jl(3,t),Di(5,t,t.return));break;case 1:Sn(n,t),An(t),l&512&&(Qe||i===null||Vs(i,i.return)),l&64&&ni&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var u=us;if(Sn(n,t),An(t),l&512&&(Qe||i===null||Vs(i,i.return)),l&4){var f=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){t:{l=t.type,i=t.memoizedProps,u=u.ownerDocument||u;e:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[_s]||f[Be]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),dn(f,l,i),f[Be]=t,Pe(f),l=f;break t;case"link":var v=gy("link","href",u).get(l+(i.href||""));if(v){for(var T=0;T<v.length;T++)if(f=v[T],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(T,1);break e}}f=u.createElement(l),dn(f,l,i),u.head.appendChild(f);break;case"meta":if(v=gy("meta","content",u).get(l+(i.content||""))){for(T=0;T<v.length;T++)if(f=v[T],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(T,1);break e}}f=u.createElement(l),dn(f,l,i),u.head.appendChild(f);break;default:throw Error(r(468,l))}f[Be]=t,Pe(f),l=f}t.stateNode=l}else py(u,t.type,t.stateNode);else t.stateNode=my(u,l,t.memoizedProps);else f!==l?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,l===null?py(u,t.type,t.stateNode):my(u,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fd(t,t.memoizedProps,i.memoizedProps)}break;case 27:Sn(n,t),An(t),l&512&&(Qe||i===null||Vs(i,i.return)),i!==null&&l&4&&Fd(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Sn(n,t),An(t),l&512&&(Qe||i===null||Vs(i,i.return)),t.flags&32){u=t.stateNode;try{En(u,"")}catch(Et){pe(t,t.return,Et)}}l&4&&t.stateNode!=null&&(u=t.memoizedProps,Fd(t,u,i!==null?i.memoizedProps:u)),l&1024&&(Xd=!0);break;case 6:if(Sn(n,t),An(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(Et){pe(t,t.return,Et)}}break;case 3:if(Oc=null,u=us,us=Mc(n.containerInfo),Sn(n,t),us=u,An(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Cr(n.containerInfo)}catch(Et){pe(t,t.return,Et)}Xd&&(Xd=!1,pp(t));break;case 4:l=us,us=Mc(t.stateNode.containerInfo),Sn(n,t),An(t),us=l;break;case 12:Sn(n,t),An(t);break;case 31:Sn(n,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vc(t,l)));break;case 13:Sn(n,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(bc=We()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vc(t,l)));break;case 22:u=t.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,$=ni,at=Qe;if(ni=$||u,Qe=at||O,Sn(n,t),Qe=at,ni=$,An(t),l&8192)t:for(n=t.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||O||ni||Qe||Ia(t)),i=null,n=t;;){if(n.tag===5||n.tag===26){if(i===null){O=i=n;try{if(f=O.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=O.stateNode;var ut=O.memoizedProps.style,W=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;T.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Et){pe(O,O.return,Et)}}}else if(n.tag===6){if(i===null){O=n;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(Et){pe(O,O.return,Et)}}}else if(n.tag===18){if(i===null){O=n;try{var nt=O.stateNode;u?ay(nt,!0):ay(O.stateNode,!1)}catch(Et){pe(O,O.return,Et)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,vc(t,i))));break;case 19:Sn(n,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,vc(t,l)));break;case 30:break;case 21:break;default:Sn(n,t),An(t)}}function An(t){var n=t.flags;if(n&2){try{for(var i,l=t.return;l!==null;){if(lp(l)){i=l;break}l=l.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var u=i.stateNode,f=Qd(t);xc(t,f,u);break;case 5:var v=i.stateNode;i.flags&32&&(En(v,""),i.flags&=-33);var T=Qd(t);xc(t,T,v);break;case 3:case 4:var O=i.stateNode.containerInfo,$=Qd(t);Yd(t,$,O);break;default:throw Error(r(161))}}catch(at){pe(t,t.return,at)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function pp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;pp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ii(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)up(t,n.alternate,n),n=n.sibling}function Ia(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Di(4,n,n.return),Ia(n);break;case 1:Vs(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&ap(n,n.return,i),Ia(n);break;case 27:Bl(n.stateNode);case 26:case 5:Vs(n,n.return),Ia(n);break;case 22:n.memoizedState===null&&Ia(n);break;case 30:Ia(n);break;default:Ia(n)}t=t.sibling}}function ai(t,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,u=t,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:ai(u,f,i),jl(4,f);break;case 1:if(ai(u,f,i),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch($){pe(l,l.return,$)}if(l=f,u=l.updateQueue,u!==null){var T=l.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)Ym(O[u],T)}catch($){pe(l,l.return,$)}}i&&v&64&&ip(f),Il(f,f.return);break;case 27:op(f);case 26:case 5:ai(u,f,i),i&&l===null&&v&4&&rp(f),Il(f,f.return);break;case 12:ai(u,f,i);break;case 31:ai(u,f,i),i&&v&4&&fp(u,f);break;case 13:ai(u,f,i),i&&v&4&&mp(u,f);break;case 22:f.memoizedState===null&&ai(u,f,i),Il(f,f.return);break;case 30:break;default:ai(u,f,i)}n=n.sibling}}function Kd(t,n){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&yl(i))}function $d(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&yl(t))}function ds(t,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yp(t,n,i,l),n=n.sibling}function yp(t,n,i,l){var u=n.flags;switch(n.tag){case 0:case 11:case 15:ds(t,n,i,l),u&2048&&jl(9,n);break;case 1:ds(t,n,i,l);break;case 3:ds(t,n,i,l),u&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&yl(t)));break;case 12:if(u&2048){ds(t,n,i,l),t=n.stateNode;try{var f=n.memoizedProps,v=f.id,T=f.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){pe(n,n.return,O)}}else ds(t,n,i,l);break;case 31:ds(t,n,i,l);break;case 13:ds(t,n,i,l);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?ds(t,n,i,l):Dl(t,n):f._visibility&2?ds(t,n,i,l):(f._visibility|=2,xr(t,n,i,l,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Kd(v,n);break;case 24:ds(t,n,i,l),u&2048&&$d(n.alternate,n);break;default:ds(t,n,i,l)}}function xr(t,n,i,l,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=t,v=n,T=i,O=l,$=v.flags;switch(v.tag){case 0:case 11:case 15:xr(f,v,T,O,u),jl(8,v);break;case 23:break;case 22:var at=v.stateNode;v.memoizedState!==null?at._visibility&2?xr(f,v,T,O,u):Dl(f,v):(at._visibility|=2,xr(f,v,T,O,u)),u&&$&2048&&Kd(v.alternate,v);break;case 24:xr(f,v,T,O,u),u&&$&2048&&$d(v.alternate,v);break;default:xr(f,v,T,O,u)}n=n.sibling}}function Dl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=t,l=n,u=l.flags;switch(l.tag){case 22:Dl(i,l),u&2048&&Kd(l.alternate,l);break;case 24:Dl(i,l),u&2048&&$d(l.alternate,l);break;default:Dl(i,l)}n=n.sibling}}var Ml=8192;function vr(t,n,i){if(t.subtreeFlags&Ml)for(t=t.child;t!==null;)xp(t,n,i),t=t.sibling}function xp(t,n,i){switch(t.tag){case 26:vr(t,n,i),t.flags&Ml&&t.memoizedState!==null&&ub(i,us,t.memoizedState,t.memoizedProps);break;case 5:vr(t,n,i);break;case 3:case 4:var l=us;us=Mc(t.stateNode.containerInfo),vr(t,n,i),us=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ml,Ml=16777216,vr(t,n,i),Ml=l):vr(t,n,i));break;default:vr(t,n,i)}}function vp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Vl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];an=l,bp(l,t)}vp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_p(t),t=t.sibling}function _p(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&Di(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,_c(t)):Vl(t);break;default:Vl(t)}}function _c(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];an=l,bp(l,t)}vp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Di(8,n,n.return),_c(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,_c(n));break;default:_c(n)}t=t.sibling}}function bp(t,n){for(;an!==null;){var i=an;switch(i.tag){case 0:case 11:case 15:Di(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,an=l;else t:for(i=t;an!==null;){l=an;var u=l.sibling,f=l.return;if(dp(l),l===i){an=null;break t}if(u!==null){u.return=f,an=u;break t}an=f}}}var A_={getCacheForType:function(t){var n=cn(Ge),i=n.data.get(t);return i===void 0&&(i=t(),n.data.set(t,i)),i},cacheSignal:function(){return cn(Ge).controller.signal}},w_=typeof WeakMap=="function"?WeakMap:Map,oe=0,Te=null,Yt=null,Kt=0,ge=0,zn=null,Mi=!1,_r=!1,Zd=!1,ri=0,Ve=0,Vi=0,Da=0,Jd=0,kn=0,br=0,Ol=null,wn=null,Wd=!1,bc=0,Ep=0,Ec=1/0,Tc=null,Oi=null,Ze=0,zi=null,Er=null,li=0,th=0,eh=null,Tp=null,zl=0,nh=null;function Un(){return(oe&2)!==0&&Kt!==0?Kt&-Kt:tt.T!==null?oh():So()}function Sp(){if(kn===0)if((Kt&536870912)===0||Wt){var t=aa;aa<<=1,(aa&3932160)===0&&(aa=262144),kn=t}else kn=536870912;return t=Vn.current,t!==null&&(t.flags|=32),kn}function Nn(t,n,i){(t===Te&&(ge===2||ge===9)||t.cancelPendingCommit!==null)&&(Tr(t,0),ki(t,Kt,kn,!1)),ra(t,i),((oe&2)===0||t!==Te)&&(t===Te&&((oe&2)===0&&(Da|=i),Ve===4&&ki(t,Kt,kn,!1)),Os(t))}function Ap(t,n,i){if((oe&6)!==0)throw Error(r(327));var l=!i&&(n&127)===0&&(n&t.expiredLanes)===0||es(t,n),u=l?C_(t,n):ih(t,n,!0),f=l;do{if(u===0){_r&&!l&&ki(t,n,0,!1);break}else{if(i=t.current.alternate,f&&!N_(i)){u=ih(t,n,!1),f=!1;continue}if(u===2){if(f=n,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var T=t;u=Ol;var O=T.current.memoizedState.isDehydrated;if(O&&(Tr(T,v).flags|=256),v=ih(T,v,!1),v!==2){if(Zd&&!O){T.errorRecoveryDisabledLanes|=f,Da|=f,u=4;break t}f=wn,wn=u,f!==null&&(wn===null?wn=f:wn.push.apply(wn,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){Tr(t,0),ki(t,n,0,!0);break}t:{switch(l=t,f=u,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ki(l,n,kn,!Mi);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=bc+300-We(),10<u)){if(ki(l,n,kn,!Mi),ys(l,0,!0)!==0)break t;li=n,l.timeoutHandle=ny(wp.bind(null,l,i,wn,Tc,Wd,n,kn,Da,br,Mi,f,"Throttled",-0,0),u);break t}wp(l,i,wn,Tc,Wd,n,kn,Da,br,Mi,f,null,-0,0)}}break}while(!0);Os(t)}function wp(t,n,i,l,u,f,v,T,O,$,at,ut,W,nt){if(t.timeoutHandle=-1,ut=n.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:is},xp(n,f,ut);var Et=(f&62914560)===f?bc-We():(f&4194048)===f?Ep-We():0;if(Et=db(ut,Et),Et!==null){li=f,t.cancelPendingCommit=Et(Vp.bind(null,t,n,f,i,l,u,v,T,O,at,ut,null,W,nt)),ki(t,f,v,!$);return}}Vp(t,n,f,i,l,u,v,T,O)}function N_(t){for(var n=t;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var u=i[l],f=u.getSnapshot;u=u.value;try{if(!Dn(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ki(t,n,i,l){n&=~Jd,n&=~Da,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var u=n;0<u;){var f=31-Ot(u),v=1<<f;l[f]=-1,u&=~v}i!==0&&la(t,i,n)}function Sc(){return(oe&6)===0?(kl(0),!1):!0}function sh(){if(Yt!==null){if(ge===0)var t=Yt.return;else t=Yt,$s=Ta=null,vd(t),fr=null,vl=0,t=Yt;for(;t!==null;)sp(t.alternate,t),t=t.return;Yt=null}}function Tr(t,n){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,Y_(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),li=0,sh(),Te=t,Yt=i=Xs(t.current,null),Kt=n,ge=0,zn=null,Mi=!1,_r=es(t,n),Zd=!1,br=kn=Jd=Da=Vi=Ve=0,wn=Ol=null,Wd=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var u=31-Ot(l),f=1<<u;n|=t[u],l&=~f}return ri=n,Fo(),i}function Np(t,n){Gt=null,tt.H=Nl,n===hr||n===Wo?(n=Gm(),ge=3):n===ld?(n=Gm(),ge=4):ge=n===Od?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,zn=n,Yt===null&&(Ve=1,fc(t,Fn(n,t.current)))}function Rp(){var t=Vn.current;return t===null?!0:(Kt&4194048)===Kt?Kn===null:(Kt&62914560)===Kt||(Kt&536870912)!==0?t===Kn:!1}function Cp(){var t=tt.H;return tt.H=Nl,t===null?Nl:t}function jp(){var t=tt.A;return tt.A=A_,t}function Ac(){Ve=4,Mi||(Kt&4194048)!==Kt&&Vn.current!==null||(_r=!0),(Vi&134217727)===0&&(Da&134217727)===0||Te===null||ki(Te,Kt,kn,!1)}function ih(t,n,i){var l=oe;oe|=2;var u=Cp(),f=jp();(Te!==t||Kt!==n)&&(Tc=null,Tr(t,n)),n=!1;var v=Ve;t:do try{if(ge!==0&&Yt!==null){var T=Yt,O=zn;switch(ge){case 8:sh(),v=6;break t;case 3:case 2:case 9:case 6:Vn.current===null&&(n=!0);var $=ge;if(ge=0,zn=null,Sr(t,T,O,$),i&&_r){v=0;break t}break;default:$=ge,ge=0,zn=null,Sr(t,T,O,$)}}R_(),v=Ve;break}catch(at){Np(t,at)}while(!0);return n&&t.shellSuspendCounter++,$s=Ta=null,oe=l,tt.H=u,tt.A=f,Yt===null&&(Te=null,Kt=0,Fo()),v}function R_(){for(;Yt!==null;)Ip(Yt)}function C_(t,n){var i=oe;oe|=2;var l=Cp(),u=jp();Te!==t||Kt!==n?(Tc=null,Ec=We()+500,Tr(t,n)):_r=es(t,n);t:do try{if(ge!==0&&Yt!==null){n=Yt;var f=zn;e:switch(ge){case 1:ge=0,zn=null,Sr(t,n,f,1);break;case 2:case 9:if(Pm(f)){ge=0,zn=null,Dp(n);break}n=function(){ge!==2&&ge!==9||Te!==t||(ge=7),Os(t)},f.then(n,n);break t;case 3:ge=7;break t;case 4:ge=5;break t;case 7:Pm(f)?(ge=0,zn=null,Dp(n)):(ge=0,zn=null,Sr(t,n,f,7));break;case 5:var v=null;switch(Yt.tag){case 26:v=Yt.memoizedState;case 5:case 27:var T=Yt;if(v?yy(v):T.stateNode.complete){ge=0,zn=null;var O=T.sibling;if(O!==null)Yt=O;else{var $=T.return;$!==null?(Yt=$,wc($)):Yt=null}break e}}ge=0,zn=null,Sr(t,n,f,5);break;case 6:ge=0,zn=null,Sr(t,n,f,6);break;case 8:sh(),Ve=6;break t;default:throw Error(r(462))}}j_();break}catch(at){Np(t,at)}while(!0);return $s=Ta=null,tt.H=l,tt.A=u,oe=i,Yt!==null?0:(Te=null,Kt=0,Fo(),Ve)}function j_(){for(;Yt!==null&&!Wn();)Ip(Yt)}function Ip(t){var n=ep(t.alternate,t,ri);t.memoizedProps=t.pendingProps,n===null?wc(t):Yt=n}function Dp(t){var n=t,i=n.alternate;switch(n.tag){case 15:case 0:n=Kg(i,n,n.pendingProps,n.type,void 0,Kt);break;case 11:n=Kg(i,n,n.pendingProps,n.type.render,n.ref,Kt);break;case 5:vd(n);default:sp(i,n),n=Yt=jm(n,ri),n=ep(i,n,ri)}t.memoizedProps=t.pendingProps,n===null?wc(t):Yt=n}function Sr(t,n,i,l){$s=Ta=null,vd(n),fr=null,vl=0;var u=n.return;try{if(x_(t,u,n,i,Kt)){Ve=1,fc(t,Fn(i,t.current)),Yt=null;return}}catch(f){if(u!==null)throw Yt=u,f;Ve=1,fc(t,Fn(i,t.current)),Yt=null;return}n.flags&32768?(Wt||l===1?t=!0:_r||(Kt&536870912)!==0?t=!1:(Mi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mp(n,t)):wc(n)}function wc(t){var n=t;do{if((n.flags&32768)!==0){Mp(n,Mi);return}t=n.return;var i=b_(n.alternate,n,ri);if(i!==null){Yt=i;return}if(n=n.sibling,n!==null){Yt=n;return}Yt=n=t}while(n!==null);Ve===0&&(Ve=5)}function Mp(t,n){do{var i=E_(t.alternate,t);if(i!==null){i.flags&=32767,Yt=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(t=t.sibling,t!==null)){Yt=t;return}Yt=t=i}while(t!==null);Ve=6,Yt=null}function Vp(t,n,i,l,u,f,v,T,O){t.cancelPendingCommit=null;do Nc();while(Ze!==0);if((oe&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Qu,ku(t,i,f,v,T,O),t===Te&&(Yt=Te=null,Kt=0),Er=n,zi=t,li=i,th=f,eh=u,Tp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,V_(mt,function(){return Lp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=tt.T,tt.T=null,u=H.p,H.p=2,v=oe,oe|=4;try{T_(t,n,i)}finally{oe=v,H.p=u,tt.T=l}}Ze=1,Op(),zp(),kp()}}function Op(){if(Ze===1){Ze=0;var t=zi,n=Er,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=tt.T,tt.T=null;var l=H.p;H.p=2;var u=oe;oe|=4;try{gp(n,t);var f=ph,v=bm(t.containerInfo),T=f.focusedElem,O=f.selectionRange;if(v!==T&&T&&T.ownerDocument&&_m(T.ownerDocument.documentElement,T)){if(O!==null&&Pu(T)){var $=O.start,at=O.end;if(at===void 0&&(at=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(at,T.value.length);else{var ut=T.ownerDocument||document,W=ut&&ut.defaultView||window;if(W.getSelection){var nt=W.getSelection(),Et=T.textContent.length,It=Math.min(O.start,Et),Ee=O.end===void 0?It:Math.min(O.end,Et);!nt.extend&&It>Ee&&(v=Ee,Ee=It,It=v);var G=vm(T,It),U=vm(T,Ee);if(G&&U&&(nt.rangeCount!==1||nt.anchorNode!==G.node||nt.anchorOffset!==G.offset||nt.focusNode!==U.node||nt.focusOffset!==U.offset)){var K=ut.createRange();K.setStart(G.node,G.offset),nt.removeAllRanges(),It>Ee?(nt.addRange(K),nt.extend(U.node,U.offset)):(K.setEnd(U.node,U.offset),nt.addRange(K))}}}}for(ut=[],nt=T;nt=nt.parentNode;)nt.nodeType===1&&ut.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ut.length;T++){var ot=ut[T];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}Lc=!!gh,ph=gh=null}finally{oe=u,H.p=l,tt.T=i}}t.current=n,Ze=2}}function zp(){if(Ze===2){Ze=0;var t=zi,n=Er,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=tt.T,tt.T=null;var l=H.p;H.p=2;var u=oe;oe|=4;try{up(t,n.alternate,n)}finally{oe=u,H.p=l,tt.T=i}}Ze=3}}function kp(){if(Ze===4||Ze===3){Ze=0,ts();var t=zi,n=Er,i=li,l=Tp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ze=5:(Ze=0,Er=zi=null,Up(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Oi=null),Hs(i),n=n.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(Rt,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=tt.T,u=H.p,H.p=2,tt.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];f(T.value,{componentStack:T.stack})}}finally{tt.T=n,H.p=u}}(li&3)!==0&&Nc(),Os(t),u=t.pendingLanes,(i&261930)!==0&&(u&42)!==0?t===nh?zl++:(zl=0,nh=t):zl=0,kl(0)}}function Up(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,yl(n)))}function Nc(){return Op(),zp(),kp(),Lp()}function Lp(){if(Ze!==5)return!1;var t=zi,n=th;th=0;var i=Hs(li),l=tt.T,u=H.p;try{H.p=32>i?32:i,tt.T=null,i=eh,eh=null;var f=zi,v=li;if(Ze=0,Er=zi=null,li=0,(oe&6)!==0)throw Error(r(331));var T=oe;if(oe|=4,_p(f.current),yp(f,f.current,v,i),oe=T,kl(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(Rt,f)}catch{}return!0}finally{H.p=u,tt.T=l,Up(t,n)}}function Bp(t,n,i){n=Fn(i,n),n=Vd(t.stateNode,n,2),t=Ci(t,n,2),t!==null&&(ra(t,2),Os(t))}function pe(t,n,i){if(t.tag===3)Bp(t,t,i);else for(;n!==null;){if(n.tag===3){Bp(n,t,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Oi===null||!Oi.has(l))){t=Fn(i,t),i=Pg(2),l=Ci(n,i,2),l!==null&&(qg(i,l,n,t),ra(l,2),Os(l));break}}n=n.return}}function ah(t,n,i){var l=t.pingCache;if(l===null){l=t.pingCache=new w_;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(i)||(Zd=!0,u.add(i),t=I_.bind(null,t,n,i),n.then(t,t))}function I_(t,n,i){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Te===t&&(Kt&i)===i&&(Ve===4||Ve===3&&(Kt&62914560)===Kt&&300>We()-bc?(oe&2)===0&&Tr(t,0):Jd|=i,br===Kt&&(br=0)),Os(t)}function Pp(t,n){n===0&&(n=To()),t=_a(t,n),t!==null&&(ra(t,n),Os(t))}function D_(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),Pp(t,i)}function M_(t,n){var i=0;switch(t.tag){case 31:case 13:var l=t.stateNode,u=t.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Pp(t,i)}function V_(t,n){return fe(t,n)}var Rc=null,Ar=null,rh=!1,Cc=!1,lh=!1,Ui=0;function Os(t){t!==Ar&&t.next===null&&(Ar===null?Rc=Ar=t:Ar=Ar.next=t),Cc=!0,rh||(rh=!0,z_())}function kl(t,n){if(!lh&&Cc){lh=!0;do for(var i=!1,l=Rc;l!==null;){if(t!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var v=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ot(42|t)+1)-1,f&=u&~(v&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Fp(l,f))}else f=Kt,f=ys(l,l===Te?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||es(l,f)||(i=!0,Fp(l,f));l=l.next}while(i);lh=!1}}function O_(){qp()}function qp(){Cc=rh=!1;var t=0;Ui!==0&&Q_()&&(t=Ui);for(var n=We(),i=null,l=Rc;l!==null;){var u=l.next,f=Gp(l,n);f===0?(l.next=null,i===null?Rc=u:i.next=u,u===null&&(Ar=i)):(i=l,(t!==0||(f&3)!==0)&&(Cc=!0)),l=u}Ze!==0&&Ze!==5||kl(t),Ui!==0&&(Ui=0)}function Gp(t,n){for(var i=t.suspendedLanes,l=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Ot(f),T=1<<v,O=u[v];O===-1?((T&i)===0||(T&l)!==0)&&(u[v]=zu(T,n)):O<=n&&(t.expiredLanes|=T),f&=~T}if(n=Te,i=Kt,i=ys(t,t===n?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,i===0||t===n&&(ge===2||ge===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ie(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||es(t,i)){if(n=i&-i,n===t.callbackPriority)return n;switch(l!==null&&Ie(l),Hs(i)){case 2:case 8:i=fi;break;case 32:i=mt;break;case 268435456:i=ye;break;default:i=mt}return l=Hp.bind(null,t),i=fe(i,l),t.callbackPriority=n,t.callbackNode=i,n}return l!==null&&l!==null&&Ie(l),t.callbackPriority=2,t.callbackNode=null,2}function Hp(t,n){if(Ze!==0&&Ze!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Nc()&&t.callbackNode!==i)return null;var l=Kt;return l=ys(t,t===Te?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ap(t,l,n),Gp(t,We()),t.callbackNode!=null&&t.callbackNode===i?Hp.bind(null,t):null)}function Fp(t,n){if(Nc())return null;Ap(t,n,!0)}function z_(){X_(function(){(oe&6)!==0?fe(hi,O_):qp()})}function oh(){if(Ui===0){var t=ur;t===0&&(t=gs,gs<<=1,(gs&261888)===0&&(gs=256)),Ui=t}return Ui}function Qp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ka(""+t)}function Yp(t,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,t.id&&i.setAttribute("form",t.id),n.parentNode.insertBefore(i,n),t=new FormData(t),i.parentNode.removeChild(i),t}function k_(t,n,i,l,u){if(n==="submit"&&i&&i.stateNode===u){var f=Qp((u[nn]||null).action),v=l.submitter;v&&(n=(n=v[nn]||null)?Qp(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var T=new Rs("action","action",null,l,u);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ui!==0){var O=v?Yp(u,v):new FormData(u);Rd(i,{pending:!0,data:O,method:u.method,action:f},null,O)}}else typeof f=="function"&&(T.preventDefault(),O=v?Yp(u,v):new FormData(u),Rd(i,{pending:!0,data:O,method:u.method,action:f},f,O))},currentTarget:u}]})}}for(var ch=0;ch<Fu.length;ch++){var uh=Fu[ch],U_=uh.toLowerCase(),L_=uh[0].toUpperCase()+uh.slice(1);cs(U_,"on"+L_)}cs(Sm,"onAnimationEnd"),cs(Am,"onAnimationIteration"),cs(wm,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(e_,"onTransitionRun"),cs(n_,"onTransitionStart"),cs(s_,"onTransitionCancel"),cs(Nm,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function Xp(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],u=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var v=l.length-1;0<=v;v--){var T=l[v],O=T.instance,$=T.currentTarget;if(T=T.listener,O!==f&&u.isPropagationStopped())break t;f=T,u.currentTarget=$;try{f(u)}catch(at){Ho(at)}u.currentTarget=null,f=O}else for(v=0;v<l.length;v++){if(T=l[v],O=T.instance,$=T.currentTarget,T=T.listener,O!==f&&u.isPropagationStopped())break t;f=T,u.currentTarget=$;try{f(u)}catch(at){Ho(at)}u.currentTarget=null,f=O}}}}function Xt(t,n){var i=n[Ha];i===void 0&&(i=n[Ha]=new Set);var l=t+"__bubble";i.has(l)||(Kp(n,t,2,!1),i.add(l))}function dh(t,n,i){var l=0;n&&(l|=4),Kp(i,t,l,n)}var jc="_reactListening"+Math.random().toString(36).slice(2);function hh(t){if(!t[jc]){t[jc]=!0,$r.forEach(function(i){i!=="selectionchange"&&(B_.has(i)||dh(i,!1,t),dh(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[jc]||(n[jc]=!0,dh("selectionchange",!1,n))}}function Kp(t,n,i,l){switch(Sy(n)){case 2:var u=mb;break;case 8:u=gb;break;default:u=Nh}i=u.bind(null,n,i,t),u=void 0,!ha||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?t.addEventListener(n,i,{capture:!0,passive:u}):t.addEventListener(n,i,!0):u!==void 0?t.addEventListener(n,i,{passive:u}):t.addEventListener(n,i,!1)}function fh(t,n,i,l,u){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===u)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;T!==null;){if(v=bs(T),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=f=v;continue t}T=T.parentNode}}l=l.return}vi(function(){var $=f,at=Pn(i),ut=[];t:{var W=Rm.get(t);if(W!==void 0){var nt=Rs,Et=t;switch(t){case"keypress":if(ma(i)===0)break t;case"keydown":case"keyup":nt=Po;break;case"focusin":Et="focus",nt=pa;break;case"focusout":Et="blur",nt=pa;break;case"beforeblur":case"afterblur":nt=pa;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Do;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=g;break;case Sm:case Am:case wm:nt=Vo;break;case Nm:nt=S;break;case"scroll":case"scrollend":nt=ol;break;case"wheel":nt=et;break;case"copy":case"cut":case"paste":nt=Oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Ys;break;case"toggle":case"beforetoggle":nt=qt}var It=(n&4)!==0,Ee=!It&&(t==="scroll"||t==="scrollend"),G=It?W!==null?W+"Capture":null:W;It=[];for(var U=$,K;U!==null;){var ot=U;if(K=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||K===null||G===null||(ot=as(U,G),ot!=null&&It.push(Ll(U,ot,K))),Ee)break;U=U.return}0<It.length&&(W=new nt(W,Et,null,i,at),ut.push({event:W,listeners:It}))}}if((n&7)===0){t:{if(W=t==="mouseover"||t==="pointerover",nt=t==="mouseout"||t==="pointerout",W&&i!==al&&(Et=i.relatedTarget||i.fromElement)&&(bs(Et)||Et[vs]))break t;if((nt||W)&&(W=at.window===at?at:(W=at.ownerDocument)?W.defaultView||W.parentWindow:window,nt?(Et=i.relatedTarget||i.toElement,nt=$,Et=Et?bs(Et):null,Et!==null&&(Ee=d(Et),It=Et.tag,Et!==Ee||It!==5&&It!==27&&It!==6)&&(Et=null)):(nt=null,Et=$),nt!==Et)){if(It=cl,ot="onMouseLeave",G="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(It=Ys,ot="onPointerLeave",G="onPointerEnter",U="pointer"),Ee=nt==null?W:jn(nt),K=Et==null?W:jn(Et),W=new It(ot,U+"leave",nt,i,at),W.target=Ee,W.relatedTarget=K,ot=null,bs(at)===$&&(It=new It(G,U+"enter",Et,i,at),It.target=K,It.relatedTarget=Ee,ot=It),Ee=ot,nt&&Et)e:{for(It=P_,G=nt,U=Et,K=0,ot=G;ot;ot=It(ot))K++;ot=0;for(var Ct=U;Ct;Ct=It(Ct))ot++;for(;0<K-ot;)G=It(G),K--;for(;0<ot-K;)U=It(U),ot--;for(;K--;){if(G===U||U!==null&&G===U.alternate){It=G;break e}G=It(G),U=It(U)}It=null}else It=null;nt!==null&&$p(ut,W,nt,It,!1),Et!==null&&Ee!==null&&$p(ut,Ee,Et,It,!0)}}t:{if(W=$?jn($):window,nt=W.nodeName&&W.nodeName.toLowerCase(),nt==="select"||nt==="input"&&W.type==="file")var ie=fm;else if(dm(W))if(mm)ie=Jv;else{ie=$v;var Tt=Kv}else nt=W.nodeName,!nt||nt.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?$&&Xa($.elementType)&&(ie=fm):ie=Zv;if(ie&&(ie=ie(t,$))){hm(ut,ie,i,at);break t}Tt&&Tt(t,W,$),t==="focusout"&&$&&W.type==="number"&&$.memoizedProps.value!=null&&nl(W,"number",W.value)}switch(Tt=$?jn($):window,t){case"focusin":(dm(Tt)||Tt.contentEditable==="true")&&(nr=Tt,qu=$,ml=null);break;case"focusout":ml=qu=nr=null;break;case"mousedown":Gu=!0;break;case"contextmenu":case"mouseup":case"dragend":Gu=!1,Em(ut,i,at);break;case"selectionchange":if(t_)break;case"keydown":case"keyup":Em(ut,i,at)}var Ht;if(le)t:{switch(t){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else er?ya(t,i)&&($t="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&($t="onCompositionStart");$t&&(Is&&i.locale!=="ko"&&(er||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&er&&(Ht=ll()):(Ns=at,rl="value"in Ns?Ns.value:Ns.textContent,er=!0)),Tt=Ic($,$t),0<Tt.length&&($t=new js($t,t,null,i,at),ut.push({event:$t,listeners:Tt}),Ht?$t.data=Ht:(Ht=tr(i),Ht!==null&&($t.data=Ht)))),(Ht=Gn?Fv(t,i):Qv(t,i))&&($t=Ic($,"onBeforeInput"),0<$t.length&&(Tt=new js("onBeforeInput","beforeinput",null,i,at),ut.push({event:Tt,listeners:$t}),Tt.data=Ht)),k_(ut,t,$,i,at)}Xp(ut,n)})}function Ll(t,n,i){return{instance:t,listener:n,currentTarget:i}}function Ic(t,n){for(var i=n+"Capture",l=[];t!==null;){var u=t,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=as(t,i),u!=null&&l.unshift(Ll(t,u,f)),u=as(t,n),u!=null&&l.push(Ll(t,u,f))),t.tag===3)return l;t=t.return}return[]}function P_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $p(t,n,i,l,u){for(var f=n._reactName,v=[];i!==null&&i!==l;){var T=i,O=T.alternate,$=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||$===null||(O=$,u?($=as(i,f),$!=null&&v.unshift(Ll(i,$,O))):u||($=as(i,f),$!=null&&v.push(Ll(i,$,O)))),i=i.return}v.length!==0&&t.push({event:n,listeners:v})}var q_=/\r\n?/g,G_=/\u0000|\uFFFD/g;function Zp(t){return(typeof t=="string"?t:""+t).replace(q_,`
`).replace(G_,"")}function Jp(t,n){return n=Zp(n),Zp(t)===n}function be(t,n,i,l,u,f){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&En(t,""+l);break;case"className":In(t,"class",l);break;case"tabIndex":In(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":In(t,i,l);break;case"style":il(t,l,f);break;case"data":if(n!=="object"){In(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=Ka(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&be(t,n,"name",u.name,u,null),be(t,n,"formEncType",u.formEncType,u,null),be(t,n,"formMethod",u.formMethod,u,null),be(t,n,"formTarget",u.formTarget,u,null)):(be(t,n,"encType",u.encType,u,null),be(t,n,"method",u.method,u,null),be(t,n,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=Ka(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=is);break;case"onScroll":l!=null&&Xt("scroll",t);break;case"onScrollEnd":l!=null&&Xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=Ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Xt("beforetoggle",t),Xt("toggle",t),Qa(t,"popover",l);break;case"xlinkActuate":qe(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qe(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qe(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qe(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qe(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qe(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qe(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Qa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Io.get(i)||i,Qa(t,i,l))}}function mh(t,n,i,l,u,f){switch(i){case"style":il(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&Xt("scroll",t);break;case"onScrollEnd":l!=null&&Xt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=t[nn]||null,f=f!=null?f[i]:null,typeof f=="function"&&t.removeEventListener(n,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(n,l,u);break t}i in t?t[i]=l:l===!0?t.setAttribute(i,""):Qa(t,i,l)}}}function dn(t,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",t),Xt("load",t);var l=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var v=i[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:be(t,n,f,v,i,null)}}u&&be(t,n,"srcSet",i.srcSet,i,null),l&&be(t,n,"src",i.src,i,null);return;case"input":Xt("invalid",t);var T=f=v=u=null,O=null,$=null;for(l in i)if(i.hasOwnProperty(l)){var at=i[l];if(at!=null)switch(l){case"name":u=at;break;case"type":v=at;break;case"checked":O=at;break;case"defaultChecked":$=at;break;case"value":f=at;break;case"defaultValue":T=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,n));break;default:be(t,n,l,at,i,null)}}Ro(t,f,T,O,$,v,u,!1);return;case"select":Xt("invalid",t),l=v=f=null;for(u in i)if(i.hasOwnProperty(u)&&(T=i[u],T!=null))switch(u){case"value":f=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:be(t,n,u,T,i,null)}n=f,i=v,t.multiple=!!l,n!=null?gi(t,!!l,n,!1):i!=null&&gi(t,!!l,i,!0);return;case"textarea":Xt("invalid",t),f=u=l=null;for(v in i)if(i.hasOwnProperty(v)&&(T=i[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":u=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:be(t,n,v,T,i,null)}pi(t,l,u,f);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:be(t,n,O,l,i,null)}return;case"dialog":Xt("beforetoggle",t),Xt("toggle",t),Xt("cancel",t),Xt("close",t);break;case"iframe":case"object":Xt("load",t);break;case"video":case"audio":for(l=0;l<Ul.length;l++)Xt(Ul[l],t);break;case"image":Xt("error",t),Xt("load",t);break;case"details":Xt("toggle",t);break;case"embed":case"source":case"link":Xt("error",t),Xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(l=i[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:be(t,n,$,l,i,null)}return;default:if(Xa(n)){for(at in i)i.hasOwnProperty(at)&&(l=i[at],l!==void 0&&mh(t,n,at,l,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(l=i[T],l!=null&&be(t,n,T,l,i,null))}function H_(t,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,T=null,O=null,$=null,at=null;for(nt in i){var ut=i[nt];if(i.hasOwnProperty(nt)&&ut!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":O=ut;default:l.hasOwnProperty(nt)||be(t,n,nt,null,l,ut)}}for(var W in l){var nt=l[W];if(ut=i[W],l.hasOwnProperty(W)&&(nt!=null||ut!=null))switch(W){case"type":f=nt;break;case"name":u=nt;break;case"checked":$=nt;break;case"defaultChecked":at=nt;break;case"value":v=nt;break;case"defaultValue":T=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,n));break;default:nt!==ut&&be(t,n,W,nt,l,ut)}}Ya(t,v,T,O,$,at,f,u);return;case"select":nt=v=T=W=null;for(f in i)if(O=i[f],i.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":nt=O;default:l.hasOwnProperty(f)||be(t,n,f,null,l,O)}for(u in l)if(f=l[u],O=i[u],l.hasOwnProperty(u)&&(f!=null||O!=null))switch(u){case"value":W=f;break;case"defaultValue":T=f;break;case"multiple":v=f;default:f!==O&&be(t,n,u,f,l,O)}n=T,i=v,l=nt,W!=null?gi(t,!!i,W,!1):!!l!=!!i&&(n!=null?gi(t,!!i,n,!0):gi(t,!!i,i?[]:"",!1));return;case"textarea":nt=W=null;for(T in i)if(u=i[T],i.hasOwnProperty(T)&&u!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:be(t,n,T,null,l,u)}for(v in l)if(u=l[v],f=i[v],l.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":W=u;break;case"defaultValue":nt=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==f&&be(t,n,v,u,l,f)}Co(t,W,nt);return;case"option":for(var Et in i)if(W=i[Et],i.hasOwnProperty(Et)&&W!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":t.selected=!1;break;default:be(t,n,Et,null,l,W)}for(O in l)if(W=l[O],nt=i[O],l.hasOwnProperty(O)&&W!==nt&&(W!=null||nt!=null))switch(O){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:be(t,n,O,W,l,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in i)W=i[It],i.hasOwnProperty(It)&&W!=null&&!l.hasOwnProperty(It)&&be(t,n,It,null,l,W);for($ in l)if(W=l[$],nt=i[$],l.hasOwnProperty($)&&W!==nt&&(W!=null||nt!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,n));break;default:be(t,n,$,W,l,nt)}return;default:if(Xa(n)){for(var Ee in i)W=i[Ee],i.hasOwnProperty(Ee)&&W!==void 0&&!l.hasOwnProperty(Ee)&&mh(t,n,Ee,void 0,l,W);for(at in l)W=l[at],nt=i[at],!l.hasOwnProperty(at)||W===nt||W===void 0&&nt===void 0||mh(t,n,at,W,l,nt);return}}for(var G in i)W=i[G],i.hasOwnProperty(G)&&W!=null&&!l.hasOwnProperty(G)&&be(t,n,G,null,l,W);for(ut in l)W=l[ut],nt=i[ut],!l.hasOwnProperty(ut)||W===nt||W==null&&nt==null||be(t,n,ut,W,l,nt)}function Wp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function F_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var u=i[l],f=u.transferSize,v=u.initiatorType,T=u.duration;if(f&&T&&Wp(v)){for(v=0,T=u.responseEnd,l+=1;l<i.length;l++){var O=i[l],$=O.startTime;if($>T)break;var at=O.transferSize,ut=O.initiatorType;at&&Wp(ut)&&(O=O.responseEnd,v+=at*(O<T?1:(T-$)/(O-$)))}if(--l,n+=8*(f+v)/(u.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var gh=null,ph=null;function Dc(t){return t.nodeType===9?t:t.ownerDocument}function ty(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ey(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function yh(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var xh=null;function Q_(){var t=window.event;return t&&t.type==="popstate"?t===xh?!1:(xh=t,!0):(xh=null,!1)}var ny=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,X_=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(K_)}:ny;function K_(t){setTimeout(function(){throw t})}function Li(t){return t==="head"}function iy(t,n){var i=n,l=0;do{var u=i.nextSibling;if(t.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(l===0){t.removeChild(u),Cr(n);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Bl(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Bl(i);for(var f=i.firstChild;f;){var v=f.nextSibling,T=f.nodeName;f[_s]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=v}}else i==="body"&&Bl(t.ownerDocument.body);i=u}while(i);Cr(n)}function ay(t,n){var i=t;t=0;do{var l=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=l}while(i)}function vh(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vh(i),Fa(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function $_(t,n,i,l){for(;t.nodeType===1;){var u=i;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_s])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function Z_(t,n,i){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=$n(t.nextSibling),t===null))return null;return t}function ry(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=$n(t.nextSibling),t===null))return null;return t}function _h(t){return t.data==="$?"||t.data==="$~"}function bh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function J_(t,n){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||i.readyState!=="loading")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function $n(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Eh=null;function ly(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(n===0)return $n(t.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}t=t.nextSibling}return null}function oy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return t;n--}else i!=="/$"&&i!=="/&"||n++}t=t.previousSibling}return null}function cy(t,n,i){switch(n=Dc(i),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Bl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Fa(t)}var Zn=new Map,uy=new Set;function Mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var oi=H.d;H.d={f:W_,r:tb,D:eb,C:nb,L:sb,m:ib,X:rb,S:ab,M:lb};function W_(){var t=oi.f(),n=Sc();return t||n}function tb(t){var n=Bn(t);n!==null&&n.tag===5&&n.type==="form"?Ng(n):oi.r(t)}var wr=typeof document>"u"?null:document;function dy(t,n,i){var l=wr;if(l&&typeof n=="string"&&n){var u=bn(n);u='link[rel="'+t+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),uy.has(u)||(uy.add(u),t={rel:t,crossOrigin:i,href:n},l.querySelector(u)===null&&(n=l.createElement("link"),dn(n,"link",t),Pe(n),l.head.appendChild(n)))}}function eb(t){oi.D(t),dy("dns-prefetch",t,null)}function nb(t,n){oi.C(t,n),dy("preconnect",t,n)}function sb(t,n,i){oi.L(t,n,i);var l=wr;if(l&&t&&n){var u='link[rel="preload"][as="'+bn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+bn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+bn(i.imageSizes)+'"]')):u+='[href="'+bn(t)+'"]';var f=u;switch(n){case"style":f=Nr(t);break;case"script":f=Rr(t)}Zn.has(f)||(t=E({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:t,as:n},i),Zn.set(f,t),l.querySelector(u)!==null||n==="style"&&l.querySelector(Pl(f))||n==="script"&&l.querySelector(ql(f))||(n=l.createElement("link"),dn(n,"link",t),Pe(n),l.head.appendChild(n)))}}function ib(t,n){oi.m(t,n);var i=wr;if(i&&t){var l=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+bn(l)+'"][href="'+bn(t)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Rr(t)}if(!Zn.has(f)&&(t=E({rel:"modulepreload",href:t},n),Zn.set(f,t),i.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ql(f)))return}l=i.createElement("link"),dn(l,"link",t),Pe(l),i.head.appendChild(l)}}}function ab(t,n,i){oi.S(t,n,i);var l=wr;if(l&&t){var u=Es(l).hoistableStyles,f=Nr(t);n=n||"default";var v=u.get(f);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(Pl(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},i),(i=Zn.get(f))&&Th(t,i);var O=v=l.createElement("link");Pe(O),dn(O,"link",t),O._p=new Promise(function($,at){O.onload=$,O.onerror=at}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Vc(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:T},u.set(f,v)}}}function rb(t,n){oi.X(t,n);var i=wr;if(i&&t){var l=Es(i).hoistableScripts,u=Rr(t),f=l.get(u);f||(f=i.querySelector(ql(u)),f||(t=E({src:t,async:!0},n),(n=Zn.get(u))&&Sh(t,n),f=i.createElement("script"),Pe(f),dn(f,"link",t),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function lb(t,n){oi.M(t,n);var i=wr;if(i&&t){var l=Es(i).hoistableScripts,u=Rr(t),f=l.get(u);f||(f=i.querySelector(ql(u)),f||(t=E({src:t,async:!0,type:"module"},n),(n=Zn.get(u))&&Sh(t,n),f=i.createElement("script"),Pe(f),dn(f,"link",t),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function hy(t,n,i,l){var u=(u=st.current)?Mc(u):null;if(!u)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Nr(i.href),i=Es(u).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Nr(i.href);var f=Es(u).hoistableStyles,v=f.get(t);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=u.querySelector(Pl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Zn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Zn.set(t,i),f||ob(u,t,i,v.state))),n&&l===null)throw Error(r(528,""));return v}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Rr(i),i=Es(u).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Nr(t){return'href="'+bn(t)+'"'}function Pl(t){return'link[rel="stylesheet"]['+t+"]"}function fy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function ob(t,n,i,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),dn(n,"link",i),Pe(n),t.head.appendChild(n))}function Rr(t){return'[src="'+bn(t)+'"]'}function ql(t){return"script[async]"+t}function my(t,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+bn(i.href)+'"]');if(l)return n.instance=l,Pe(l),l;var u=E({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Pe(l),dn(l,"style",u),Vc(l,i.precedence,t),n.instance=l;case"stylesheet":u=Nr(i.href);var f=t.querySelector(Pl(u));if(f)return n.state.loading|=4,n.instance=f,Pe(f),f;l=fy(i),(u=Zn.get(u))&&Th(l,u),f=(t.ownerDocument||t).createElement("link"),Pe(f);var v=f;return v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),dn(f,"link",l),n.state.loading|=4,Vc(f,i.precedence,t),n.instance=f;case"script":return f=Rr(i.src),(u=t.querySelector(ql(f)))?(n.instance=u,Pe(u),u):(l=i,(u=Zn.get(f))&&(l=E({},i),Sh(l,u)),t=t.ownerDocument||t,u=t.createElement("script"),Pe(u),dn(u,"link",l),t.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Vc(l,i.precedence,t));return n.instance}function Vc(t,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===n)f=T;else if(f!==u)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(t,n.firstChild))}function Th(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Sh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Oc=null;function gy(t,n,i){if(Oc===null){var l=new Map,u=Oc=new Map;u.set(i,l)}else u=Oc,l=u.get(i),l||(l=new Map,u.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),u=0;u<i.length;u++){var f=i[u];if(!(f[_s]||f[Be]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=t+v;var T=l.get(v);T?T.push(f):l.set(v,[f])}}return l}function py(t,n,i){t=t.ownerDocument||t,t.head.insertBefore(i,n==="title"?t.querySelector("head > title"):null)}function cb(t,n,i){if(i===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function yy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ub(t,n,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=Nr(l.href),f=n.querySelector(Pl(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=zc.bind(t),n.then(t,t)),i.state.loading|=4,i.instance=f,Pe(f);return}f=n.ownerDocument||n,l=fy(l),(u=Zn.get(u))&&Th(l,u),f=f.createElement("link"),Pe(f);var v=f;v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),dn(f,"link",l),i.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=zc.bind(t),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ah=0;function db(t,n){return t.stylesheets&&t.count===0&&Uc(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var l=setTimeout(function(){if(t.stylesheets&&Uc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+n);0<t.imgBytes&&Ah===0&&(Ah=62500*F_());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Uc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Ah?50:800)+n);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function Uc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,n.forEach(hb,t),kc=null,zc.call(t))}function hb(t,n){if(!(n.state.loading&4)){var i=kc.get(t);if(i)var l=i.get(null);else{i=new Map,kc.set(t,i);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),l=v)}l&&i.set(null,l)}u=n.instance,v=u.getAttribute("data-precedence"),f=i.get(v)||l,f===l&&i.set(null,u),i.set(v,u),this.count++,l=zc.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),n.state.loading|=4}}var Gl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function fb(t,n,i,l,u,f,v,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xs(0),this.hiddenUpdates=xs(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function xy(t,n,i,l,u,f,v,T,O,$,at,ut){return t=new fb(t,n,i,v,O,$,at,ut,T),n=1,f===!0&&(n|=24),f=Mn(3,null,null,n),t.current=f,f.stateNode=t,n=id(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:i,cache:n},od(f),t}function vy(t){return t?(t=ar,t):ar}function _y(t,n,i,l,u,f){u=vy(u),l.context===null?l.context=u:l.pendingContext=u,l=Ri(n),l.payload={element:i},f=f===void 0?null:f,f!==null&&(l.callback=f),i=Ci(t,l,n),i!==null&&(Nn(i,t,n),bl(i,t,n))}function by(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function wh(t,n){by(t,n),(t=t.alternate)&&by(t,n)}function Ey(t){if(t.tag===13||t.tag===31){var n=_a(t,67108864);n!==null&&Nn(n,t,67108864),wh(t,67108864)}}function Ty(t){if(t.tag===13||t.tag===31){var n=Un();n=oa(n);var i=_a(t,n);i!==null&&Nn(i,t,n),wh(t,n)}}var Lc=!0;function mb(t,n,i,l){var u=tt.T;tt.T=null;var f=H.p;try{H.p=2,Nh(t,n,i,l)}finally{H.p=f,tt.T=u}}function gb(t,n,i,l){var u=tt.T;tt.T=null;var f=H.p;try{H.p=8,Nh(t,n,i,l)}finally{H.p=f,tt.T=u}}function Nh(t,n,i,l){if(Lc){var u=Rh(l);if(u===null)fh(t,n,l,Bc,i),Ay(t,l);else if(yb(u,t,n,i,l))l.stopPropagation();else if(Ay(t,l),n&4&&-1<pb.indexOf(t)){for(;u!==null;){var f=Bn(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ps(f.pendingLanes);if(v!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var O=1<<31-Ot(v);T.entanglements[1]|=O,v&=~O}Os(f),(oe&6)===0&&(Ec=We()+500,kl(0))}}break;case 31:case 13:T=_a(f,2),T!==null&&Nn(T,f,2),Sc(),wh(f,2)}if(f=Rh(l),f===null&&fh(t,n,l,Bc,i),f===u)break;u=f}u!==null&&l.stopPropagation()}else fh(t,n,l,null,i)}}function Rh(t){return t=Pn(t),Ch(t)}var Bc=null;function Ch(t){if(Bc=null,t=bs(t),t!==null){var n=d(t);if(n===null)t=null;else{var i=n.tag;if(i===13){if(t=m(n),t!==null)return t;t=null}else if(i===31){if(t=p(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Bc=t,null}function Sy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ms()){case hi:return 2;case fi:return 8;case mt:case ue:return 32;case ye:return 268435456;default:return 32}default:return 32}}var jh=!1,Bi=null,Pi=null,qi=null,Hl=new Map,Fl=new Map,Gi=[],pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ay(t,n){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Hl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(n.pointerId)}}function Ql(t,n,i,l,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Bn(n),n!==null&&Ey(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),t)}function yb(t,n,i,l,u){switch(n){case"focusin":return Bi=Ql(Bi,t,n,i,l,u),!0;case"dragenter":return Pi=Ql(Pi,t,n,i,l,u),!0;case"mouseover":return qi=Ql(qi,t,n,i,l,u),!0;case"pointerover":var f=u.pointerId;return Hl.set(f,Ql(Hl.get(f)||null,t,n,i,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Fl.set(f,Ql(Fl.get(f)||null,t,n,i,l,u)),!0}return!1}function wy(t){var n=bs(t.target);if(n!==null){var i=d(n);if(i!==null){if(n=i.tag,n===13){if(n=m(i),n!==null){t.blockedOn=n,ns(t.priority,function(){Ty(i)});return}}else if(n===31){if(n=p(i),n!==null){t.blockedOn=n,ns(t.priority,function(){Ty(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Rh(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);al=l,i.target.dispatchEvent(l),al=null}else return n=Bn(i),n!==null&&Ey(n),t.blockedOn=i,!1;n.shift()}return!0}function Ny(t,n,i){Pc(t)&&i.delete(n)}function xb(){jh=!1,Bi!==null&&Pc(Bi)&&(Bi=null),Pi!==null&&Pc(Pi)&&(Pi=null),qi!==null&&Pc(qi)&&(qi=null),Hl.forEach(Ny),Fl.forEach(Ny)}function qc(t,n){t.blockedOn===n&&(t.blockedOn=null,jh||(jh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,xb)))}var Gc=null;function Ry(t){Gc!==t&&(Gc=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Gc===t&&(Gc=null);for(var n=0;n<t.length;n+=3){var i=t[n],l=t[n+1],u=t[n+2];if(typeof l!="function"){if(Ch(l||i)===null)continue;break}var f=Bn(i);f!==null&&(t.splice(n,3),n-=3,Rd(f,{pending:!0,data:u,method:i.method,action:l},l,u))}}))}function Cr(t){function n(O){return qc(O,t)}Bi!==null&&qc(Bi,t),Pi!==null&&qc(Pi,t),qi!==null&&qc(qi,t),Hl.forEach(n),Fl.forEach(n);for(var i=0;i<Gi.length;i++){var l=Gi[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Gi.length&&(i=Gi[0],i.blockedOn===null);)wy(i),i.blockedOn===null&&Gi.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var u=i[l],f=i[l+1],v=u[nn]||null;if(typeof f=="function")v||Ry(i);else if(v){var T=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[nn]||null)T=v.formAction;else if(Ch(u)!==null)continue}else T=v.action;typeof T=="function"?i[l+1]=T:(i.splice(l,3),l-=3),Ry(i)}}}function Cy(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Ih(t){this._internalRoot=t}Hc.prototype.render=Ih.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,l=Un();_y(i,l,t,n,null,null)},Hc.prototype.unmount=Ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;_y(t.current,2,null,t,null,null),Sc(),n[vs]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var n=So();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Gi.length&&n!==0&&n<Gi[i].priority;i++);Gi.splice(i,0,t),i===0&&wy(t)}};var jy=e.version;if(jy!=="19.2.0")throw Error(r(527,jy,"19.2.0"));H.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(n),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var vb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Rt=Fc.inject(vb),xe=Fc}catch{}}return Xl.createRoot=function(t,n){if(!o(t))throw Error(r(299));var i=!1,l="",u=kg,f=Ug,v=Lg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=xy(t,1,!1,null,null,i,l,null,u,f,v,Cy),t[vs]=n.current,hh(t),new Ih(n)},Xl.hydrateRoot=function(t,n,i){if(!o(t))throw Error(r(299));var l=!1,u="",f=kg,v=Ug,T=Lg,O=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),n=xy(t,1,!0,n,i??null,l,u,O,f,v,T,Cy),n.context=vy(null),i=n.current,l=Un(),l=oa(l),u=Ri(l),u.callback=null,Ci(i,u,l),i=l,n.current.lanes=i,ra(n,i),Os(n),t[vs]=n.current,hh(t),new Hc(n)},Xl.version="19.2.0",Xl}var By;function jb(){if(By)return Vh.exports;By=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Vh.exports=Cb(),Vh.exports}var Ib=jb();const Db=e0(Ib),Mb=()=>{};var Py={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=function(a){const e=[];let s=0;for(let r=0;r<a.length;r++){let o=a.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(a.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},Vb=function(a){const e=[];let s=0,r=0;for(;s<a.length;){const o=a[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const d=a[s++];e[r++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=a[s++],m=a[s++],p=a[s++],x=((o&7)<<18|(d&63)<<12|(m&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(x>>10)),e[r++]=String.fromCharCode(56320+(x&1023))}else{const d=a[s++],m=a[s++];e[r++]=String.fromCharCode((o&15)<<12|(d&63)<<6|m&63)}}return e.join("")},s0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<a.length;o+=3){const d=a[o],m=o+1<a.length,p=m?a[o+1]:0,x=o+2<a.length,y=x?a[o+2]:0,b=d>>2,E=(d&3)<<4|p>>4;let R=(p&15)<<2|y>>6,B=y&63;x||(B=64,m||(R=64)),r.push(s[b],s[E],s[R],s[B])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(n0(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Vb(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<a.length;){const d=s[a.charAt(o++)],p=o<a.length?s[a.charAt(o)]:0;++o;const y=o<a.length?s[a.charAt(o)]:64;++o;const E=o<a.length?s[a.charAt(o)]:64;if(++o,d==null||p==null||y==null||E==null)throw new Ob;const R=d<<2|p>>4;if(r.push(R),y!==64){const B=p<<4&240|y>>2;if(r.push(B),E!==64){const it=y<<6&192|E;r.push(it)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class Ob extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zb=function(a){const e=n0(a);return s0.encodeByteArray(e,!0)},iu=function(a){return zb(a).replace(/\./g,"")},kb=function(a){try{return s0.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=()=>Ub().__FIREBASE_DEFAULTS__,Bb=()=>{if(typeof process>"u"||typeof Py>"u")return;const a=Py.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},Pb=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&kb(a[1]);return e&&JSON.parse(e)},Sf=()=>{try{return Mb()||Lb()||Bb()||Pb()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},qb=a=>{var e,s;return(s=(e=Sf())==null?void 0:e.emulatorHosts)==null?void 0:s[a]},Gb=a=>{const e=qb(a);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},i0=()=>{var a;return(a=Sf())==null?void 0:a.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fb(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=a.iat||0,d=a.sub||a.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...a};return[iu(JSON.stringify(s)),iu(JSON.stringify(m)),""].join(".")}const Wl={};function Yb(){const a={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?a.emulator.push(e):a.prod.push(e);return a}function Xb(a){let e=document.getElementById(a),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),s=!0),{created:s,element:e}}let qy=!1;function Kb(a,e){if(typeof window>"u"||typeof document>"u"||!Af(window.location.host)||Wl[a]===e||Wl[a]||qy)return;Wl[a]=e;function s(R){return`__firebase__banner__${R}`}const r="__firebase__banner",d=Yb().prod.length>0;function m(){const R=document.getElementById(r);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function x(R,B){R.setAttribute("width","24"),R.setAttribute("id",B),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{qy=!0,m()},R}function b(R,B){R.setAttribute("id",B),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function E(){const R=Xb(r),B=s("text"),it=document.getElementById(B)||document.createElement("span"),F=s("learnmore"),D=document.getElementById(F)||document.createElement("a"),Q=s("preprendIcon"),Z=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const Y=R.element;p(Y),b(D,F);const rt=y();x(Z,Q),Y.append(Z,it,D,rt),document.body.appendChild(Y)}d?(it.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,it.innerText="Preview backend running in this workspace."),it.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zb(){var e;const a=(e=Sf())==null?void 0:e.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jb(){return!Zb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wb(){try{return typeof indexedDB=="object"}catch{return!1}}function t1(){return new Promise((a,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),a(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{var d;e(((d=o.error)==null?void 0:d.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="FirebaseError";class Gr extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=e1,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a0.prototype.create)}}class a0{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],m=d?n1(d,r):"Error",p=`${this.serviceName}: ${m} (${o}).`;return new Gr(o,p,r)}}function n1(a,e){return a.replace(s1,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const s1=/\{\$([^}]+)}/g;function au(a,e){if(a===e)return!0;const s=Object.keys(a),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const d=a[o],m=e[o];if(Gy(d)&&Gy(m)){if(!au(d,m))return!1}else if(d!==m)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Gy(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(a){return a&&a._delegate?a._delegate:a}class io{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new Hb;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r1(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});r.resolve(d)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[d,m]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);r===p&&m.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const d=this.instances.get(r);return d&&e(d,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a1(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a1(a){return a===Ma?void 0:a}function r1(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new i1(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(ne||(ne={}));const o1={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},c1=ne.INFO,u1={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},d1=(a,e,...s)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),o=u1[e];if(o)console[o](`[${r}]  ${a.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r0{constructor(e){this.name=e,this._logLevel=c1,this._logHandler=d1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const h1=(a,e)=>e.some(s=>a instanceof s);let Hy,Fy;function f1(){return Hy||(Hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m1(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l0=new WeakMap,Xh=new WeakMap,o0=new WeakMap,Uh=new WeakMap,wf=new WeakMap;function g1(a){const e=new Promise((s,r)=>{const o=()=>{a.removeEventListener("success",d),a.removeEventListener("error",m)},d=()=>{s(Qi(a.result)),o()},m=()=>{r(a.error),o()};a.addEventListener("success",d),a.addEventListener("error",m)});return e.then(s=>{s instanceof IDBCursor&&l0.set(s,a)}).catch(()=>{}),wf.set(e,a),e}function p1(a){if(Xh.has(a))return;const e=new Promise((s,r)=>{const o=()=>{a.removeEventListener("complete",d),a.removeEventListener("error",m),a.removeEventListener("abort",m)},d=()=>{s(),o()},m=()=>{r(a.error||new DOMException("AbortError","AbortError")),o()};a.addEventListener("complete",d),a.addEventListener("error",m),a.addEventListener("abort",m)});Xh.set(a,e)}let Kh={get(a,e,s){if(a instanceof IDBTransaction){if(e==="done")return Xh.get(a);if(e==="objectStoreNames")return a.objectStoreNames||o0.get(a);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Qi(a[e])},set(a,e,s){return a[e]=s,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function y1(a){Kh=a(Kh)}function x1(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=a.call(Lh(this),e,...s);return o0.set(r,e.sort?e.sort():[e]),Qi(r)}:m1().includes(a)?function(...e){return a.apply(Lh(this),e),Qi(l0.get(this))}:function(...e){return Qi(a.apply(Lh(this),e))}}function v1(a){return typeof a=="function"?x1(a):(a instanceof IDBTransaction&&p1(a),h1(a,f1())?new Proxy(a,Kh):a)}function Qi(a){if(a instanceof IDBRequest)return g1(a);if(Uh.has(a))return Uh.get(a);const e=v1(a);return e!==a&&(Uh.set(a,e),wf.set(e,a)),e}const Lh=a=>wf.get(a);function _1(a,e,{blocked:s,upgrade:r,blocking:o,terminated:d}={}){const m=indexedDB.open(a,e),p=Qi(m);return r&&m.addEventListener("upgradeneeded",x=>{r(Qi(m.result),x.oldVersion,x.newVersion,Qi(m.transaction),x)}),s&&m.addEventListener("blocked",x=>s(x.oldVersion,x.newVersion,x)),p.then(x=>{d&&x.addEventListener("close",()=>d()),o&&x.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const b1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],Bh=new Map;function Qy(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Bh.get(e))return Bh.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=E1.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||b1.includes(s)))return;const d=async function(m,...p){const x=this.transaction(m,o?"readwrite":"readonly");let y=x.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&x.done]))[0]};return Bh.set(e,d),d}y1(a=>({...a,get:(e,s,r)=>Qy(e,s)||a.get(e,s,r),has:(e,s)=>!!Qy(e,s)||a.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(S1(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function S1(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $h="@firebase/app",Yy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new r0("@firebase/app"),A1="@firebase/app-compat",w1="@firebase/analytics-compat",N1="@firebase/analytics",R1="@firebase/app-check-compat",C1="@firebase/app-check",j1="@firebase/auth",I1="@firebase/auth-compat",D1="@firebase/database",M1="@firebase/data-connect",V1="@firebase/database-compat",O1="@firebase/functions",z1="@firebase/functions-compat",k1="@firebase/installations",U1="@firebase/installations-compat",L1="@firebase/messaging",B1="@firebase/messaging-compat",P1="@firebase/performance",q1="@firebase/performance-compat",G1="@firebase/remote-config",H1="@firebase/remote-config-compat",F1="@firebase/storage",Q1="@firebase/storage-compat",Y1="@firebase/firestore",X1="@firebase/ai",K1="@firebase/firestore-compat",$1="firebase",Z1="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",J1={[$h]:"fire-core",[A1]:"fire-core-compat",[N1]:"fire-analytics",[w1]:"fire-analytics-compat",[C1]:"fire-app-check",[R1]:"fire-app-check-compat",[j1]:"fire-auth",[I1]:"fire-auth-compat",[D1]:"fire-rtdb",[M1]:"fire-data-connect",[V1]:"fire-rtdb-compat",[O1]:"fire-fn",[z1]:"fire-fn-compat",[k1]:"fire-iid",[U1]:"fire-iid-compat",[L1]:"fire-fcm",[B1]:"fire-fcm-compat",[P1]:"fire-perf",[q1]:"fire-perf-compat",[G1]:"fire-rc",[H1]:"fire-rc-compat",[F1]:"fire-gcs",[Q1]:"fire-gcs-compat",[Y1]:"fire-fst",[K1]:"fire-fst-compat",[X1]:"fire-vertex","fire-js":"fire-js",[$1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,W1=new Map,Jh=new Map;function Xy(a,e){try{a.container.addComponent(e)}catch(s){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,s)}}function lu(a){const e=a.name;if(Jh.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,a);for(const s of ru.values())Xy(s,a);for(const s of W1.values())Xy(s,a);return!0}function t2(a,e){const s=a.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),a.container.getProvider(e)}function e2(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new a0("app","Firebase",n2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=Z1;function c0(a,e={}){let s=a;typeof e!="object"&&(e={name:e});const r={name:Zh,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Yi.create("bad-app-name",{appName:String(o)});if(s||(s=i0()),!s)throw Yi.create("no-options");const d=ru.get(o);if(d){if(au(s,d.options)&&au(r,d.config))return d;throw Yi.create("duplicate-app",{appName:o})}const m=new l1(o);for(const x of Jh.values())m.addComponent(x);const p=new s2(s,r,m);return ru.set(o,p),p}function a2(a=Zh){const e=ru.get(a);if(!e&&a===Zh&&i0())return c0();if(!e)throw Yi.create("no-app",{appName:a});return e}function Vr(a,e,s){let r=J1[a]??a;s&&(r+=`-${s}`);const o=r.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const m=[`Unable to register library "${r}" with version "${e}":`];o&&m.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(m.join(" "));return}lu(new io(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="firebase-heartbeat-database",l2=1,ao="firebase-heartbeat-store";let Ph=null;function u0(){return Ph||(Ph=_1(r2,l2,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(ao)}catch(s){console.warn(s)}}}}).catch(a=>{throw Yi.create("idb-open",{originalErrorMessage:a.message})})),Ph}async function o2(a){try{const s=(await u0()).transaction(ao),r=await s.objectStore(ao).get(d0(a));return await s.done,r}catch(e){if(e instanceof Gr)ci.warn(e.message);else{const s=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(s.message)}}}async function Ky(a,e){try{const r=(await u0()).transaction(ao,"readwrite");await r.objectStore(ao).put(e,d0(a)),await r.done}catch(s){if(s instanceof Gr)ci.warn(s.message);else{const r=Yi.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});ci.warn(r.message)}}}function d0(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1024,u2=30;class d2{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new f2(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=$y();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(m=>m.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:o}),this._heartbeatsCache.heartbeats.length>u2){const m=m2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=$y(),{heartbeatsToSend:r,unsentEntries:o}=h2(this._heartbeatsCache.heartbeats),d=iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(s){return ci.warn(s),""}}}function $y(){return new Date().toISOString().substring(0,10)}function h2(a,e=c2){const s=[];let r=a.slice();for(const o of a){const d=s.find(m=>m.agent===o.agent);if(d){if(d.dates.push(o.date),Zy(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Zy(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class f2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wb()?t1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await o2(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zy(a){return iu(JSON.stringify({version:2,heartbeats:a})).length}function m2(a){if(a.length===0)return-1;let e=0,s=a[0].date;for(let r=1;r<a.length;r++)a[r].date<s&&(s=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(a){lu(new io("platform-logger",e=>new T1(e),"PRIVATE")),lu(new io("heartbeat",e=>new d2(e),"PRIVATE")),Vr($h,Yy,a),Vr($h,Yy,"esm2020"),Vr("fire-js","")}g2("");var p2="firebase",y2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(p2,y2,"app");var Jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xi,h0;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function N(){}N.prototype=w.prototype,A.F=w.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(V,M,z){for(var I=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)I[wt-2]=arguments[wt];return w.prototype[M].apply(V,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,w,N){N||(N=0);const V=Array(16);if(typeof w=="string")for(var M=0;M<16;++M)V[M]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(M=0;M<16;++M)V[M]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=A.g[0],N=A.g[1],M=A.g[2];let z=A.g[3],I;I=w+(z^N&(M^z))+V[0]+3614090360&4294967295,w=N+(I<<7&4294967295|I>>>25),I=z+(M^w&(N^M))+V[1]+3905402710&4294967295,z=w+(I<<12&4294967295|I>>>20),I=M+(N^z&(w^N))+V[2]+606105819&4294967295,M=z+(I<<17&4294967295|I>>>15),I=N+(w^M&(z^w))+V[3]+3250441966&4294967295,N=M+(I<<22&4294967295|I>>>10),I=w+(z^N&(M^z))+V[4]+4118548399&4294967295,w=N+(I<<7&4294967295|I>>>25),I=z+(M^w&(N^M))+V[5]+1200080426&4294967295,z=w+(I<<12&4294967295|I>>>20),I=M+(N^z&(w^N))+V[6]+2821735955&4294967295,M=z+(I<<17&4294967295|I>>>15),I=N+(w^M&(z^w))+V[7]+4249261313&4294967295,N=M+(I<<22&4294967295|I>>>10),I=w+(z^N&(M^z))+V[8]+1770035416&4294967295,w=N+(I<<7&4294967295|I>>>25),I=z+(M^w&(N^M))+V[9]+2336552879&4294967295,z=w+(I<<12&4294967295|I>>>20),I=M+(N^z&(w^N))+V[10]+4294925233&4294967295,M=z+(I<<17&4294967295|I>>>15),I=N+(w^M&(z^w))+V[11]+2304563134&4294967295,N=M+(I<<22&4294967295|I>>>10),I=w+(z^N&(M^z))+V[12]+1804603682&4294967295,w=N+(I<<7&4294967295|I>>>25),I=z+(M^w&(N^M))+V[13]+4254626195&4294967295,z=w+(I<<12&4294967295|I>>>20),I=M+(N^z&(w^N))+V[14]+2792965006&4294967295,M=z+(I<<17&4294967295|I>>>15),I=N+(w^M&(z^w))+V[15]+1236535329&4294967295,N=M+(I<<22&4294967295|I>>>10),I=w+(M^z&(N^M))+V[1]+4129170786&4294967295,w=N+(I<<5&4294967295|I>>>27),I=z+(N^M&(w^N))+V[6]+3225465664&4294967295,z=w+(I<<9&4294967295|I>>>23),I=M+(w^N&(z^w))+V[11]+643717713&4294967295,M=z+(I<<14&4294967295|I>>>18),I=N+(z^w&(M^z))+V[0]+3921069994&4294967295,N=M+(I<<20&4294967295|I>>>12),I=w+(M^z&(N^M))+V[5]+3593408605&4294967295,w=N+(I<<5&4294967295|I>>>27),I=z+(N^M&(w^N))+V[10]+38016083&4294967295,z=w+(I<<9&4294967295|I>>>23),I=M+(w^N&(z^w))+V[15]+3634488961&4294967295,M=z+(I<<14&4294967295|I>>>18),I=N+(z^w&(M^z))+V[4]+3889429448&4294967295,N=M+(I<<20&4294967295|I>>>12),I=w+(M^z&(N^M))+V[9]+568446438&4294967295,w=N+(I<<5&4294967295|I>>>27),I=z+(N^M&(w^N))+V[14]+3275163606&4294967295,z=w+(I<<9&4294967295|I>>>23),I=M+(w^N&(z^w))+V[3]+4107603335&4294967295,M=z+(I<<14&4294967295|I>>>18),I=N+(z^w&(M^z))+V[8]+1163531501&4294967295,N=M+(I<<20&4294967295|I>>>12),I=w+(M^z&(N^M))+V[13]+2850285829&4294967295,w=N+(I<<5&4294967295|I>>>27),I=z+(N^M&(w^N))+V[2]+4243563512&4294967295,z=w+(I<<9&4294967295|I>>>23),I=M+(w^N&(z^w))+V[7]+1735328473&4294967295,M=z+(I<<14&4294967295|I>>>18),I=N+(z^w&(M^z))+V[12]+2368359562&4294967295,N=M+(I<<20&4294967295|I>>>12),I=w+(N^M^z)+V[5]+4294588738&4294967295,w=N+(I<<4&4294967295|I>>>28),I=z+(w^N^M)+V[8]+2272392833&4294967295,z=w+(I<<11&4294967295|I>>>21),I=M+(z^w^N)+V[11]+1839030562&4294967295,M=z+(I<<16&4294967295|I>>>16),I=N+(M^z^w)+V[14]+4259657740&4294967295,N=M+(I<<23&4294967295|I>>>9),I=w+(N^M^z)+V[1]+2763975236&4294967295,w=N+(I<<4&4294967295|I>>>28),I=z+(w^N^M)+V[4]+1272893353&4294967295,z=w+(I<<11&4294967295|I>>>21),I=M+(z^w^N)+V[7]+4139469664&4294967295,M=z+(I<<16&4294967295|I>>>16),I=N+(M^z^w)+V[10]+3200236656&4294967295,N=M+(I<<23&4294967295|I>>>9),I=w+(N^M^z)+V[13]+681279174&4294967295,w=N+(I<<4&4294967295|I>>>28),I=z+(w^N^M)+V[0]+3936430074&4294967295,z=w+(I<<11&4294967295|I>>>21),I=M+(z^w^N)+V[3]+3572445317&4294967295,M=z+(I<<16&4294967295|I>>>16),I=N+(M^z^w)+V[6]+76029189&4294967295,N=M+(I<<23&4294967295|I>>>9),I=w+(N^M^z)+V[9]+3654602809&4294967295,w=N+(I<<4&4294967295|I>>>28),I=z+(w^N^M)+V[12]+3873151461&4294967295,z=w+(I<<11&4294967295|I>>>21),I=M+(z^w^N)+V[15]+530742520&4294967295,M=z+(I<<16&4294967295|I>>>16),I=N+(M^z^w)+V[2]+3299628645&4294967295,N=M+(I<<23&4294967295|I>>>9),I=w+(M^(N|~z))+V[0]+4096336452&4294967295,w=N+(I<<6&4294967295|I>>>26),I=z+(N^(w|~M))+V[7]+1126891415&4294967295,z=w+(I<<10&4294967295|I>>>22),I=M+(w^(z|~N))+V[14]+2878612391&4294967295,M=z+(I<<15&4294967295|I>>>17),I=N+(z^(M|~w))+V[5]+4237533241&4294967295,N=M+(I<<21&4294967295|I>>>11),I=w+(M^(N|~z))+V[12]+1700485571&4294967295,w=N+(I<<6&4294967295|I>>>26),I=z+(N^(w|~M))+V[3]+2399980690&4294967295,z=w+(I<<10&4294967295|I>>>22),I=M+(w^(z|~N))+V[10]+4293915773&4294967295,M=z+(I<<15&4294967295|I>>>17),I=N+(z^(M|~w))+V[1]+2240044497&4294967295,N=M+(I<<21&4294967295|I>>>11),I=w+(M^(N|~z))+V[8]+1873313359&4294967295,w=N+(I<<6&4294967295|I>>>26),I=z+(N^(w|~M))+V[15]+4264355552&4294967295,z=w+(I<<10&4294967295|I>>>22),I=M+(w^(z|~N))+V[6]+2734768916&4294967295,M=z+(I<<15&4294967295|I>>>17),I=N+(z^(M|~w))+V[13]+1309151649&4294967295,N=M+(I<<21&4294967295|I>>>11),I=w+(M^(N|~z))+V[4]+4149444226&4294967295,w=N+(I<<6&4294967295|I>>>26),I=z+(N^(w|~M))+V[11]+3174756917&4294967295,z=w+(I<<10&4294967295|I>>>22),I=M+(w^(z|~N))+V[2]+718787259&4294967295,M=z+(I<<15&4294967295|I>>>17),I=N+(z^(M|~w))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.v=function(A,w){w===void 0&&(w=A.length);const N=w-this.blockSize,V=this.C;let M=this.h,z=0;for(;z<w;){if(M==0)for(;z<=N;)o(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<w;)if(V[M++]=A.charCodeAt(z++),M==this.blockSize){o(this,V),M=0;break}}else for(;z<w;)if(V[M++]=A[z++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=w},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;w=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=w&255,w/=256;for(this.v(A),A=Array(16),w=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)A[w++]=this.g[N]>>>V&255;return A};function d(A,w){var N=p;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=w(A)}function m(A,w){this.h=w;const N=[];let V=!0;for(let M=A.length-1;M>=0;M--){const z=A[M]|0;V&&z==w||(N[M]=z,V=!1)}this.g=N}var p={};function x(A){return-128<=A&&A<128?d(A,function(w){return new m([w|0],w<0?-1:0)}):new m([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return D(y(-A));const w=[];let N=1;for(let V=0;A>=N;V++)w[V]=A/N|0,N*=4294967296;return new m(w,0)}function b(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return D(b(A.substring(1),w));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(w,8));let V=E;for(let z=0;z<A.length;z+=8){var M=Math.min(8,A.length-z);const I=parseInt(A.substring(z,z+M),w);M<8?(M=y(Math.pow(w,M)),V=V.j(M).add(y(I))):(V=V.j(N),V=V.add(y(I)))}return V}var E=x(0),R=x(1),B=x(16777216);a=m.prototype,a.m=function(){if(F(this))return-D(this).m();let A=0,w=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);A+=(V>=0?V:4294967296+V)*w,w*=4294967296}return A},a.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(it(this))return"0";if(F(this))return"-"+D(this).toString(A);const w=y(Math.pow(A,6));var N=this;let V="";for(;;){const M=rt(N,w).g;N=Q(N,M.j(w));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=M,it(N))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},a.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function it(A){if(A.h!=0)return!1;for(let w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function F(A){return A.h==-1}a.l=function(A){return A=Q(this,A),F(A)?-1:it(A)?0:1};function D(A){const w=A.g.length,N=[];for(let V=0;V<w;V++)N[V]=~A.g[V];return new m(N,~A.h).add(R)}a.abs=function(){return F(this)?D(this):this},a.add=function(A){const w=Math.max(this.g.length,A.g.length),N=[];let V=0;for(let M=0;M<=w;M++){let z=V+(this.i(M)&65535)+(A.i(M)&65535),I=(z>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);V=I>>>16,z&=65535,I&=65535,N[M]=I<<16|z}return new m(N,N[N.length-1]&-2147483648?-1:0)};function Q(A,w){return A.add(D(w))}a.j=function(A){if(it(this)||it(A))return E;if(F(this))return F(A)?D(this).j(D(A)):D(D(this).j(A));if(F(A))return D(this.j(D(A)));if(this.l(B)<0&&A.l(B)<0)return y(this.m()*A.m());const w=this.g.length+A.g.length,N=[];for(var V=0;V<2*w;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<A.g.length;M++){const z=this.i(V)>>>16,I=this.i(V)&65535,wt=A.i(M)>>>16,St=A.i(M)&65535;N[2*V+2*M]+=I*St,Z(N,2*V+2*M),N[2*V+2*M+1]+=z*St,Z(N,2*V+2*M+1),N[2*V+2*M+1]+=I*wt,Z(N,2*V+2*M+1),N[2*V+2*M+2]+=z*wt,Z(N,2*V+2*M+2)}for(A=0;A<w;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=w;A<2*w;A++)N[A]=0;return new m(N,0)};function Z(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function Y(A,w){this.g=A,this.h=w}function rt(A,w){if(it(w))throw Error("division by zero");if(it(A))return new Y(E,E);if(F(A))return w=rt(D(A),w),new Y(D(w.g),D(w.h));if(F(w))return w=rt(A,D(w)),new Y(D(w.g),w.h);if(A.g.length>30){if(F(A)||F(w))throw Error("slowDivide_ only works with positive integers.");for(var N=R,V=w;V.l(A)<=0;)N=gt(N),V=gt(V);var M=yt(N,1),z=yt(V,1);for(V=yt(V,2),N=yt(N,2);!it(V);){var I=z.add(V);I.l(A)<=0&&(M=M.add(N),z=I),V=yt(V,1),N=yt(N,1)}return w=Q(A,M.j(w)),new Y(M,w)}for(M=E;A.l(w)>=0;){for(N=Math.max(1,Math.floor(A.m()/w.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=y(N),I=z.j(w);F(I)||I.l(A)>0;)N-=V,z=y(N),I=z.j(w);it(z)&&(z=R),M=M.add(z),A=Q(A,I)}return new Y(M,A)}a.B=function(A){return rt(this,A).h},a.and=function(A){const w=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<w;V++)N[V]=this.i(V)&A.i(V);return new m(N,this.h&A.h)},a.or=function(A){const w=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<w;V++)N[V]=this.i(V)|A.i(V);return new m(N,this.h|A.h)},a.xor=function(A){const w=Math.max(this.g.length,A.g.length),N=[];for(let V=0;V<w;V++)N[V]=this.i(V)^A.i(V);return new m(N,this.h^A.h)};function gt(A){const w=A.g.length+1,N=[];for(let V=0;V<w;V++)N[V]=A.i(V)<<1|A.i(V-1)>>>31;return new m(N,A.h)}function yt(A,w){const N=w>>5;w%=32;const V=A.g.length-N,M=[];for(let z=0;z<V;z++)M[z]=w>0?A.i(z+N)>>>w|A.i(z+N+1)<<32-w:A.i(z+N);return new m(M,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,h0=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=y,m.fromString=b,Xi=m}).apply(typeof Jy<"u"?Jy:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f0,Kl,m0,Zc,Wh,g0,p0,y0;(function(){var a,e=Object.defineProperty;function s(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=s(this);function o(c,g){if(g)t:{var _=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var X=c[S];if(!(X in _))break t;_=_[X]}c=c[c.length-1],S=_[c],g=g(S),g!=S&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(g){var _=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&_.push([S,g[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function x(c,g,_){return c.call.apply(c.bind,arguments)}function y(c,g,_){return y=x,y.apply(null,arguments)}function b(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function E(c,g){function _(){}_.prototype=g.prototype,c.Z=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(S,X,et){for(var xt=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)xt[qt-2]=arguments[qt];return g.prototype[X].apply(S,xt)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function B(c){const g=c.length;if(g>0){const _=Array(g);for(let S=0;S<g;S++)_[S]=c[S];return _}return[]}function it(c,g){for(let S=1;S<arguments.length;S++){const X=arguments[S];var _=typeof X;if(_=_!="object"?_:X?Array.isArray(X)?"array":_:"null",_=="array"||_=="object"&&typeof X.length=="number"){_=c.length||0;const et=X.length||0;c.length=_+et;for(let xt=0;xt<et;xt++)c[_+xt]=X[xt]}else c.push(X)}}class F{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function D(c){m.setTimeout(()=>{throw c},0)}function Q(){var c=A;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,_){const S=Y.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Y=new F(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,yt=!1,A=new Z,w=()=>{const c=Promise.resolve(void 0);gt=()=>{c.then(N)}};function N(){for(var c;c=Q();){try{c.h.call(c.g)}catch(_){D(_)}var g=Y;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}yt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c})();function I(c){return/^[\s\xa0]*$/.test(c)}function wt(c,g){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}E(wt,M),wt.prototype.init=function(c,g){const _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(_=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&wt.Z.h.call(this)},wt.prototype.h=function(){wt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),tt=0;function H(c,g,_,S,X){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=X,this.key=++tt,this.da=this.fa=!1}function q(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function L(c,g,_){for(const S in c)g.call(_,c[S],S,c)}function J(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function C(c){const g={};for(const _ in c)g[_]=c[_];return g}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,g){let _,S;for(let X=1;X<arguments.length;X++){S=arguments[X];for(_ in S)c[_]=S[_];for(let et=0;et<j.length;et++)_=j[et],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function P(c){this.src=c,this.g={},this.h=0}P.prototype.add=function(c,g,_,S,X){const et=c.toString();c=this.g[et],c||(c=this.g[et]=[],this.h++);const xt=st(c,g,S,X);return xt>-1?(g=c[xt],_||(g.fa=!1)):(g=new H(g,this.src,et,!!S,X),g.fa=_,c.push(g)),g};function ct(c,g){const _=g.type;if(_ in c.g){var S=c.g[_],X=Array.prototype.indexOf.call(S,g,void 0),et;(et=X>=0)&&Array.prototype.splice.call(S,X,1),et&&(q(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function st(c,g,_,S){for(let X=0;X<c.length;++X){const et=c[X];if(!et.da&&et.listener==g&&et.capture==!!_&&et.ha==S)return X}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),Nt={};function At(c,g,_,S,X){if(Array.isArray(g)){for(let et=0;et<g.length;et++)At(c,g[et],_,S,X);return null}return _=te(_),c&&c[St]?c.J(g,_,p(S)?!!S.capture:!1,X):Ut(c,g,_,!1,S,X)}function Ut(c,g,_,S,X,et){if(!g)throw Error("Invalid event type");const xt=p(X)?!!X.capture:!!X;let qt=kt(c);if(qt||(c[pt]=qt=new P(c)),_=qt.add(g,_,S,xt,et),_.proxy)return _;if(S=re(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)z||(X=xt),X===void 0&&(X=!1),c.addEventListener(g.toString(),S,X);else if(c.attachEvent)c.attachEvent(vt(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function re(){function c(_){return g.call(c.src,c.listener,_)}const g=zt;return c}function je(c,g,_,S,X){if(Array.isArray(g))for(var et=0;et<g.length;et++)je(c,g[et],_,S,X);else S=p(S)?!!S.capture:!!S,_=te(_),c&&c[St]?(c=c.i,et=String(g).toString(),et in c.g&&(g=c.g[et],_=st(g,_,S,X),_>-1&&(q(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete c.g[et],c.h--)))):c&&(c=kt(c))&&(g=c.g[g.toString()],c=-1,g&&(c=st(g,_,S,X)),(_=c>-1?g[c]:null)&&ft(_))}function ft(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[St])ct(g.i,c);else{var _=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(_,S,c.capture):g.detachEvent?g.detachEvent(vt(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=kt(g))?(ct(_,c),_.h==0&&(_.src=null,g[pt]=null)):q(c)}}}function vt(c){return c in Nt?Nt[c]:Nt[c]="on"+c}function zt(c,g){if(c.da)c=!0;else{g=new wt(g,this);const _=c.listener,S=c.ha||c.src;c.fa&&ft(c),c=_.call(S,g)}return c}function kt(c){return c=c[pt],c instanceof P?c:null}var ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(c){return typeof c=="function"?c:(c[ce]||(c[ce]=function(g){return c.handleEvent(g)}),c[ce])}function Ft(){V.call(this),this.i=new P(this),this.M=this,this.G=null}E(Ft,V),Ft.prototype[St]=!0,Ft.prototype.removeEventListener=function(c,g,_,S){je(this,c,g,_,S)};function fe(c,g){var _,S=c.G;if(S)for(_=[];S;S=S.G)_.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new M(g,c);else if(g instanceof M)g.target=g.target||c;else{var X=g;g=new M(S,c),k(g,X)}X=!0;let et,xt;if(_)for(xt=_.length-1;xt>=0;xt--)et=g.g=_[xt],X=Ie(et,S,!0,g)&&X;if(et=g.g=c,X=Ie(et,S,!0,g)&&X,X=Ie(et,S,!1,g)&&X,_)for(xt=0;xt<_.length;xt++)et=g.g=_[xt],X=Ie(et,S,!1,g)&&X}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const _=c.g[g];for(let S=0;S<_.length;S++)q(_[S]);delete c.g[g],c.h--}}this.G=null},Ft.prototype.J=function(c,g,_,S){return this.i.add(String(c),g,!1,_,S)},Ft.prototype.K=function(c,g,_,S){return this.i.add(String(c),g,!0,_,S)};function Ie(c,g,_,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let X=!0;for(let et=0;et<g.length;++et){const xt=g[et];if(xt&&!xt.da&&xt.capture==_){const qt=xt.listener,Oe=xt.ha||xt.src;xt.fa&&ct(c.i,xt),X=qt.call(Oe,S)!==!1&&X}}return X&&!S.defaultPrevented}function Wn(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(c,g||0)}function ts(c){c.g=Wn(()=>{c.g=null,c.i&&(c.i=!1,ts(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class We extends V{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ts(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(c){V.call(this),this.h=c,this.g={}}E(ms,V);var hi=[];function fi(c){L(c.g,function(g,_){this.g.hasOwnProperty(_)&&ft(g)},c),c.g={}}ms.prototype.N=function(){ms.Z.N.call(this),fi(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=m.JSON.stringify,ue=m.JSON.parse,ye=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Mt(){}function Dt(){}var Rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xe(){M.call(this,"d")}E(xe,M);function tn(){M.call(this,"c")}E(tn,M);var Ot={},en=null;function Ga(){return en=en||new Ft}Ot.Ia="serverreachability";function Eo(c){M.call(this,Ot.Ia,c)}E(Eo,M);function gs(c){const g=Ga();fe(g,new Eo(g))}Ot.STAT_EVENT="statevent";function aa(c,g){M.call(this,Ot.STAT_EVENT,c),this.stat=g}E(aa,M);function Le(c){const g=Ga();fe(g,new aa(g,c))}Ot.Ja="timingevent";function ps(c,g){M.call(this,Ot.Ja,c),this.size=g}E(ps,M);function ys(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function es(){this.g=!0}es.prototype.ua=function(){this.g=!1};function zu(c,g,_,S,X,et){c.info(function(){if(c.g)if(et){var xt="",qt=et.split("&");for(let le=0;le<qt.length;le++){var Oe=qt[le].split("=");if(Oe.length>1){const Re=Oe[0];Oe=Oe[1];const Gn=Re.split("_");xt=Gn.length>=2&&Gn[1]=="type"?xt+(Re+"="+Oe+"&"):xt+(Re+"=redacted&")}}}else xt=null;else xt=et;return"XMLHTTP REQ ("+S+") [attempt "+X+"]: "+g+`
`+_+`
`+xt})}function To(c,g,_,S,X,et,xt){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+X+"]: "+g+`
`+_+`
`+et+" "+xt})}function xs(c,g,_,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+ku(c,_)+(S?" "+S:"")})}function ra(c,g){c.info(function(){return"TIMEOUT: "+g})}es.prototype.info=function(){};function ku(c,g){if(!c.g)return g;if(!g)return null;try{const et=JSON.parse(g);if(et){for(c=0;c<et.length;c++)if(Array.isArray(et[c])){var _=et[c];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var X=S[0];if(X!="noop"&&X!="stop"&&X!="close")for(let xt=1;xt<S.length;xt++)S[xt]=""}}}}return mt(et)}catch{return g}}var la={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kr;function oa(){}E(oa,Mt),oa.prototype.g=function(){return new XMLHttpRequest},Kr=new oa;function Hs(c){return encodeURIComponent(String(c))}function So(c){var g=1;c=c.split(":");const _=[];for(;g>0&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function ns(c,g,_,S){this.j=c,this.i=g,this.l=_,this.S=S||1,this.V=new ms(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ss}function ss(){this.i=null,this.g="",this.h=!1}var Be={},nn={};function vs(c,g,_){c.M=1,c.A=ca(qe(g)),c.u=_,c.R=!0,Ha(c,null)}function Ha(c,g){c.F=Date.now(),_s(c),c.B=qe(c.A);var _=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Xa(_.i,"t",S),c.C=0,_=c.j.L,c.h=new ss,c.g=Lo(c.j,_?g:null,!c.u),c.P>0&&(c.O=new We(y(c.Y,c,c.g),c.P)),g=c.V,_=c.g,S=c.ba;var X="readystatechange";Array.isArray(X)||(X&&(hi[0]=X.toString()),X=hi);for(let et=0;et<X.length;et++){const xt=At(_,X[et],S||g.handleEvent,!1,g.h||g);if(!xt)break;g.g[xt.key]=xt}g=c.J?C(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),gs(),zu(c.i,c.v,c.B,c.l,c.S,c.u)}ns.prototype.ba=function(c){c=c.target;const g=this.O;g&&rs(c)==3?g.j():this.Y(c)},ns.prototype.Y=function(c){try{if(c==this.g)t:{const qt=rs(this.g),Oe=this.g.ya(),le=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||qt!=4||Oe==7||(Oe==8||le<=0?gs(3):gs(2)),bs(this);var g=this.g.ca();this.X=g;var _=Uu(this);if(this.o=g==200,To(this.i,this.v,this.B,this.l,this.S,qt,g),this.o){if(this.U&&!this.L){e:{if(this.g){var S,X=this.g;if((S=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(S)){var et=S;break e}}et=null}if(c=et)xs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Es(this,c);else{this.o=!1,this.m=3,Le(12),jn(this),Bn(this);break t}}if(this.R){c=!0;let Re;for(;!this.K&&this.C<_.length;)if(Re=wo(this,_),Re==nn){qt==4&&(this.m=4,Le(14),c=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Re==Be){this.m=4,Le(15),xs(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else xs(this.i,this.l,Re,null),Es(this,Re);if(Ao(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||_.length!=0||this.h.h||(this.m=1,Le(16),c=!1),this.o=this.o&&c,!c)xs(this.i,this.l,_,"[Invalid Chunked Response]"),jn(this),Bn(this);else if(_.length>0&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.aa&&!xt.P&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ul(xt),xt.P=!0,Le(11))}}else xs(this.i,this.l,_,null),Es(this,_);qt==4&&jn(this),this.o&&!this.K&&(qt==4?Oo(this.j,this):(this.o=!1,_s(this)))}else Qs(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),jn(this),Bn(this)}}}catch{}finally{}};function Uu(c){if(!Ao(c))return c.g.la();const g=ln(c.g);if(g==="")return"";let _="";const S=g.length,X=rs(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return jn(c),Bn(c),"";c.h.i=new m.TextDecoder}for(let et=0;et<S;et++)c.h.h=!0,_+=c.h.i.decode(g[et],{stream:!(X&&et==S-1)});return g.length=0,c.h.g+=_,c.C=0,c.h.g}function Ao(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function wo(c,g){var _=c.C,S=g.indexOf(`
`,_);return S==-1?nn:(_=Number(g.substring(_,S)),isNaN(_)?Be:(S+=1,S+_>g.length?nn:(g=g.slice(S,S+_),c.C=S+_,g)))}ns.prototype.cancel=function(){this.K=!0,jn(this)};function _s(c){c.T=Date.now()+c.H,Fa(c,c.H)}function Fa(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ys(y(c.aa,c),g)}function bs(c){c.D&&(m.clearTimeout(c.D),c.D=null)}ns.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ra(this.i,this.B),this.M!=2&&(gs(),Le(17)),jn(this),this.m=2,Bn(this)):Fa(this,this.T-c)};function Bn(c){c.j.I==0||c.K||Oo(c.j,c)}function jn(c){bs(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,fi(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function Es(c,g){try{var _=c.j;if(_.I!=0&&(_.g==c||Ss(_.h,c))){if(!c.L&&Ss(_.h,c)&&_.I==3){try{var S=_.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var X=S;if(X[0]==0){t:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)Wa(_),bi(_);else break t;pa(_),Le(18)}}else _.xa=X[1],0<_.xa-_.K&&X[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ys(y(_.Va,_),6e3));Ts(_.h)<=1&&_.ta&&(_.ta=void 0)}else js(_,11)}else if((c.L||_.g==c)&&Wa(_),!I(g))for(X=_.Ba.g.parse(g),g=0;g<X.length;g++){let le=X[g];const Re=le[0];if(!(Re<=_.K))if(_.K=Re,le=le[1],_.I==2)if(le[0]=="c"){_.M=le[1],_.ba=le[2];const Gn=le[3];Gn!=null&&(_.ka=Gn,_.j.info("VER="+_.ka));const Is=le[4];Is!=null&&(_.za=Is,_.j.info("SVER="+_.za));const ls=le[5];ls!=null&&typeof ls=="number"&&ls>0&&(S=1.5*ls,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const os=c.g;if(os){const ya=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var et=S.h;et.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(Jr(et,et.h),et.h=null))}if(S.G){const tr=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;tr&&(S.wa=tr,me(S.J,S.G,tr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var xt=c;if(S.na=Uo(S,S.L?S.ba:null,S.W),xt.L){Wr(S.h,xt);var qt=xt,Oe=S.O;Oe&&(qt.H=Oe),qt.D&&(bs(qt),_s(qt)),S.g=xt}else Mo(S);_.i.length>0&&Cs(_)}else le[0]!="stop"&&le[0]!="close"||js(_,7);else _.I==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?js(_,7):ol(_):le[0]!="noop"&&_.l&&_.l.qa(le),_.A=0)}}gs(4)}catch{}}var Pe=class{constructor(c,g){this.g=c,this.map=g}};function $r(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ts(c){return c.h?1:c.g?c.g.size:0}function Ss(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Jr(c,g){c.g?c.g.add(g):c.h=g}function Wr(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}$r.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.G);return g}return B(c.i)}var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(c,g){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const S=c[_].indexOf("=");let X,et=null;S>=0?(X=c[_].substring(0,S),et=c[_].substring(S+1)):X=c[_],g(X,et?decodeURIComponent(et.replace(/\+/g," ")):"")}}}function In(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof In?(this.l=c.l,sn(this,c.j),this.o=c.o,this.g=c.g,mi(this,c.u),this.h=c.h,el(this,Io(c.i)),this.m=c.m):c&&(g=String(c).match(No))?(this.l=!1,sn(this,g[1]||"",!0),this.o=As(g[2]||""),this.g=As(g[3]||"",!0),mi(this,g[4]),this.h=As(g[5]||"",!0),el(this,g[6]||"",!0),this.m=As(g[7]||"")):(this.l=!1,this.i=new pi(null,this.l))}In.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(ua(g,Ya,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ua(g,Ya,!0),"@"),c.push(Hs(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ua(_,_.charAt(0)=="/"?nl:Ro,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ua(_,Co)),c.join("")},In.prototype.resolve=function(c){const g=qe(this);let _=!!c.j;_?sn(g,c.j):_=!!c.o,_?g.o=c.o:_=!!c.g,_?g.g=c.g:_=c.u!=null;var S=c.h;if(_)mi(g,c.u);else if(_=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var X=g.h.lastIndexOf("/");X!=-1&&(S=g.h.slice(0,X+1)+S)}if(X=S,X==".."||X==".")S="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){S=X.lastIndexOf("/",0)==0,X=X.split("/");const et=[];for(let xt=0;xt<X.length;){const qt=X[xt++];qt=="."?S&&xt==X.length&&et.push(""):qt==".."?((et.length>1||et.length==1&&et[0]!="")&&et.pop(),S&&xt==X.length&&et.push("")):(et.push(qt),S=!0)}S=et.join("/")}else S=X}return _?g.h=S:_=c.i.toString()!=="",_?el(g,Io(c.i)):_=!!c.m,_&&(g.m=c.m),g};function qe(c){return new In(c)}function sn(c,g,_){c.j=_?As(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function mi(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function el(c,g,_){g instanceof pi?(c.i=g,Ka(c.i,c.l)):(_||(g=ua(g,gi)),c.i=new pi(g,c.l))}function me(c,g,_){c.i.set(g,_)}function ca(c){return me(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function As(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ua(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,bn),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function bn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ya=/[#\/\?@]/g,Ro=/[#\?:]/g,nl=/[#\?]/g,gi=/[#\?@]/g,Co=/#/g;function pi(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function En(c){c.g||(c.g=new Map,c.h=0,c.i&&Qa(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}a=pi.prototype,a.add=function(c,g){En(this),this.i=null,c=yi(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function jo(c,g){En(c),g=yi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function sl(c,g){return En(c),g=yi(c,g),c.g.has(g)}a.forEach=function(c,g){En(this),this.g.forEach(function(_,S){_.forEach(function(X){c.call(g,X,S,this)},this)},this)};function il(c,g){En(c);let _=[];if(typeof g=="string")sl(c,g)&&(_=_.concat(c.g.get(yi(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)_=_.concat(c[g]);return _}a.set=function(c,g){return En(this),this.i=null,c=yi(this,c),sl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},a.get=function(c,g){return c?(c=il(this,c),c.length>0?String(c[0]):g):g};function Xa(c,g,_){jo(c,g),_.length>0&&(c.i=null,c.g.set(yi(c,g),B(_)),c.h+=_.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var _=g[S];const X=Hs(_);_=il(this,_);for(let et=0;et<_.length;et++){let xt=X;_[et]!==""&&(xt+="="+Hs(_[et])),c.push(xt)}}return this.i=c.join("&")};function Io(c){const g=new pi;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function yi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Ka(c,g){g&&!c.j&&(En(c),c.i=null,c.g.forEach(function(_,S){const X=S.toLowerCase();S!=X&&(jo(this,S),Xa(this,X,_))},c)),c.j=g}function is(c,g){const _=new es;if(m.Image){const S=new Image;S.onload=b(Pn,_,"TestLoadImage: loaded",!0,g,S),S.onerror=b(Pn,_,"TestLoadImage: error",!1,g,S),S.onabort=b(Pn,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=b(Pn,_,"TestLoadImage: timeout",!1,g,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function al(c,g){const _=new es,S=new AbortController,X=setTimeout(()=>{S.abort(),Pn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(et=>{clearTimeout(X),et.ok?Pn(_,"TestPingServer: ok",!0,g):Pn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(X),Pn(_,"TestPingServer: error",!1,g)})}function Pn(c,g,_,S,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),S(_)}catch{}}function xi(){this.g=new ye}function ws(c){this.i=c.Sb||null,this.h=c.ab||!1}E(ws,Mt),ws.prototype.g=function(){return new da(this.i,this.h)};function da(c,g){Ft.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(da,Ft),a=da.prototype,a.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,as(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$a(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function $a(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?vi(this):as(this),this.readyState==3&&$a(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,vi(this))},a.Na=function(c){this.g&&(this.response=c,vi(this))},a.ga=function(){this.g&&vi(this)};function vi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,as(c)}a.setRequestHeader=function(c,g){this.A.append(c,g)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function as(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qn(c){let g="";return L(c,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function ha(c,g,_){t:{for(S in _){var S=!1;break t}S=!0}S||(_=qn(_),typeof c=="string"?_!=null&&Hs(_):me(c,g,_))}function ve(c){Ft.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ve,Ft);var Ns=/^https?$/i,rl=["POST","PUT"];a=ve.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kr.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(et){fa(this,et);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var X in S)_.set(X,S[X]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const et of S.keys())_.set(et,S.get(et));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(et=>et.toLowerCase()=="content-type"),X=m.FormData&&c instanceof m.FormData,!(Array.prototype.indexOf.call(rl,g,void 0)>=0)||S||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,xt]of _)this.g.setRequestHeader(et,xt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(et){fa(this,et)}};function fa(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,ll(c),Fs(c)}function ll(c){c.A||(c.A=!0,fe(c,"complete"),fe(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,fe(this,"complete"),fe(this,"abort"),Fs(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fs(this,!0)),ve.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?ma(this):this.Xa())},a.Xa=function(){ma(this)};function ma(c){if(c.h&&typeof d<"u"){if(c.v&&rs(c)==4)setTimeout(c.Ca.bind(c),0);else if(fe(c,"readystatechange"),rs(c)==4){c.h=!1;try{const et=c.ca();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var _;if(!(_=g)){var S;if(S=et===0){let xt=String(c.D).match(No)[1]||null;!xt&&m.self&&m.self.location&&(xt=m.self.location.protocol.slice(0,-1)),S=!Ns.test(xt?xt.toLowerCase():"")}_=S}if(_)fe(c,"complete"),fe(c,"success");else{c.o=6;try{var X=rs(c)>2?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.ca()+"]",ll(c)}}finally{Fs(c)}}}}function Fs(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,g||fe(c,"ready");try{_.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function rs(c){return c.g?c.g.readyState:0}a.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ue(g)}};function ln(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qs(c){const g={};c=(c.g&&rs(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(I(c[S]))continue;var _=So(c[S]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const et=g[X]||[];g[X]=et,et.push(_)}J(g,function(S){return S.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function _i(c){this.za=0,this.i=[],this.j=new es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rs("baseRetryDelayMs",5e3,c),this.Za=Rs("retryDelaySeedMs",1e4,c),this.Ta=Rs("forwardChannelMaxRetries",2,c),this.va=Rs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new $r(c&&c.concurrentRequestLimit),this.Ba=new xi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=_i.prototype,a.ka=8,a.I=1,a.connect=function(c,g,_,S){Le(0),this.W=c,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=Uo(this,null,this.W),Cs(this)};function ol(c){if(Za(c),c.I==3){var g=c.V++,_=qe(c.J);if(me(_,"SID",c.M),me(_,"RID",g),me(_,"TYPE","terminate"),ga(c,_),g=new ns(c,c.j,g),g.M=2,g.A=ca(qe(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.A,_=!0),_||(g.g=Lo(g.j,null),g.g.ea(g.A)),g.F=Date.now(),_s(g)}ko(c)}function bi(c){c.g&&(ul(c),c.g.cancel(),c.g=null)}function Za(c){bi(c),c.v&&(m.clearTimeout(c.v),c.v=null),Wa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&m.clearTimeout(c.m),c.m=null)}function Cs(c){if(!Zr(c.h)&&!c.m){c.m=!0;var g=c.Ea;gt||w(),yt||(gt(),yt=!0),A.add(g,c),c.D=0}}function Ja(c,g){return Ts(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ys(y(c.Ea,c,g),zo(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const X=new ns(this,this.j,c);let et=this.o;if(this.U&&(et?(et=C(et),k(et,this.U)):et=this.U),this.u!==null||this.R||(X.J=et,et=null),this.S)t:{for(var g=0,_=0;_<this.i.length;_++){e:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=_;break t}if(g===4096||_===this.i.length-1){g=_+1;break t}}g=1e3}else g=1e3;g=Do(this,X,g),_=qe(this.J),me(_,"RID",c),me(_,"CVER",22),this.G&&me(_,"X-HTTP-Session-Id",this.G),ga(this,_),et&&(this.R?g="headers="+Hs(qn(et))+"&"+g:this.u&&ha(_,this.u,et)),Jr(this.h,X),this.Ra&&me(_,"TYPE","init"),this.S?(me(_,"$req",g),me(_,"SID","null"),X.U=!0,vs(X,_,null)):vs(X,_,g),this.I=2}}else this.I==3&&(c?cl(this,c):this.i.length==0||Zr(this.h)||cl(this))};function cl(c,g){var _;g?_=g.l:_=c.V++;const S=qe(c.J);me(S,"SID",c.M),me(S,"RID",_),me(S,"AID",c.K),ga(c,S),c.u&&c.o&&ha(S,c.u,c.o),_=new ns(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Do(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Jr(c.h,_),vs(_,S,g)}function ga(c,g){c.H&&L(c.H,function(_,S){me(g,S,_)}),c.l&&L({},function(_,S){me(g,S,_)})}function Do(c,g,_){_=Math.min(c.i.length,_);const S=c.l?y(c.l.Ka,c.l,c):null;t:{var X=c.i;let qt=-1;for(;;){const Oe=["count="+_];qt==-1?_>0?(qt=X[0].g,Oe.push("ofs="+qt)):qt=0:Oe.push("ofs="+qt);let le=!0;for(let Re=0;Re<_;Re++){var et=X[Re].g;const Gn=X[Re].map;if(et-=qt,et<0)qt=Math.max(0,X[Re].g-100),le=!1;else try{et="req"+et+"_"||"";try{var xt=Gn instanceof Map?Gn:Object.entries(Gn);for(const[Is,ls]of xt){let os=ls;p(ls)&&(os=mt(ls)),Oe.push(et+Is+"="+encodeURIComponent(os))}}catch(Is){throw Oe.push(et+"type="+encodeURIComponent("_badmap")),Is}}catch{S&&S(Gn)}}if(le){xt=Oe.join("&");break t}}xt=void 0}return c=c.i.splice(0,_),g.G=c,xt}function Mo(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;gt||w(),yt||(gt(),yt=!0),A.add(g,c),c.A=0}}function pa(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ys(y(c.Da,c),zo(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,Vo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ys(y(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),bi(this),Vo(this))};function ul(c){c.B!=null&&(m.clearTimeout(c.B),c.B=null)}function Vo(c){c.g=new ns(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=qe(c.na);me(g,"RID","rpc"),me(g,"SID",c.M),me(g,"AID",c.K),me(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&me(g,"TO",c.ia),me(g,"TYPE","xmlhttp"),ga(c,g),c.u&&c.o&&ha(g,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=ca(qe(g)),_.u=null,_.R=!0,Ha(_,c)}a.Va=function(){this.C!=null&&(this.C=null,bi(this),pa(this),Le(19))};function Wa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Oo(c,g){var _=null;if(c.g==g){Wa(c),ul(c),c.g=null;var S=2}else if(Ss(c.h,g))_=g.G,Wr(c.h,g),S=1;else return;if(c.I!=0){if(g.o)if(S==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var X=c.D;S=Ga(),fe(S,new ps(S,_)),Cs(c)}else Mo(c);else if(X=g.m,X==3||X==0&&g.X>0||!(S==1&&Ja(c,g)||S==2&&pa(c)))switch(_&&_.length>0&&(g=c.h,g.i=g.i.concat(_)),X){case 1:js(c,5);break;case 4:js(c,10);break;case 3:js(c,6);break;default:js(c,2)}}}function zo(c,g){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*g}function js(c,g){if(c.j.info("Error code "+g),g==2){var _=y(c.bb,c),S=c.Ua;const X=!S;S=new In(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||sn(S,"https"),ca(S),X?is(S.toString(),_):al(S.toString(),_)}else Le(2);c.I=0,c.l&&c.l.pa(g),ko(c),Za(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function ko(c){if(c.I=0,c.ja=[],c.l){const g=tl(c.h);(g.length!=0||c.i.length!=0)&&(it(c.ja,g),it(c.ja,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.oa()}}function Uo(c,g,_){var S=_ instanceof In?qe(_):new In(_);if(S.g!="")g&&(S.g=g+"."+S.g),mi(S,S.u);else{var X=m.location;S=X.protocol,g=g?g+"."+X.hostname:X.hostname,X=+X.port;const et=new In(null);S&&sn(et,S),g&&(et.g=g),X&&mi(et,X),_&&(et.h=_),S=et}return _=c.G,g=c.wa,_&&g&&me(S,_,g),me(S,"VER",c.ka),ga(c,S),S}function Lo(c,g,_){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new ve(new ws({ab:_})):new ve(c.ma),g.Fa(c.L),g}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bo(){}a=Bo.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ei(){}Ei.prototype.g=function(c,g){return new vn(c,g)};function vn(c,g){Ft.call(this),this.g=new _i(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!I(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Ys(this)}E(vn,Ft),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){ol(this.g)},vn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=mt(c),c=_);g.i.push(new Pe(g.Ya++,c)),g.I==3&&Cs(g)},vn.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,vn.Z.N.call(this)};function Po(c){xe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){t:{for(const _ in g){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}E(Po,xe);function qo(){tn.call(this),this.status=1}E(qo,tn);function Ys(c){this.g=c}E(Ys,Bo),Ys.prototype.ra=function(){fe(this.g,"a")},Ys.prototype.qa=function(c){fe(this.g,new Po(c))},Ys.prototype.pa=function(c){fe(this.g,new qo)},Ys.prototype.oa=function(){fe(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,y0=function(){return new Ei},p0=function(){return Ga()},g0=Ot,Wh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,Zc=la,Xr.COMPLETE="complete",m0=Xr,Dt.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,Kl=Dt,ve.prototype.listenOnce=ve.prototype.K,ve.prototype.getLastError=ve.prototype.Ha,ve.prototype.getLastErrorCode=ve.prototype.ya,ve.prototype.getStatus=ve.prototype.ca,ve.prototype.getResponseJson=ve.prototype.La,ve.prototype.getResponseText=ve.prototype.la,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Fa,f0=ve}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const Wy="@firebase/firestore",tx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new r0("@firebase/firestore");function jr(){return ka.logLevel}function bt(a,...e){if(ka.logLevel<=ne.DEBUG){const s=e.map(Nf);ka.debug(`Firestore (${Hr}): ${a}`,...s)}}function ui(a,...e){if(ka.logLevel<=ne.ERROR){const s=e.map(Nf);ka.error(`Firestore (${Hr}): ${a}`,...s)}}function kr(a,...e){if(ka.logLevel<=ne.WARN){const s=e.map(Nf);ka.warn(`Firestore (${Hr}): ${a}`,...s)}}function Nf(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(a,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,x0(a,r,s)}function x0(a,e,s){let r=`FIRESTORE (${Hr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw ui(r),new Error(r)}function he(a,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,a||x0(e,o,r)}function Pt(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends Gr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(yn.UNAUTHENTICATED)))}shutdown(){}}class v2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class _2{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){he(this.o===void 0,42304);let r=this.i;const o=x=>this.i!==r?(r=this.i,s(x)):Promise.resolve();let d=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ki,e.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const x=d;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},p=x=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ki)}}),0),m()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new v0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class b2{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E2{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new b2(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T2{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,e2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){he(this.o===void 0,3512);const r=d=>{d.error!=null&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.m;return this.m=d.token,bt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>r(d)))};const o=d=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ex(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(he(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new ex(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<a;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=S2(40);for(let d=0;d<o.length;++d)r.length<20&&o[d]<s&&(r+=e.charAt(o[d]%62))}return r}}function Zt(a,e){return a<e?-1:a>e?1:0}function tf(a,e){const s=Math.min(a.length,e.length);for(let r=0;r<s;r++){const o=a.charAt(r),d=e.charAt(r);if(o!==d)return qh(o)===qh(d)?Zt(o,d):qh(o)?1:-1}return Zt(a.length,e.length)}const A2=55296,w2=57343;function qh(a){const e=a.charCodeAt(0);return e>=A2&&e<=w2}function Ur(a,e,s){return a.length===e.length&&a.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="__name__";class zs{constructor(e,s,r){s===void 0?s=0:s>e.length&&Vt(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Vt(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return zs.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof zs?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const d=zs.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return Zt(e.length,s.length)}static compareSegments(e,s){const r=zs.isNumericId(e),o=zs.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?zs.extractNumericId(e).compare(zs.extractNumericId(s)):tf(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xi.fromString(e.substring(4,e.length-2))}}class Se extends zs{construct(e,s,r){return new Se(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new _t(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new Se(s)}static emptyPath(){return new Se([])}}const N2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends zs{construct(e,s,r){return new fn(e,s,r)}static isValidIdentifier(e){return N2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nx}static keyField(){return new fn([nx])}static fromServerFormat(e){const s=[];let r="",o=0;const d=()=>{if(r.length===0)throw new _t(dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let m=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new _t(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new _t(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=x,o+=2}else p==="`"?(m=!m,o++):p!=="."||m?(r+=p,o++):(d(),o++)}if(d(),m)throw new _t(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(s)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.path=e}static fromPath(e){return new jt(Se.fromString(e))}static fromName(e){return new jt(Se.fromString(e).popFirst(5))}static empty(){return new jt(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Se.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(a,e,s){if(!s)throw new _t(dt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function R2(a,e,s,r){if(e===!0&&r===!0)throw new _t(dt.INVALID_ARGUMENT,`${a} and ${s} cannot be used together.`)}function sx(a){if(!jt.isDocumentKey(a))throw new _t(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ix(a){if(jt.isDocumentKey(a))throw new _t(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function b0(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function _u(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Vt(12329,{type:typeof a})}function ks(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new _t(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=_u(a);throw new _t(dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(a,e){const s={typeString:a};return e&&(s.value=e),s}function mo(a,e){if(!b0(a))throw new _t(dt.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,d="value"in e[r]?{value:e[r].value}:void 0;if(!(r in a)){s=`JSON missing required field: '${r}'`;break}const m=a[r];if(o&&typeof m!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(d!==void 0&&m!==d.value){s=`Expected '${r}' field to equal '${d.value}'`;break}}if(s)throw new _t(dt.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=-62135596800,rx=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*rx);return new Ne(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new _t(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new _t(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<ax)throw new _t(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _t(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rx}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mo(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:Ke("string",Ne._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Ne(0,0))}static max(){return new Lt(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function C2(a,e){const s=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,o=Lt.fromTimestamp(r===1e9?new Ne(s+1,0):new Ne(s,r));return new Zi(o,jt.empty(),e)}function j2(a){return new Zi(a.readTime,a.key,ro)}class Zi{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Zi(Lt.min(),jt.empty(),ro)}static max(){return new Zi(Lt.max(),jt.empty(),ro)}}function I2(a,e){let s=a.readTime.compareTo(e.readTime);return s!==0?s:(s=jt.comparator(a.documentKey,e.documentKey),s!==0?s:Zt(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fr(a){if(a.code!==dt.FAILED_PRECONDITION||a.message!==D2)throw a;bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ht(((r,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(r,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ht?s:ht.resolve(s)}catch(s){return ht.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ht.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ht.reject(s)}static resolve(e){return new ht(((s,r)=>{s(e)}))}static reject(e){return new ht(((s,r)=>{r(e)}))}static waitFor(e){return new ht(((s,r)=>{let o=0,d=0,m=!1;e.forEach((p=>{++o,p.next((()=>{++d,m&&d===o&&s()}),(x=>r(x)))})),m=!0,d===o&&s()}))}static or(e){let s=ht.resolve(!1);for(const r of e)s=s.next((o=>o?ht.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,d)=>{r.push(s.call(this,o,d))})),this.waitFor(r)}static mapArray(e,s){return new ht(((r,o)=>{const d=e.length,m=new Array(d);let p=0;for(let x=0;x<d;x++){const y=x;s(e[y]).next((b=>{m[y]=b,++p,p===d&&r(m)}),(b=>o(b)))}}))}static doWhile(e,s){return new ht(((r,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):r()};d()}))}}function V2(a){const e=a.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Qr(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=-1;function Eu(a){return a==null}function ou(a){return a===0&&1/a==-1/0}function O2(a){return typeof a=="number"&&Number.isInteger(a)&&!ou(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="";function z2(a){let e="";for(let s=0;s<a.length;s++)e.length>0&&(e=lx(e)),e=k2(a.get(s),e);return lx(e)}function k2(a,e){let s=e;const r=a.length;for(let o=0;o<r;o++){const d=a.charAt(o);switch(d){case"\0":s+="";break;case E0:s+="";break;default:s+=d}}return s}function lx(a){return a+E0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(a){let e=0;for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&e++;return e}function sa(a,e){for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&e(s,a[s])}function T0(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,s){this.comparator=e,this.root=s||hn.EMPTY}insert(e,s){return new De(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?r(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,s,r,o,d){this.key=e,this.value=s,this.color=r??hn.RED,this.left=o??hn.EMPTY,this.right=d??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,d){return new hn(e??this.key,s??this.value,r??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const d=r(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,r),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,s,r,o,d){return this}insert(e,s,r){return new hn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new cx(this.data.getIterator())}getIteratorFrom(e){return new cx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Je(this.comparator);return s.data=e,s}}class cx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Ln([])}unionWith(e){let s=new Je(fn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Ln(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Ur(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new S0("Invalid base64 string: "+d):d}})(e);return new mn(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d})(e);return new mn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(a){if(he(!!a,39018),typeof a=="string"){let e=0;const s=U2.exec(a);if(he(!!s,46558,{timestamp:a}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(a.seconds),nanos:Ue(a.nanos)}}function Ue(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Wi(a){return typeof a=="string"?mn.fromBase64String(a):mn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="server_timestamp",w0="__type__",N0="__previous_value__",R0="__local_write_time__";function jf(a){var s,r;return((r=(((s=a==null?void 0:a.mapValue)==null?void 0:s.fields)||{})[w0])==null?void 0:r.stringValue)===A0}function Tu(a){const e=a.mapValue.fields[N0];return jf(e)?Tu(e):e}function lo(a){const e=Ji(a.mapValue.fields[R0].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,s,r,o,d,m,p,x,y,b){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=y,this.isUsingEmulator=b}}const cu="(default)";class oo{constructor(e,s){this.projectId=e,this.database=s||cu}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===cu}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="__type__",B2="__max__",Xc={mapValue:{}},j0="__vector__",uu="value";function ta(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?jf(a)?4:q2(a)?9007199254740991:P2(a)?10:11:Vt(28295,{value:a})}function Gs(a,e){if(a===e)return!0;const s=ta(a);if(s!==ta(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return lo(a).isEqual(lo(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=Ji(o.timestampValue),p=Ji(d.timestampValue);return m.seconds===p.seconds&&m.nanos===p.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(o,d){return Wi(o.bytesValue).isEqual(Wi(d.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(o,d){return Ue(o.geoPointValue.latitude)===Ue(d.geoPointValue.latitude)&&Ue(o.geoPointValue.longitude)===Ue(d.geoPointValue.longitude)})(a,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return Ue(o.integerValue)===Ue(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=Ue(o.doubleValue),p=Ue(d.doubleValue);return m===p?ou(m)===ou(p):isNaN(m)&&isNaN(p)}return!1})(a,e);case 9:return Ur(a.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return(function(o,d){const m=o.mapValue.fields||{},p=d.mapValue.fields||{};if(ox(m)!==ox(p))return!1;for(const x in m)if(m.hasOwnProperty(x)&&(p[x]===void 0||!Gs(m[x],p[x])))return!1;return!0})(a,e);default:return Vt(52216,{left:a})}}function co(a,e){return(a.values||[]).find((s=>Gs(s,e)))!==void 0}function Lr(a,e){if(a===e)return 0;const s=ta(a),r=ta(e);if(s!==r)return Zt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Zt(a.booleanValue,e.booleanValue);case 2:return(function(d,m){const p=Ue(d.integerValue||d.doubleValue),x=Ue(m.integerValue||m.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(a,e);case 3:return ux(a.timestampValue,e.timestampValue);case 4:return ux(lo(a),lo(e));case 5:return tf(a.stringValue,e.stringValue);case 6:return(function(d,m){const p=Wi(d),x=Wi(m);return p.compareTo(x)})(a.bytesValue,e.bytesValue);case 7:return(function(d,m){const p=d.split("/"),x=m.split("/");for(let y=0;y<p.length&&y<x.length;y++){const b=Zt(p[y],x[y]);if(b!==0)return b}return Zt(p.length,x.length)})(a.referenceValue,e.referenceValue);case 8:return(function(d,m){const p=Zt(Ue(d.latitude),Ue(m.latitude));return p!==0?p:Zt(Ue(d.longitude),Ue(m.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return dx(a.arrayValue,e.arrayValue);case 10:return(function(d,m){var R,B,it,F;const p=d.fields||{},x=m.fields||{},y=(R=p[uu])==null?void 0:R.arrayValue,b=(B=x[uu])==null?void 0:B.arrayValue,E=Zt(((it=y==null?void 0:y.values)==null?void 0:it.length)||0,((F=b==null?void 0:b.values)==null?void 0:F.length)||0);return E!==0?E:dx(y,b)})(a.mapValue,e.mapValue);case 11:return(function(d,m){if(d===Xc.mapValue&&m===Xc.mapValue)return 0;if(d===Xc.mapValue)return 1;if(m===Xc.mapValue)return-1;const p=d.fields||{},x=Object.keys(p),y=m.fields||{},b=Object.keys(y);x.sort(),b.sort();for(let E=0;E<x.length&&E<b.length;++E){const R=tf(x[E],b[E]);if(R!==0)return R;const B=Lr(p[x[E]],y[b[E]]);if(B!==0)return B}return Zt(x.length,b.length)})(a.mapValue,e.mapValue);default:throw Vt(23264,{he:s})}}function ux(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Zt(a,e);const s=Ji(a),r=Ji(e),o=Zt(s.seconds,r.seconds);return o!==0?o:Zt(s.nanos,r.nanos)}function dx(a,e){const s=a.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const d=Lr(s[o],r[o]);if(d)return d}return Zt(s.length,r.length)}function Br(a){return ef(a)}function ef(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(s){const r=Ji(s);return`time(${r.seconds},${r.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(s){return Wi(s).toBase64()})(a.bytesValue):"referenceValue"in a?(function(s){return jt.fromName(s).toString()})(a.referenceValue):"geoPointValue"in a?(function(s){return`geo(${s.latitude},${s.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(s){let r="[",o=!0;for(const d of s.values||[])o?o=!1:r+=",",r+=ef(d);return r+"]"})(a.arrayValue):"mapValue"in a?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const m of r)d?d=!1:o+=",",o+=`${m}:${ef(s.fields[m])}`;return o+"}"})(a.mapValue):Vt(61005,{value:a})}function Jc(a){switch(ta(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tu(a);return e?16+Jc(e):16;case 5:return 2*a.stringValue.length;case 6:return Wi(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,d)=>o+Jc(d)),0)})(a.arrayValue);case 10:case 11:return(function(r){let o=0;return sa(r.fields,((d,m)=>{o+=d.length+Jc(m)})),o})(a.mapValue);default:throw Vt(13486,{value:a})}}function hx(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function nf(a){return!!a&&"integerValue"in a}function If(a){return!!a&&"arrayValue"in a}function fx(a){return!!a&&"nullValue"in a}function mx(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Wc(a){return!!a&&"mapValue"in a}function P2(a){var s,r;return((r=(((s=a==null?void 0:a.mapValue)==null?void 0:s.fields)||{})[C0])==null?void 0:r.stringValue)===j0}function to(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return sa(a.mapValue.fields,((s,r)=>e.mapValue.fields[s]=to(r))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(a.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=to(a.arrayValue.values[s]);return e}return{...a}}function q2(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===B2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!Wc(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(s)}setAll(e){let s=fn.emptyPath(),r={},o=[];e.forEach(((m,p)=>{if(!s.isImmediateParentOf(p)){const x=this.getFieldsMap(s);this.applyChanges(x,r,o),r={},o=[],s=p.popLast()}m?r[p.lastSegment()]=to(m):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,r,o)}delete(e){const s=this.field(e.popLast());Wc(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];Wc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){sa(s,((o,d)=>e[o]=d));for(const o of r)delete e[o]}clone(){return new Cn(to(this.value))}}function I0(a){const e=[];return sa(a.fields,((s,r)=>{const o=new fn([s]);if(Wc(r)){const d=I0(r.mapValue).fields;if(d.length===0)e.push(o);else for(const m of d)e.push(o.child(m))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,s,r,o,d,m,p){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=d,this.data=m,this.documentState=p}static newInvalidDocument(e){return new xn(e,0,Lt.min(),Lt.min(),Lt.min(),Cn.empty(),0)}static newFoundDocument(e,s,r,o){return new xn(e,1,s,Lt.min(),r,o,0)}static newNoDocument(e,s){return new xn(e,2,s,Lt.min(),Lt.min(),Cn.empty(),0)}static newUnknownDocument(e,s){return new xn(e,3,s,Lt.min(),Lt.min(),Cn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,s){this.position=e,this.inclusive=s}}function gx(a,e,s){let r=0;for(let o=0;o<a.position.length;o++){const d=e[o],m=a.position[o];if(d.field.isKeyField()?r=jt.comparator(jt.fromName(m.referenceValue),s.key):r=Lr(m,s.data.field(d.field)),d.dir==="desc"&&(r*=-1),r!==0)break}return r}function px(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let s=0;s<a.position.length;s++)if(!Gs(a.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,s="asc"){this.field=e,this.dir=s}}function G2(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{}class Xe extends D0{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new F2(e,s,r):s==="array-contains"?new X2(e,r):s==="in"?new K2(e,r):s==="not-in"?new $2(e,r):s==="array-contains-any"?new Z2(e,r):new Xe(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new Q2(e,r):new Y2(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Lr(s,this.value)):s!==null&&ta(this.value)===ta(s)&&this.matchesComparison(Lr(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends D0{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new fs(e,s)}matches(e){return M0(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function M0(a){return a.op==="and"}function V0(a){return H2(a)&&M0(a)}function H2(a){for(const e of a.filters)if(e instanceof fs)return!1;return!0}function sf(a){if(a instanceof Xe)return a.field.canonicalString()+a.op.toString()+Br(a.value);if(V0(a))return a.filters.map((e=>sf(e))).join(",");{const e=a.filters.map((s=>sf(s))).join(",");return`${a.op}(${e})`}}function O0(a,e){return a instanceof Xe?(function(r,o){return o instanceof Xe&&r.op===o.op&&r.field.isEqual(o.field)&&Gs(r.value,o.value)})(a,e):a instanceof fs?(function(r,o){return o instanceof fs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((d,m,p)=>d&&O0(m,o.filters[p])),!0):!1})(a,e):void Vt(19439)}function z0(a){return a instanceof Xe?(function(s){return`${s.field.canonicalString()} ${s.op} ${Br(s.value)}`})(a):a instanceof fs?(function(s){return s.op.toString()+" {"+s.getFilters().map(z0).join(" ,")+"}"})(a):"Filter"}class F2 extends Xe{constructor(e,s,r){super(e,s,r),this.key=jt.fromName(r.referenceValue)}matches(e){const s=jt.comparator(e.key,this.key);return this.matchesComparison(s)}}class Q2 extends Xe{constructor(e,s){super(e,"in",s),this.keys=k0("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class Y2 extends Xe{constructor(e,s){super(e,"not-in",s),this.keys=k0("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function k0(a,e){var s;return(((s=e.arrayValue)==null?void 0:s.values)||[]).map((r=>jt.fromName(r.referenceValue)))}class X2 extends Xe{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return If(s)&&co(s.arrayValue,this.value)}}class K2 extends Xe{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&co(this.value.arrayValue,s)}}class $2 extends Xe{constructor(e,s){super(e,"not-in",s)}matches(e){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!co(this.value.arrayValue,s)}}class Z2 extends Xe{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!If(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>co(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,s=null,r=[],o=[],d=null,m=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=d,this.startAt=m,this.endAt=p,this.Te=null}}function yx(a,e=null,s=[],r=[],o=null,d=null,m=null){return new J2(a,e,s,r,o,d,m)}function Df(a){const e=Pt(a);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>sf(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(d){return d.field.canonicalString()+d.dir})(r))).join(","),Eu(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>Br(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>Br(r))).join(",")),e.Te=s}return e.Te}function Mf(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<a.orderBy.length;s++)if(!G2(a.orderBy[s],e.orderBy[s]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let s=0;s<a.filters.length;s++)if(!O0(a.filters[s],e.filters[s]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!px(a.startAt,e.startAt)&&px(a.endAt,e.endAt)}function af(a){return jt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,s=null,r=[],o=[],d=null,m="F",p=null,x=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=d,this.limitType=m,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function W2(a,e,s,r,o,d,m,p){return new go(a,e,s,r,o,d,m,p)}function Vf(a){return new go(a)}function xx(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function U0(a){return a.collectionGroup!==null}function eo(a){const e=Pt(a);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let p=new Je(fn.comparator);return m.filters.forEach((x=>{x.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new hu(d,r))})),s.has(fn.keyField().canonicalString())||e.Ie.push(new hu(fn.keyField(),r))}return e.Ie}function Us(a){const e=Pt(a);return e.Ee||(e.Ee=tE(e,eo(a))),e.Ee}function tE(a,e){if(a.limitType==="F")return yx(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new hu(o.field,d)}));const s=a.endAt?new du(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new du(a.startAt.position,a.startAt.inclusive):null;return yx(a.path,a.collectionGroup,e,a.filters,a.limit,s,r)}}function rf(a,e){const s=a.filters.concat([e]);return new go(a.path,a.collectionGroup,a.explicitOrderBy.slice(),s,a.limit,a.limitType,a.startAt,a.endAt)}function lf(a,e,s){return new go(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,s,a.startAt,a.endAt)}function Su(a,e){return Mf(Us(a),Us(e))&&a.limitType===e.limitType}function L0(a){return`${Df(Us(a))}|lt:${a.limitType}`}function Ir(a){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>z0(o))).join(", ")}]`),Eu(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>Br(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>Br(o))).join(",")),`Target(${r})`})(Us(a))}; limitType=${a.limitType})`}function Au(a,e){return e.isFoundDocument()&&(function(r,o){const d=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(d):jt.isDocumentKey(r.path)?r.path.isEqual(d):r.path.isImmediateParentOf(d)})(a,e)&&(function(r,o){for(const d of eo(r))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(a,e)&&(function(r,o){for(const d of r.filters)if(!d.matches(o))return!1;return!0})(a,e)&&(function(r,o){return!(r.startAt&&!(function(m,p,x){const y=gx(m,p,x);return m.inclusive?y<=0:y<0})(r.startAt,eo(r),o)||r.endAt&&!(function(m,p,x){const y=gx(m,p,x);return m.inclusive?y>=0:y>0})(r.endAt,eo(r),o))})(a,e)}function eE(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function B0(a){return(e,s)=>{let r=!1;for(const o of eo(a)){const d=nE(o,e,s);if(d!==0)return d;r=r||o.field.isKeyField()}return 0}}function nE(a,e,s){const r=a.field.isKeyField()?jt.comparator(e.key,s.key):(function(d,m,p){const x=m.data.field(d),y=p.data.field(d);return x!==null&&y!==null?Lr(x,y):Vt(42886)})(a.field,e,s);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,d]of r)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((s,r)=>{for(const[o,d]of r)e(o,d)}))}isEmpty(){return T0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new De(jt.comparator);function di(){return sE}const P0=new De(jt.comparator);function $l(...a){let e=P0;for(const s of a)e=e.insert(s.key,s);return e}function q0(a){let e=P0;return a.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function Va(){return no()}function G0(){return no()}function no(){return new Ba((a=>a.toString()),((a,e)=>a.isEqual(e)))}const iE=new De(jt.comparator),aE=new Je(jt.comparator);function Jt(...a){let e=aE;for(const s of a)e=e.add(s);return e}const rE=new Je(Zt);function lE(){return rE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function H0(a){return{integerValue:""+a}}function oE(a,e){return O2(e)?H0(e):Of(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function cE(a,e,s){return a instanceof fu?(function(o,d){const m={fields:{[w0]:{stringValue:A0},[R0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&jf(d)&&(d=Tu(d)),d&&(m.fields[N0]=d),{mapValue:m}})(s,e):a instanceof uo?Q0(a,e):a instanceof ho?Y0(a,e):(function(o,d){const m=F0(o,d),p=vx(m)+vx(o.Ae);return nf(m)&&nf(o.Ae)?H0(p):Of(o.serializer,p)})(a,e)}function uE(a,e,s){return a instanceof uo?Q0(a,e):a instanceof ho?Y0(a,e):s}function F0(a,e){return a instanceof mu?(function(r){return nf(r)||(function(d){return!!d&&"doubleValue"in d})(r)})(e)?e:{integerValue:0}:null}class fu extends wu{}class uo extends wu{constructor(e){super(),this.elements=e}}function Q0(a,e){const s=X0(e);for(const r of a.elements)s.some((o=>Gs(o,r)))||s.push(r);return{arrayValue:{values:s}}}class ho extends wu{constructor(e){super(),this.elements=e}}function Y0(a,e){let s=X0(e);for(const r of a.elements)s=s.filter((o=>!Gs(o,r)));return{arrayValue:{values:s}}}class mu extends wu{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function vx(a){return Ue(a.integerValue||a.doubleValue)}function X0(a){return If(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function dE(a,e){return a.field.isEqual(e.field)&&(function(r,o){return r instanceof uo&&o instanceof uo||r instanceof ho&&o instanceof ho?Ur(r.elements,o.elements,Gs):r instanceof mu&&o instanceof mu?Gs(r.Ae,o.Ae):r instanceof fu&&o instanceof fu})(a.transform,e.transform)}class hE{constructor(e,s){this.version=e,this.transformResults=s}}class hs{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Nu{}function K0(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new zf(a.key,hs.none()):new po(a.key,a.data,hs.none());{const s=a.data,r=Cn.empty();let o=new Je(fn.comparator);for(let d of e.fields)if(!o.has(d)){let m=s.field(d);m===null&&d.length>1&&(d=d.popLast(),m=s.field(d)),m===null?r.delete(d):r.set(d,m),o=o.add(d)}return new ia(a.key,r,new Ln(o.toArray()),hs.none())}}function fE(a,e,s){a instanceof po?(function(o,d,m){const p=o.value.clone(),x=bx(o.fieldTransforms,d,m.transformResults);p.setAll(x),d.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(a,e,s):a instanceof ia?(function(o,d,m){if(!tu(o.precondition,d))return void d.convertToUnknownDocument(m.version);const p=bx(o.fieldTransforms,d,m.transformResults),x=d.data;x.setAll($0(o)),x.setAll(p),d.convertToFoundDocument(m.version,x).setHasCommittedMutations()})(a,e,s):(function(o,d,m){d.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,s)}function so(a,e,s,r){return a instanceof po?(function(d,m,p,x){if(!tu(d.precondition,m))return p;const y=d.value.clone(),b=Ex(d.fieldTransforms,x,m);return y.setAll(b),m.convertToFoundDocument(m.version,y).setHasLocalMutations(),null})(a,e,s,r):a instanceof ia?(function(d,m,p,x){if(!tu(d.precondition,m))return p;const y=Ex(d.fieldTransforms,x,m),b=m.data;return b.setAll($0(d)),b.setAll(y),m.convertToFoundDocument(m.version,b).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((E=>E.field)))})(a,e,s,r):(function(d,m,p){return tu(d.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):p})(a,e,s)}function mE(a,e){let s=null;for(const r of a.fieldTransforms){const o=e.data.field(r.field),d=F0(r.transform,o||null);d!=null&&(s===null&&(s=Cn.empty()),s.set(r.field,d))}return s||null}function _x(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ur(r,o,((d,m)=>dE(d,m)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class po extends Nu{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ia extends Nu{constructor(e,s,r,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function $0(a){const e=new Map;return a.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=a.data.field(s);e.set(s,r)}})),e}function bx(a,e,s){const r=new Map;he(a.length===s.length,32656,{Re:s.length,Ve:a.length});for(let o=0;o<s.length;o++){const d=a[o],m=d.transform,p=e.data.field(d.field);r.set(d.field,uE(m,p,s[o]))}return r}function Ex(a,e,s){const r=new Map;for(const o of a){const d=o.transform,m=s.data.field(o.field);r.set(o.field,cE(d,m,e))}return r}class zf extends Nu{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gE extends Nu{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&fE(d,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=so(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=so(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=G0();return this.mutations.forEach((o=>{const d=e.get(o.key),m=d.overlayedDocument;let p=this.applyToLocalView(m,d.mutatedFields);p=s.has(o.key)?null:p;const x=K0(m,p);x!==null&&r.set(o.key,x),m.isValidDocument()||m.convertToNoDocument(Lt.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),Jt())}isEqual(e){return this.batchId===e.batchId&&Ur(this.mutations,e.mutations,((s,r)=>_x(s,r)))&&Ur(this.baseMutations,e.baseMutations,((s,r)=>_x(s,r)))}}class kf{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return iE})();const d=e.mutations;for(let m=0;m<d.length;m++)o=o.insert(d[m].key,r[m].version);return new kf(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,ee;function vE(a){switch(a){case dt.OK:return Vt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Vt(15467,{code:a})}}function Z0(a){if(a===void 0)return ui("GRPC error has no .code"),dt.UNKNOWN;switch(a){case Ye.OK:return dt.OK;case Ye.CANCELLED:return dt.CANCELLED;case Ye.UNKNOWN:return dt.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return dt.INTERNAL;case Ye.UNAVAILABLE:return dt.UNAVAILABLE;case Ye.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Ye.NOT_FOUND:return dt.NOT_FOUND;case Ye.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Ye.ABORTED:return dt.ABORTED;case Ye.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Ye.DATA_LOSS:return dt.DATA_LOSS;default:return Vt(39323,{code:a})}}(ee=Ye||(Ye={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Xi([4294967295,4294967295],0);function Tx(a){const e=_E().encode(a),s=new h0;return s.update(e),new Uint8Array(s.digest())}function Sx(a){const e=new DataView(a.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Xi([s,r],0),new Xi([o,d],0)]}class Uf{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Zl(`Invalid padding: ${s}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Xi.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(Xi.fromNumber(r)));return o.compare(bE)===1&&(o=new Xi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Tx(e),[r,o]=Sx(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);if(!this.we(m))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),m=new Uf(d,o,s);return r.forEach((p=>m.insert(p))),m}insert(e){if(this.ge===0)return;const s=Tx(e),[r,o]=Sx(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);this.Se(m)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,s,r,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,yo.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Ru(Lt.min(),o,new De(Zt),di(),Jt())}}class yo{constructor(e,s,r,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new yo(r,s,Jt(),Jt(),Jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class J0{constructor(e,s){this.targetId=e,this.Ce=s}}class W0{constructor(e,s,r=mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Ax{constructor(){this.ve=0,this.Fe=wx(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Jt(),s=Jt(),r=Jt();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:Vt(38017,{changeType:d})}})),new yo(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=wx()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EE{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=Kc(),this.He=Kc(),this.Ye=new De(Zt)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(af(d))if(r===0){const m=new jt(d.path);this.et(s,m,xn.newNoDocument(m,Lt.min()))}else he(r===1,20013,{expectedCount:r});else{const m=this._t(s);if(m!==r){const p=this.ut(e),x=p?this.ct(p,e,m):1;if(x!==0){this.it(s);const y=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:d=0}=s;let m,p;try{m=Wi(r).toUint8Array()}catch(x){if(x instanceof S0)return kr("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new Uf(m,o,d)}catch(x){return kr(x instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((d=>{const m=this.Ge.ht(),p=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,m)=>{const p=this.ot(m);if(p){if(d.current&&af(p.target)){const x=new jt(p.target.path);this.It(x).has(m)||this.Et(m,x)||this.et(m,x,xn.newNoDocument(x,e))}d.Be&&(s.set(m,d.ke()),d.qe())}}));let r=Jt();this.He.forEach(((d,m)=>{let p=!0;m.forEachWhile((x=>{const y=this.ot(x);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(d))})),this.je.forEach(((d,m)=>m.setReadTime(e)));const o=new Ru(e,s,this.Ye,this.je,r);return this.je=di(),this.Je=Kc(),this.He=Kc(),this.Ye=new De(Zt),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Ax,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Je(Zt),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Je(Zt),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||bt("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ax),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function Kc(){return new De(jt.comparator)}function wx(){return new De(jt.comparator)}const TE={asc:"ASCENDING",desc:"DESCENDING"},SE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AE={and:"AND",or:"OR"};class wE{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function of(a,e){return a.useProto3Json||Eu(e)?e:{value:e}}function gu(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tv(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function NE(a,e){return gu(a,e.toTimestamp())}function Ls(a){return he(!!a,49232),Lt.fromTimestamp((function(s){const r=Ji(s);return new Ne(r.seconds,r.nanos)})(a))}function Lf(a,e){return cf(a,e).canonicalString()}function cf(a,e){const s=(function(o){return new Se(["projects",o.projectId,"databases",o.database])})(a).child("documents");return e===void 0?s:s.child(e)}function ev(a){const e=Se.fromString(a);return he(rv(e),10190,{key:e.toString()}),e}function uf(a,e){return Lf(a.databaseId,e.path)}function Gh(a,e){const s=ev(e);if(s.get(1)!==a.databaseId.projectId)throw new _t(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+a.databaseId.projectId);if(s.get(3)!==a.databaseId.database)throw new _t(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+a.databaseId.database);return new jt(sv(s))}function nv(a,e){return Lf(a.databaseId,e)}function RE(a){const e=ev(a);return e.length===4?Se.emptyPath():sv(e)}function df(a){return new Se(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function sv(a){return he(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Nx(a,e,s){return{name:uf(a,e),fields:s.value.mapValue.fields}}function CE(a,e){let s;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Vt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,b){return y.useProto3Json?(he(b===void 0||typeof b=="string",58123),mn.fromBase64String(b||"")):(he(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),mn.fromUint8Array(b||new Uint8Array))})(a,e.targetChange.resumeToken),m=e.targetChange.cause,p=m&&(function(y){const b=y.code===void 0?dt.UNKNOWN:Z0(y.code);return new _t(b,y.message||"")})(m);s=new W0(r,o,d,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gh(a,r.document.name),d=Ls(r.document.updateTime),m=r.document.createTime?Ls(r.document.createTime):Lt.min(),p=new Cn({mapValue:{fields:r.document.fields}}),x=xn.newFoundDocument(o,d,m,p),y=r.targetIds||[],b=r.removedTargetIds||[];s=new eu(y,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gh(a,r.document),d=r.readTime?Ls(r.readTime):Lt.min(),m=xn.newNoDocument(o,d),p=r.removedTargetIds||[];s=new eu([],p,m.key,m)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gh(a,r.document),d=r.removedTargetIds||[];s=new eu([],d,o,null)}else{if(!("filter"in e))return Vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:d}=r,m=new xE(o,d),p=r.targetId;s=new J0(p,m)}}return s}function jE(a,e){let s;if(e instanceof po)s={update:Nx(a,e.key,e.value)};else if(e instanceof zf)s={delete:uf(a,e.key)};else if(e instanceof ia)s={update:Nx(a,e.key,e.data),updateMask:LE(e.fieldMask)};else{if(!(e instanceof gE))return Vt(16599,{Vt:e.type});s={verify:uf(a,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(d,m){const p=m.transform;if(p instanceof fu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof uo)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ho)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof mu)return{fieldPath:m.field.canonicalString(),increment:p.Ae};throw Vt(20930,{transform:m.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:NE(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Vt(27497)})(a,e.precondition)),s}function IE(a,e){return a&&a.length>0?(he(e!==void 0,14353),a.map((s=>(function(o,d){let m=o.updateTime?Ls(o.updateTime):Ls(d);return m.isEqual(Lt.min())&&(m=Ls(d)),new hE(m,o.transformResults||[])})(s,e)))):[]}function DE(a,e){return{documents:[nv(a,e.path)]}}function ME(a,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=nv(a,o);const d=(function(y){if(y.length!==0)return av(fs.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const m=(function(y){if(y.length!==0)return y.map((b=>(function(R){return{field:Dr(R.field),direction:zE(R.dir)}})(b)))})(e.orderBy);m&&(s.structuredQuery.orderBy=m);const p=of(a,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function VE(a){let e=RE(a.parent);const s=a.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){he(r===1,65062);const b=s.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let d=[];s.where&&(d=(function(E){const R=iv(E);return R instanceof fs&&V0(R)?R.getFilters():[R]})(s.where));let m=[];s.orderBy&&(m=(function(E){return E.map((R=>(function(it){return new hu(Mr(it.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(it.direction))})(R)))})(s.orderBy));let p=null;s.limit&&(p=(function(E){let R;return R=typeof E=="object"?E.value:E,Eu(R)?null:R})(s.limit));let x=null;s.startAt&&(x=(function(E){const R=!!E.before,B=E.values||[];return new du(B,R)})(s.startAt));let y=null;return s.endAt&&(y=(function(E){const R=!E.before,B=E.values||[];return new du(B,R)})(s.endAt)),W2(e,o,m,d,p,"F",x,y)}function OE(a,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function iv(a){return a.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Mr(s.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Mr(s.unaryFilter.field);return Xe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Mr(s.unaryFilter.field);return Xe.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Mr(s.unaryFilter.field);return Xe.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}})(a):a.fieldFilter!==void 0?(function(s){return Xe.create(Mr(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(s){return fs.create(s.compositeFilter.filters.map((r=>iv(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}})(s.compositeFilter.op))})(a):Vt(30097,{filter:a})}function zE(a){return TE[a]}function kE(a){return SE[a]}function UE(a){return AE[a]}function Dr(a){return{fieldPath:a.canonicalString()}}function Mr(a){return fn.fromServerFormat(a.fieldPath)}function av(a){return a instanceof Xe?(function(s){if(s.op==="=="){if(mx(s.value))return{unaryFilter:{field:Dr(s.field),op:"IS_NAN"}};if(fx(s.value))return{unaryFilter:{field:Dr(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(mx(s.value))return{unaryFilter:{field:Dr(s.field),op:"IS_NOT_NAN"}};if(fx(s.value))return{unaryFilter:{field:Dr(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dr(s.field),op:kE(s.op),value:s.value}}})(a):a instanceof fs?(function(s){const r=s.getFilters().map((o=>av(o)));return r.length===1?r[0]:{compositeFilter:{op:UE(s.op),filters:r}}})(a):Vt(54877,{filter:a})}function LE(a){const e=[];return a.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function rv(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,s,r,o,d=Lt.min(),m=Lt.min(),p=mn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.yt=e}}function PE(a){const e=VE({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.Cn=new GE}addToCollectionParentIndex(e,s){return this.Cn.add(s),ht.resolve()}getCollectionParents(e,s){return ht.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ht.resolve()}deleteFieldIndex(e,s){return ht.resolve()}deleteAllFieldIndexes(e){return ht.resolve()}createTargetIndexes(e,s){return ht.resolve()}getDocumentsMatchingTarget(e,s){return ht.resolve(null)}getIndexType(e,s){return ht.resolve(0)}getFieldIndexes(e,s){return ht.resolve([])}getNextCollectionGroupToUpdate(e){return ht.resolve(null)}getMinOffset(e,s){return ht.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,s){return ht.resolve(Zi.min())}updateCollectionGroup(e,s,r){return ht.resolve()}updateIndexEntries(e,s){return ht.resolve()}}class GE{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new Je(Se.comparator),d=!o.has(r);return this.index[s]=o.add(r),d}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Je(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lv=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(lv,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pr(0)}static cr(){return new Pr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="LruGarbageCollector",HE=1048576;function jx([a,e],[s,r]){const o=Zt(a,s);return o===0?Zt(e,r):o}class FE{constructor(e){this.Ir=e,this.buffer=new Je(jx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();jx(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class QE{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){bt(Cx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Qr(s)?bt(Cx,"Ignoring IndexedDB error during garbage collection: ",s):await Fr(s)}await this.Vr(3e5)}))}}class YE{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return ht.resolve(bu.ce);const r=new FE(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),ht.resolve(Rx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,d,m,p,x,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,m=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,s)))).next((E=>(d=E,x=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),jr()<=ne.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-b}ms
	Determined least recently used ${o} in `+(p-m)+`ms
	Removed ${d} targets in `+(x-p)+`ms
	Removed ${E} documents in `+(y-x)+`ms
Total Duration: ${y-b}ms`),ht.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:E}))))}}function XE(a,e){return new YE(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.changes=new Ba((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ht.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&so(r.mutation,o,Ln.empty(),Ne.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,Jt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=Jt()){const o=Va();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((d=>{let m=$l();return d.forEach(((p,x)=>{m=m.insert(p,x.overlayedDocument)})),m}))))}getOverlayedDocuments(e,s){const r=Va();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,Jt())))}populateOverlays(e,s,r){const o=[];return r.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((m,p)=>{s.set(m,p)}))}))}computeViews(e,s,r,o){let d=di();const m=no(),p=(function(){return no()})();return s.forEach(((x,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof ia)?d=d.insert(y.key,y):b!==void 0?(m.set(y.key,b.mutation.getFieldMask()),so(b.mutation,y,b.mutation.getFieldMask(),Ne.now())):m.set(y.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,d).next((x=>(x.forEach(((y,b)=>m.set(y,b))),s.forEach(((y,b)=>p.set(y,new $E(b,m.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const r=no();let o=new De(((m,p)=>m-p)),d=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((m=>{for(const p of m)p.keys().forEach((x=>{const y=s.get(x);if(y===null)return;let b=r.get(x)||Ln.empty();b=p.applyToLocalView(y,b),r.set(x,b);const E=(o.get(p.batchId)||Jt()).add(x);o=o.insert(p.batchId,E)}))})).next((()=>{const m=[],p=o.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),y=x.key,b=x.value,E=G0();b.forEach((R=>{if(!d.has(R)){const B=K0(s.get(R),r.get(R));B!==null&&E.set(R,B),d=d.add(R)}})),m.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ht.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(m){return jt.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):U0(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((d=>{const m=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-d.size):ht.resolve(Va());let p=ro,x=d;return m.next((y=>ht.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),d.get(b)?ht.resolve():this.remoteDocumentCache.getEntry(e,b).next((R=>{x=x.insert(b,R)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,x,y,Jt()))).next((b=>({batchId:p,changes:q0(b)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new jt(s)).next((r=>{let o=$l();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const d=s.collectionGroup;let m=$l();return this.indexManager.getCollectionParents(e,d).next((p=>ht.forEach(p,(x=>{const y=(function(E,R){return new go(R,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,x.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((b=>{b.forEach(((E,R)=>{m=m.insert(E,R)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,d,o)))).next((m=>{d.forEach(((x,y)=>{const b=y.getKey();m.get(b)===null&&(m=m.insert(b,xn.newInvalidDocument(b)))}));let p=$l();return m.forEach(((x,y)=>{const b=d.get(x);b!==void 0&&so(b.mutation,y,Ln.empty(),Ne.now()),Au(s,y)&&(p=p.insert(x,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ht.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Ls(o.createTime)}})(s)),ht.resolve()}getNamedQuery(e,s){return ht.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:PE(o.bundledQuery),readTime:Ls(o.readTime)}})(s)),ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.overlays=new De(jt.comparator),this.qr=new Map}getOverlay(e,s){return ht.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Va();return ht.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&r.set(o,d)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,d)=>{this.St(e,s,d)})),ht.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(r)),ht.resolve()}getOverlaysForCollection(e,s,r){const o=Va(),d=s.length+1,m=new jt(s.child("")),p=this.overlays.getIteratorFrom(m);for(;p.hasNext();){const x=p.getNext().value,y=x.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&x.largestBatchId>r&&o.set(x.getKey(),x)}return ht.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let d=new De(((y,b)=>y-b));const m=this.overlays.getIterator();for(;m.hasNext();){const y=m.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let b=d.get(y.largestBatchId);b===null&&(b=Va(),d=d.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Va(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return ht.resolve(p)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const m=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new yE(s,r));let d=this.qr.get(s);d===void 0&&(d=Jt(),this.qr.set(s,d)),this.qr.set(s,d.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ht.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ht.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.Qr=new Je(rn.$r),this.Ur=new Je(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new rn(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new rn(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new jt(new Se([])),r=new rn(s,e),o=new rn(s,e+1),d=[];return this.Ur.forEachInRange([r,o],(m=>{this.Gr(m),d.push(m.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new jt(new Se([])),r=new rn(s,e),o=new rn(s,e+1);let d=Jt();return this.Ur.forEachInRange([r,o],(m=>{d=d.add(m.key)})),d}containsKey(e){const s=new rn(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return jt.comparator(e.key,s.key)||Zt(e.Yr,s.Yr)}static Kr(e,s){return Zt(e.Yr,s.Yr)||jt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Je(rn.$r)}checkEmpty(e){return ht.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new pE(d,s,r,o);this.mutationQueue.push(m);for(const p of o)this.Zr=this.Zr.add(new rn(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ht.resolve(m)}lookupMutationBatch(e,s){return ht.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),d=o<0?0:o;return ht.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ht.resolve(this.mutationQueue.length===0?Cf:this.tr-1)}getAllMutationBatches(e){return ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new rn(s,0),o=new rn(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([r,o],(m=>{const p=this.Xr(m.Yr);d.push(p)})),ht.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new Je(Zt);return s.forEach((o=>{const d=new rn(o,0),m=new rn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,m],(p=>{r=r.add(p.Yr)}))})),ht.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let d=r;jt.isDocumentKey(d)||(d=d.child(""));const m=new rn(new jt(d),0);let p=new Je(Zt);return this.Zr.forEachWhile((x=>{const y=x.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(x.Yr)),!0)}),m),ht.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){he(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ht.forEach(s.mutations,(o=>{const d=new rn(o.key,s.batchId);return r=r.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new rn(s,0),o=this.Zr.firstAfterOrEqual(r);return ht.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ht.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.ri=e,this.docs=(function(){return new De(jt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),d=o?o.size:0,m=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ht.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(s))}getEntries(e,s){let r=di();return s.forEach((o=>{const d=this.docs.get(o);r=r.insert(o,d?d.document.mutableCopy():xn.newInvalidDocument(o))})),ht.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let d=di();const m=s.path,p=new jt(m.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:y,value:{document:b}}=x.getNext();if(!m.isPrefixOf(y.path))break;y.path.length>m.length+1||I2(j2(b),r)<=0||(o.has(b.key)||Au(s,b))&&(d=d.insert(b.key,b.mutableCopy()))}return ht.resolve(d)}getAllFromCollectionGroup(e,s,r,o){Vt(9500)}ii(e,s){return ht.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new sT(this)}getSize(e){return ht.resolve(this.size)}}class sT extends KE{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ht.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.persistence=e,this.si=new Ba((s=>Df(s)),Mf),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.oi=0,this._i=new Bf,this.targetCount=0,this.ai=Pr.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),ht.resolve()}getLastRemoteSnapshotVersion(e){return ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ht.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ht.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),ht.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Pr(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ht.resolve()}updateTargetData(e,s){return this.Pr(s),ht.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ht.resolve()}removeTargets(e,s,r){let o=0;const d=[];return this.si.forEach(((m,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.si.delete(m),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ht.waitFor(d).next((()=>o))}getTargetCount(e){return ht.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return ht.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),ht.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((m=>{d.push(o.markPotentiallyOrphaned(e,m))})),ht.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ht.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return ht.resolve(r)}containsKey(e,s){return ht.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,s){this.ui={},this.overlays={},this.ci=new bu(0),this.li=!1,this.li=!0,this.hi=new tT,this.referenceDelegate=e(this),this.Pi=new iT(this),this.indexManager=new qE,this.remoteDocumentCache=(function(o){return new nT(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new BE(s),this.Ii=new JE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new WE,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new eT(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){bt("MemoryPersistence","Starting transaction:",e);const o=new aT(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return ht.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class aT extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class Pf{constructor(e){this.persistence=e,this.Ri=new Bf,this.Vi=null}static mi(e){return new Pf(e)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),ht.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),ht.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ht.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ht.forEach(this.fi,(r=>{const o=jt.fromPath(r);return this.gi(e,o).next((d=>{d||s.removeEntry(o,Lt.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ht.or([()=>ht.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class pu{constructor(e,s){this.persistence=e,this.pi=new Ba((r=>z2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=XE(this,s)}static mi(e,s){return new pu(e,s)}Ei(){}di(e){return ht.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return ht.forEach(this.pi,((r,o)=>this.br(e,r,o).next((d=>d?ht.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(m=>this.br(e,m,s).next((p=>{p||(r++,d.removeEntry(m,Lt.min()))})))).next((()=>d.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ht.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ht.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ht.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ht.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=Jc(e.data.value)),s}br(e,s,r){return ht.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ht.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=Jt(),o=Jt();for(const d of s.docChanges)switch(d.type){case 0:r=r.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new qf(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Jb()?8:V2($b())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const d={result:null};return this.ys(e,s).next((m=>{d.result=m})).next((()=>{if(!d.result)return this.ws(e,s,o,r).next((m=>{d.result=m}))})).next((()=>{if(d.result)return;const m=new rT;return this.Ss(e,s,m).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,m,p.size)}))})).next((()=>d.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(jr()<=ne.DEBUG&&bt("QueryEngine","SDK will not create cache indexes for query:",Ir(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ht.resolve()):(jr()<=ne.DEBUG&&bt("QueryEngine","Query:",Ir(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(jr()<=ne.DEBUG&&bt("QueryEngine","The SDK decides to create cache indexes for query:",Ir(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(s))):ht.resolve())}ys(e,s){if(xx(s))return ht.resolve(null);let r=Us(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=lf(s,null,"F"),r=Us(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((d=>{const m=Jt(...d);return this.ps.getDocuments(e,m).next((p=>this.indexManager.getMinOffset(e,r).next((x=>{const y=this.Ds(s,p);return this.Cs(s,y,m,x.readTime)?this.ys(e,lf(s,null,"F")):this.vs(e,y,s,x)}))))})))))}ws(e,s,r,o){return xx(s)||o.isEqual(Lt.min())?ht.resolve(null):this.ps.getDocuments(e,r).next((d=>{const m=this.Ds(s,d);return this.Cs(s,m,r,o)?ht.resolve(null):(jr()<=ne.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ir(s)),this.vs(e,m,s,C2(o,ro)).next((p=>p)))}))}Ds(e,s){let r=new Je(B0(e));return s.forEach(((o,d)=>{Au(e,d)&&(r=r.add(d))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,r){return jr()<=ne.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Ir(s)),this.ps.getDocumentsMatchingQuery(e,s,Zi.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((d=>(s.forEach((m=>{d=d.insert(m.key,m)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="LocalStore",oT=3e8;class cT{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new De(Zt),this.xs=new Ba((d=>Df(d)),Mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function uT(a,e,s,r){return new cT(a,e,s,r)}async function cv(a,e){const s=Pt(a);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((d=>{const m=[],p=[];let x=Jt();for(const y of o){m.push(y.batchId);for(const b of y.mutations)x=x.add(b.key)}for(const y of d){p.push(y.batchId);for(const b of y.mutations)x=x.add(b.key)}return s.localDocuments.getDocuments(r,x).next((y=>({Ls:y,removedBatchIds:m,addedBatchIds:p})))}))}))}function dT(a,e){const s=Pt(a);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,x,y,b){const E=y.batch,R=E.keys();let B=ht.resolve();return R.forEach((it=>{B=B.next((()=>b.getEntry(x,it))).next((F=>{const D=y.docVersions.get(it);he(D!==null,48541),F.version.compareTo(D)<0&&(E.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),b.addEntry(F)))}))})),B.next((()=>p.mutationQueue.removeMutationBatch(x,E)))})(s,r,e,d).next((()=>d.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let x=Jt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(x=x.add(p.batch.mutations[y].key));return x})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function uv(a){const e=Pt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function hT(a,e){const s=Pt(a),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const m=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((b,E)=>{const R=o.get(E);if(!R)return;p.push(s.Pi.removeMatchingKeys(d,b.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(d,b.addedDocuments,E))));let B=R.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(E)!==null?B=B.withResumeToken(mn.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),o=o.insert(E,B),(function(F,D,Q){return F.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=oT?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(R,B,b)&&p.push(s.Pi.updateTargetData(d,B))}));let x=di(),y=Jt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,b))})),p.push(fT(d,m,e.documentUpdates).next((b=>{x=b.ks,y=b.qs}))),!r.isEqual(Lt.min())){const b=s.Pi.getLastRemoteSnapshotVersion(d).next((E=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,r)));p.push(b)}return ht.waitFor(p).next((()=>m.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,x,y))).next((()=>x))})).then((d=>(s.Ms=o,d)))}function fT(a,e,s){let r=Jt(),o=Jt();return s.forEach((d=>r=r.add(d))),e.getEntries(a,r).next((d=>{let m=di();return s.forEach(((p,x)=>{const y=d.get(p);x.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),x.isNoDocument()&&x.version.isEqual(Lt.min())?(e.removeEntry(p,x.readTime),m=m.insert(p,x)):!y.isValidDocument()||x.version.compareTo(y.version)>0||x.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(x),m=m.insert(p,x)):bt(Gf,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",x.version)})),{ks:m,qs:o}}))}function mT(a,e){const s=Pt(a);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cf),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function gT(a,e){const s=Pt(a);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((d=>d?(o=d,ht.resolve(o)):s.Pi.allocateTargetId(r).next((m=>(o=new Fi(e,m,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function hf(a,e,s){const r=Pt(a),o=r.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",d,(m=>r.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!Qr(m))throw m;bt(Gf,`Failed to update sequence numbers for target ${e}: ${m}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Ix(a,e,s){const r=Pt(a);let o=Lt.min(),d=Jt();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(x,y,b){const E=Pt(x),R=E.xs.get(b);return R!==void 0?ht.resolve(E.Ms.get(R)):E.Pi.getTargetData(y,b)})(r,m,Us(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(m,p.targetId).next((x=>{d=x}))})).next((()=>r.Fs.getDocumentsMatchingQuery(m,e,s?o:Lt.min(),s?d:Jt()))).next((p=>(pT(r,eE(e),p),{documents:p,Qs:d})))))}function pT(a,e,s){let r=a.Os.get(e)||Lt.min();s.forEach(((o,d)=>{d.readTime.compareTo(r)>0&&(r=d.readTime)})),a.Os.set(e,r)}class Dx{constructor(){this.activeTargetIds=lE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yT{constructor(){this.Mo=new Dx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dx,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="ConnectivityMonitor";class Vx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){bt(Mx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){bt(Mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function ff(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="RestConnection",vT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _T{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===cu?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,d){const m=ff(),p=this.zo(e,s.toUriEncodedString());bt(Hh,`Sending RPC '${e}' ${m}:`,p,r);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,d);const{host:y}=new URL(p),b=Af(y);return this.Jo(e,p,x,r,b).then((E=>(bt(Hh,`Received RPC '${e}' ${m}: `,E),E)),(E=>{throw kr(Hh,`RPC '${e}' ${m} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(e,s,r,o,d,m){return this.Go(e,s,r,o,d)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),r&&r.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const r=vT[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class ET extends _T{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,d){const m=ff();return new Promise(((p,x)=>{const y=new f0;y.setWithCredentials(!0),y.listenOnce(m0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Zc.NO_ERROR:const E=y.getResponseJson();bt(pn,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(E)),p(E);break;case Zc.TIMEOUT:bt(pn,`RPC '${e}' ${m} timed out`),x(new _t(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const R=y.getStatus();if(bt(pn,`RPC '${e}' ${m} failed with status:`,R,"response text:",y.getResponseText()),R>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const it=B==null?void 0:B.error;if(it&&it.status&&it.message){const F=(function(Q){const Z=Q.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(Z)>=0?Z:dt.UNKNOWN})(it.status);x(new _t(F,it.message))}else x(new _t(dt.UNKNOWN,"Server responded with status "+y.getStatus()))}else x(new _t(dt.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:m,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{bt(pn,`RPC '${e}' ${m} completed.`)}}));const b=JSON.stringify(o);bt(pn,`RPC '${e}' ${m} sending request:`,o),y.send(s,"POST",b,r,15)}))}T_(e,s,r){const o=ff(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=y0(),p=p0(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(x.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,s,r),x.encodeInitMessageHeaders=!0;const b=d.join("");bt(pn,`Creating RPC '${e}' stream ${o}: ${b}`,x);const E=m.createWebChannel(b,x);this.I_(E);let R=!1,B=!1;const it=new bT({Yo:D=>{B?bt(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(R||(bt(pn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),R=!0),bt(pn,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Zo:()=>E.close()}),F=(D,Q,Z)=>{D.listen(Q,(Y=>{try{Z(Y)}catch(rt){setTimeout((()=>{throw rt}),0)}}))};return F(E,Kl.EventType.OPEN,(()=>{B||(bt(pn,`RPC '${e}' stream ${o} transport opened.`),it.o_())})),F(E,Kl.EventType.CLOSE,(()=>{B||(B=!0,bt(pn,`RPC '${e}' stream ${o} transport closed`),it.a_(),this.E_(E))})),F(E,Kl.EventType.ERROR,(D=>{B||(B=!0,kr(pn,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),it.a_(new _t(dt.UNAVAILABLE,"The operation could not be completed")))})),F(E,Kl.EventType.MESSAGE,(D=>{var Q;if(!B){const Z=D.data[0];he(!!Z,16349);const Y=Z,rt=(Y==null?void 0:Y.error)||((Q=Y[0])==null?void 0:Q.error);if(rt){bt(pn,`RPC '${e}' stream ${o} received error:`,rt);const gt=rt.status;let yt=(function(N){const V=Ye[N];if(V!==void 0)return Z0(V)})(gt),A=rt.message;yt===void 0&&(yt=dt.INTERNAL,A="Unknown error status: "+gt+" with message "+rt.message),B=!0,it.a_(new _t(yt,A)),E.close()}else bt(pn,`RPC '${e}' stream ${o} received:`,Z),it.u_(Z)}})),F(p,g0.STAT_EVENT,(D=>{D.stat===Wh.PROXY?bt(pn,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===Wh.NOPROXY&&bt(pn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{it.__()}),0),it}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(a){return new wE(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,s,r=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&bt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="PersistentStream";class hv{constructor(e,s,r,o,d,m,p,x){this.Mi=e,this.S_=r,this.b_=o,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dv(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===dt.RESOURCE_EXHAUSTED?(ui(s.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new _t(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return bt(Ox,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(bt(Ox,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TT extends hv{constructor(e,s,r,o,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=CE(this.serializer,e),r=(function(d){if(!("targetChange"in d))return Lt.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Lt.min():m.readTime?Ls(m.readTime):Lt.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=df(this.serializer),s.addTarget=(function(d,m){let p;const x=m.target;if(p=af(x)?{documents:DE(d,x)}:{query:ME(d,x).ft},p.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){p.resumeToken=tv(d,m.resumeToken);const y=of(d,m.expectedCount);y!==null&&(p.expectedCount=y)}else if(m.snapshotVersion.compareTo(Lt.min())>0){p.readTime=gu(d,m.snapshotVersion.toTimestamp());const y=of(d,m.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=OE(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=df(this.serializer),s.removeTarget=e,this.q_(s)}}class ST extends hv{constructor(e,s,r,o,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=IE(e.writeResults,e.commitTime),r=Ls(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=df(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>jE(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{}class wT extends AT{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _t(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Go(e,cf(s,r),o,d,m))).catch((d=>{throw d.name==="FirebaseError"?(d.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new _t(dt.UNKNOWN,d.toString())}))}Ho(e,s,r,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,p])=>this.connection.Ho(e,cf(s,r),o,m,p,d))).catch((m=>{throw m.name==="FirebaseError"?(m.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new _t(dt.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NT{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ui(s),this.aa=!1):bt("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class RT{constructor(e,s,r,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((m=>{r.enqueueAndForget((async()=>{Pa(this)&&(bt(Ua,"Restarting streams for network reachability change."),await(async function(x){const y=Pt(x);y.Ea.add(4),await xo(y),y.Ra.set("Unknown"),y.Ea.delete(4),await ju(y)})(this))}))})),this.Ra=new NT(r,o)}}async function ju(a){if(Pa(a))for(const e of a.da)await e(!0)}async function xo(a){for(const e of a.da)await e(!1)}function fv(a,e){const s=Pt(a);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Yf(s)?Qf(s):Yr(s).O_()&&Ff(s,e))}function Hf(a,e){const s=Pt(a),r=Yr(s);s.Ia.delete(e),r.O_()&&mv(s,e),s.Ia.size===0&&(r.O_()?r.L_():Pa(s)&&s.Ra.set("Unknown"))}function Ff(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const s=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Yr(a).Y_(e)}function mv(a,e){a.Va.Ue(e),Yr(a).Z_(e)}function Qf(a){a.Va=new EE({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),Yr(a).start(),a.Ra.ua()}function Yf(a){return Pa(a)&&!Yr(a).x_()&&a.Ia.size>0}function Pa(a){return Pt(a).Ea.size===0}function gv(a){a.Va=void 0}async function CT(a){a.Ra.set("Online")}async function jT(a){a.Ia.forEach(((e,s)=>{Ff(a,e)}))}async function IT(a,e){gv(a),Yf(a)?(a.Ra.ha(e),Qf(a)):a.Ra.set("Unknown")}async function DT(a,e,s){if(a.Ra.set("Online"),e instanceof W0&&e.state===2&&e.cause)try{await(async function(o,d){const m=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,m),o.Ia.delete(p),o.Va.removeTarget(p))})(a,e)}catch(r){bt(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yu(a,r)}else if(e instanceof eu?a.Va.Ze(e):e instanceof J0?a.Va.st(e):a.Va.tt(e),!s.isEqual(Lt.min()))try{const r=await uv(a.localStore);s.compareTo(r)>=0&&await(function(d,m){const p=d.Va.Tt(m);return p.targetChanges.forEach(((x,y)=>{if(x.resumeToken.approximateByteSize()>0){const b=d.Ia.get(y);b&&d.Ia.set(y,b.withResumeToken(x.resumeToken,m))}})),p.targetMismatches.forEach(((x,y)=>{const b=d.Ia.get(x);if(!b)return;d.Ia.set(x,b.withResumeToken(mn.EMPTY_BYTE_STRING,b.snapshotVersion)),mv(d,x);const E=new Fi(b.target,x,y,b.sequenceNumber);Ff(d,E)})),d.remoteSyncer.applyRemoteEvent(p)})(a,s)}catch(r){bt(Ua,"Failed to raise snapshot:",r),await yu(a,r)}}async function yu(a,e,s){if(!Qr(e))throw e;a.Ea.add(1),await xo(a),a.Ra.set("Offline"),s||(s=()=>uv(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{bt(Ua,"Retrying IndexedDB access"),await s(),a.Ea.delete(1),await ju(a)}))}function pv(a,e){return e().catch((s=>yu(a,s,e)))}async function Iu(a){const e=Pt(a),s=ea(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cf;for(;MT(e);)try{const o=await mT(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,VT(e,o)}catch(o){await yu(e,o)}yv(e)&&xv(e)}function MT(a){return Pa(a)&&a.Ta.length<10}function VT(a,e){a.Ta.push(e);const s=ea(a);s.O_()&&s.X_&&s.ea(e.mutations)}function yv(a){return Pa(a)&&!ea(a).x_()&&a.Ta.length>0}function xv(a){ea(a).start()}async function OT(a){ea(a).ra()}async function zT(a){const e=ea(a);for(const s of a.Ta)e.ea(s.mutations)}async function kT(a,e,s){const r=a.Ta.shift(),o=kf.from(r,e,s);await pv(a,(()=>a.remoteSyncer.applySuccessfulWrite(o))),await Iu(a)}async function UT(a,e){e&&ea(a).X_&&await(async function(r,o){if((function(m){return vE(m)&&m!==dt.ABORTED})(o.code)){const d=r.Ta.shift();ea(r).B_(),await pv(r,(()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Iu(r)}})(a,e),yv(a)&&xv(a)}async function zx(a,e){const s=Pt(a);s.asyncQueue.verifyOperationInProgress(),bt(Ua,"RemoteStore received new credentials");const r=Pa(s);s.Ea.add(3),await xo(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await ju(s)}async function LT(a,e){const s=Pt(a);e?(s.Ea.delete(2),await ju(s)):e||(s.Ea.add(2),await xo(s),s.Ra.set("Unknown"))}function Yr(a){return a.ma||(a.ma=(function(s,r,o){const d=Pt(s);return d.sa(),new TT(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(a.datastore,a.asyncQueue,{Xo:CT.bind(null,a),t_:jT.bind(null,a),r_:IT.bind(null,a),H_:DT.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),Yf(a)?Qf(a):a.Ra.set("Unknown")):(await a.ma.stop(),gv(a))}))),a.ma}function ea(a){return a.fa||(a.fa=(function(s,r,o){const d=Pt(s);return d.sa(),new ST(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:OT.bind(null,a),r_:UT.bind(null,a),ta:zT.bind(null,a),na:kT.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Iu(a)):(await a.fa.stop(),a.Ta.length>0&&(bt(Ua,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,s,r,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=d,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,d){const m=Date.now()+r,p=new Xf(e,s,m,o,d);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kf(a,e){if(ui("AsyncQueue",`${e}: ${a}`),Qr(a))return new _t(dt.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{static emptySet(e){return new Or(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||jt.comparator(s.key,r.key):(s,r)=>jt.comparator(s.key,r.key),this.keyedMap=$l(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new Or;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.ga=new De(jt.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class qr{constructor(e,s,r,o,d,m,p,x,y){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=y}static fromInitialDocuments(e,s,r,o,d){const m=[];return s.forEach((p=>{m.push({type:0,doc:p})})),new qr(e,s,Or.emptySet(s),m,r,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PT{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=Pt(s),d=o.queries;o.queries=Ux(),d.forEach(((m,p)=>{for(const x of p.Sa)x.onError(r)}))})(this,new _t(dt.ABORTED,"Firestore shutting down"))}}function Ux(){return new Ba((a=>L0(a)),Su)}async function vv(a,e){const s=Pt(a);let r=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(r=2):(d=new BT,r=e.Da()?0:1);try{switch(r){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(m){const p=Kf(m,`Initialization of query '${Ir(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&$f(s)}async function _v(a,e){const s=Pt(a),r=e.query;let o=3;const d=s.queries.get(r);if(d){const m=d.Sa.indexOf(e);m>=0&&(d.Sa.splice(m,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function qT(a,e){const s=Pt(a);let r=!1;for(const o of e){const d=o.query,m=s.queries.get(d);if(m){for(const p of m.Sa)p.Fa(o)&&(r=!0);m.wa=o}}r&&$f(s)}function GT(a,e,s){const r=Pt(a),o=r.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);r.queries.delete(e)}function $f(a){a.Ca.forEach((e=>{e.next()}))}var mf,Lx;(Lx=mf||(mf={})).Ma="default",Lx.Cache="cache";class bv{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new qr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.key=e}}class Tv{constructor(e){this.key=e}}class HT{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Jt(),this.mutatedKeys=Jt(),this.eu=B0(e),this.tu=new Or(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new kx,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,m=o,p=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,E)=>{const R=o.get(b),B=Au(this.query,E)?E:null,it=!!R&&this.mutatedKeys.has(R.key),F=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let D=!1;R&&B?R.data.isEqual(B.data)?it!==F&&(r.track({type:3,doc:B}),D=!0):this.su(R,B)||(r.track({type:2,doc:B}),D=!0,(x&&this.eu(B,x)>0||y&&this.eu(B,y)<0)&&(p=!0)):!R&&B?(r.track({type:0,doc:B}),D=!0):R&&!B&&(r.track({type:1,doc:R}),D=!0,(x||y)&&(p=!0)),D&&(B?(m=m.add(B),d=F?d.add(b):d.delete(b)):(m=m.delete(b),d=d.delete(b)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const b=this.query.limitType==="F"?m.last():m.first();m=m.delete(b.key),d=d.delete(b.key),r.track({type:1,doc:b})}return{tu:m,iu:r,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((b,E)=>(function(B,it){const F=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:D})}};return F(B)-F(it)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(r),o=o??!1;const p=s&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,y=x!==this.Za;return this.Za=x,m.length!==0||y?{snapshot:new qr(this.query,e.tu,d,m,e.mutatedKeys,x===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Jt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new Tv(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new Ev(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=Jt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zf="SyncEngine";class FT{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class QT{constructor(e){this.key=e,this.hu=!1}}class YT{constructor(e,s,r,o,d,m){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Ba((p=>L0(p)),Su),this.Iu=new Map,this.Eu=new Set,this.du=new De(jt.comparator),this.Au=new Map,this.Ru=new Bf,this.Vu={},this.mu=new Map,this.fu=Pr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XT(a,e,s=!0){const r=Cv(a);let o;const d=r.Tu.get(e);return d?(r.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await Sv(r,e,s,!0),o}async function KT(a,e){const s=Cv(a);await Sv(s,e,!0,!1)}async function Sv(a,e,s,r){const o=await gT(a.localStore,Us(e)),d=o.targetId,m=a.sharedClientState.addLocalQueryTarget(d,s);let p;return r&&(p=await $T(a,e,d,m==="current",o.resumeToken)),a.isPrimaryClient&&s&&fv(a.remoteStore,o),p}async function $T(a,e,s,r,o){a.pu=(E,R,B)=>(async function(F,D,Q,Z){let Y=D.view.ru(Q);Y.Cs&&(Y=await Ix(F.localStore,D.query,!1).then((({documents:A})=>D.view.ru(A,Y))));const rt=Z&&Z.targetChanges.get(D.targetId),gt=Z&&Z.targetMismatches.get(D.targetId)!=null,yt=D.view.applyChanges(Y,F.isPrimaryClient,rt,gt);return Px(F,D.targetId,yt.au),yt.snapshot})(a,E,R,B);const d=await Ix(a.localStore,e,!0),m=new HT(e,d.Qs),p=m.ru(d.documents),x=yo.createSynthesizedTargetChangeForCurrentChange(s,r&&a.onlineState!=="Offline",o),y=m.applyChanges(p,a.isPrimaryClient,x);Px(a,s,y.au);const b=new FT(e,s,m);return a.Tu.set(e,b),a.Iu.has(s)?a.Iu.get(s).push(e):a.Iu.set(s,[e]),y.snapshot}async function ZT(a,e,s){const r=Pt(a),o=r.Tu.get(e),d=r.Iu.get(o.targetId);if(d.length>1)return r.Iu.set(o.targetId,d.filter((m=>!Su(m,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await hf(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Hf(r.remoteStore,o.targetId),gf(r,o.targetId)})).catch(Fr)):(gf(r,o.targetId),await hf(r.localStore,o.targetId,!0))}async function JT(a,e){const s=Pt(a),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Hf(s.remoteStore,r.targetId))}async function WT(a,e,s){const r=rS(a);try{const o=await(function(m,p){const x=Pt(m),y=Ne.now(),b=p.reduce(((B,it)=>B.add(it.key)),Jt());let E,R;return x.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let it=di(),F=Jt();return x.Ns.getEntries(B,b).next((D=>{it=D,it.forEach(((Q,Z)=>{Z.isValidDocument()||(F=F.add(Q))}))})).next((()=>x.localDocuments.getOverlayedDocuments(B,it))).next((D=>{E=D;const Q=[];for(const Z of p){const Y=mE(Z,E.get(Z.key).overlayedDocument);Y!=null&&Q.push(new ia(Z.key,Y,I0(Y.value.mapValue),hs.exists(!0)))}return x.mutationQueue.addMutationBatch(B,y,Q,p)})).next((D=>{R=D;const Q=D.applyToLocalDocumentSet(E,F);return x.documentOverlayCache.saveOverlays(B,D.batchId,Q)}))})).then((()=>({batchId:R.batchId,changes:q0(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(m,p,x){let y=m.Vu[m.currentUser.toKey()];y||(y=new De(Zt)),y=y.insert(p,x),m.Vu[m.currentUser.toKey()]=y})(r,o.batchId,s),await vo(r,o.changes),await Iu(r.remoteStore)}catch(o){const d=Kf(o,"Failed to persist write");s.reject(d)}}async function Av(a,e){const s=Pt(a);try{const r=await hT(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const m=s.Au.get(d);m&&(he(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?m.hu=!0:o.modifiedDocuments.size>0?he(m.hu,14607):o.removedDocuments.size>0&&(he(m.hu,42227),m.hu=!1))})),await vo(s,r,e)}catch(r){await Fr(r)}}function Bx(a,e,s){const r=Pt(a);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((d,m)=>{const p=m.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(m,p){const x=Pt(m);x.onlineState=p;let y=!1;x.queries.forEach(((b,E)=>{for(const R of E.Sa)R.va(p)&&(y=!0)})),y&&$f(x)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tS(a,e,s){const r=Pt(a);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),d=o&&o.key;if(d){let m=new De(jt.comparator);m=m.insert(d,xn.newNoDocument(d,Lt.min()));const p=Jt().add(d),x=new Ru(Lt.min(),new Map,new De(Zt),m,p);await Av(r,x),r.du=r.du.remove(d),r.Au.delete(e),Jf(r)}else await hf(r.localStore,e,!1).then((()=>gf(r,e,s))).catch(Fr)}async function eS(a,e){const s=Pt(a),r=e.batch.batchId;try{const o=await dT(s.localStore,e);Nv(s,r,null),wv(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await vo(s,o)}catch(o){await Fr(o)}}async function nS(a,e,s){const r=Pt(a);try{const o=await(function(m,p){const x=Pt(m);return x.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return x.mutationQueue.lookupMutationBatch(y,p).next((E=>(he(E!==null,37113),b=E.keys(),x.mutationQueue.removeMutationBatch(y,E)))).next((()=>x.mutationQueue.performConsistencyCheck(y))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>x.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);Nv(r,e,s),wv(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await vo(r,o)}catch(o){await Fr(o)}}function wv(a,e){(a.mu.get(e)||[]).forEach((s=>{s.resolve()})),a.mu.delete(e)}function Nv(a,e,s){const r=Pt(a);let o=r.Vu[r.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function gf(a,e,s=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.Iu.get(e))a.Tu.delete(r),s&&a.Pu.yu(r,s);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((r=>{a.Ru.containsKey(r)||Rv(a,r)}))}function Rv(a,e){a.Eu.delete(e.path.canonicalString());const s=a.du.get(e);s!==null&&(Hf(a.remoteStore,s),a.du=a.du.remove(e),a.Au.delete(s),Jf(a))}function Px(a,e,s){for(const r of s)r instanceof Ev?(a.Ru.addReference(r.key,e),sS(a,r)):r instanceof Tv?(bt(Zf,"Document no longer in limbo: "+r.key),a.Ru.removeReference(r.key,e),a.Ru.containsKey(r.key)||Rv(a,r.key)):Vt(19791,{wu:r})}function sS(a,e){const s=e.key,r=s.path.canonicalString();a.du.get(s)||a.Eu.has(r)||(bt(Zf,"New document in limbo: "+s),a.Eu.add(r),Jf(a))}function Jf(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const s=new jt(Se.fromString(e)),r=a.fu.next();a.Au.set(r,new QT(s)),a.du=a.du.insert(s,r),fv(a.remoteStore,new Fi(Us(Vf(s.path)),r,"TargetPurposeLimboResolution",bu.ce))}}async function vo(a,e,s){const r=Pt(a),o=[],d=[],m=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,x)=>{m.push(r.pu(x,e,s).then((y=>{var b;if((y||s)&&r.isPrimaryClient){const E=y?!y.fromCache:(b=s==null?void 0:s.targetChanges.get(x.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(x.targetId,E?"current":"not-current")}if(y){o.push(y);const E=qf.As(x.targetId,y);d.push(E)}})))})),await Promise.all(m),r.Pu.H_(o),await(async function(x,y){const b=Pt(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ht.forEach(y,(R=>ht.forEach(R.Es,(B=>b.persistence.referenceDelegate.addReference(E,R.targetId,B))).next((()=>ht.forEach(R.ds,(B=>b.persistence.referenceDelegate.removeReference(E,R.targetId,B)))))))))}catch(E){if(!Qr(E))throw E;bt(Gf,"Failed to update sequence numbers: "+E)}for(const E of y){const R=E.targetId;if(!E.fromCache){const B=b.Ms.get(R),it=B.snapshotVersion,F=B.withLastLimboFreeSnapshotVersion(it);b.Ms=b.Ms.insert(R,F)}}})(r.localStore,d))}async function iS(a,e){const s=Pt(a);if(!s.currentUser.isEqual(e)){bt(Zf,"User change. New user:",e.toKey());const r=await cv(s.localStore,e);s.currentUser=e,(function(d,m){d.mu.forEach((p=>{p.forEach((x=>{x.reject(new _t(dt.CANCELLED,m))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vo(s,r.Ls)}}function aS(a,e){const s=Pt(a),r=s.Au.get(e);if(r&&r.hu)return Jt().add(r.key);{let o=Jt();const d=s.Iu.get(e);if(!d)return o;for(const m of d){const p=s.Tu.get(m);o=o.unionWith(p.view.nu)}return o}}function Cv(a){const e=Pt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Av.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tS.bind(null,e),e.Pu.H_=qT.bind(null,e.eventManager),e.Pu.yu=GT.bind(null,e.eventManager),e}function rS(a){const e=Pt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nS.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return uT(this.persistence,new lT,e.initialUser,this.serializer)}Cu(e){return new ov(Pf.mi,this.serializer)}Du(e){return new yT}async terminate(){var e,s;(e=this.gcScheduler)==null||e.stop(),(s=this.indexBackfillerScheduler)==null||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class lS extends xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){he(this.persistence.referenceDelegate instanceof pu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QE(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new ov((r=>pu.mi(r,s)),this.serializer)}}class pf{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iS.bind(null,this.syncEngine),await LT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PT})()}createDatastore(e){const s=Cu(e.databaseInfo.databaseId),r=(function(d){return new ET(d)})(e.databaseInfo);return(function(d,m,p,x){return new wT(d,m,p,x)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,d,m,p){return new RT(r,o,d,m,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Bx(this.syncEngine,s,0)),(function(){return Vx.v()?new Vx:new xT})())}createSyncEngine(e,s){return(function(o,d,m,p,x,y,b){const E=new YT(o,d,m,p,x,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await(async function(o){const d=Pt(o);bt(Ua,"RemoteStore shutting down."),d.Ea.add(5),await xo(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(s=this.eventManager)==null||s.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="FirestoreClient";class oS{constructor(e,s,r,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(r,(async m=>{bt(na,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(bt(na,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Kf(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qh(a,e){a.asyncQueue.verifyOperationInProgress(),bt(na,"Initializing OfflineComponentProvider");const s=a.configuration;await e.initialize(s);let r=s.initialUser;a.setCredentialChangeListener((async o=>{r.isEqual(o)||(await cv(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function qx(a,e){a.asyncQueue.verifyOperationInProgress();const s=await cS(a);bt(na,"Initializing OnlineComponentProvider"),await e.initialize(s,a.configuration),a.setCredentialChangeListener((r=>zx(e.remoteStore,r))),a.setAppCheckTokenChangeListener(((r,o)=>zx(e.remoteStore,o))),a._onlineComponents=e}async function cS(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){bt(na,"Using user provided OfflineComponentProvider");try{await Qh(a,a._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===dt.FAILED_PRECONDITION||o.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;kr("Error using user provided cache. Falling back to memory cache: "+s),await Qh(a,new xu)}}else bt(na,"Using default OfflineComponentProvider"),await Qh(a,new lS(void 0));return a._offlineComponents}async function Iv(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(bt(na,"Using user provided OnlineComponentProvider"),await qx(a,a._uninitializedComponentsProvider._online)):(bt(na,"Using default OnlineComponentProvider"),await qx(a,new pf))),a._onlineComponents}function uS(a){return Iv(a).then((e=>e.syncEngine))}async function yf(a){const e=await Iv(a),s=e.eventManager;return s.onListen=XT.bind(null,e.syncEngine),s.onUnlisten=ZT.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=KT.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=JT.bind(null,e.syncEngine),s}function dS(a,e,s={}){const r=new Ki;return a.asyncQueue.enqueueAndForget((async()=>(function(d,m,p,x,y){const b=new jv({next:R=>{b.Nu(),m.enqueueAndForget((()=>_v(d,E))),R.fromCache&&x.source==="server"?y.reject(new _t(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),E=new bv(p,b,{includeMetadataChanges:!0,qa:!0});return vv(d,E)})(await yf(a),a.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="firestore.googleapis.com",Hx=!0;class Fx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _t(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mv,this.ssl=Hx}else this.host=e.host,this.ssl=e.ssl??Hx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HE)throw new _t(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dv(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _t(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _t(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _t(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Du{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _t(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _t(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new x2;switch(r.type){case"firstParty":return new E2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Gx.get(s);r&&(bt("ComponentProvider","Removing Datastore"),Gx.delete(s),r.terminate())})(this),Promise.resolve()}}function hS(a,e,s,r={}){var y;a=ks(a,Du);const o=Af(e),d=a._getSettings(),m={...d,emulatorOptions:a._getEmulatorOptions()},p=`${e}:${s}`;o&&(Fb(`https://${p}`),Kb("Firestore",!0)),d.host!==Mv&&d.host!==p&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...d,host:p,ssl:o,emulatorOptions:r};if(!au(x,m)&&(a._setSettings(x),r.mockUserToken)){let b,E;if(typeof r.mockUserToken=="string")b=r.mockUserToken,E=yn.MOCK_USER;else{b=Qb(r.mockUserToken,(y=a._app)==null?void 0:y.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new _t(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new yn(R)}a._authCredentials=new v2(new v0(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qa(this.firestore,e,this._query)}}class $e{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(mo(s,$e._jsonSchema))return new $e(e,r||null,new jt(Se.fromString(s.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Ke("string",$e._jsonSchemaVersion),referencePath:Ke("string")};class $i extends qa{constructor(e,s,r){super(e,s,Vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new jt(e))}withConverter(e){return new $i(this.firestore,e,this._path)}}function zr(a,e,...s){if(a=qs(a),_0("collection","path",e),a instanceof Du){const r=Se.fromString(e,...s);return ix(r),new $i(a,null,r)}{if(!(a instanceof $e||a instanceof $i))throw new _t(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Se.fromString(e,...s));return ix(r),new $i(a.firestore,null,r)}}function se(a,e,...s){if(a=qs(a),arguments.length===1&&(e=Rf.newId()),_0("doc","path",e),a instanceof Du){const r=Se.fromString(e,...s);return sx(r),new $e(a,null,new jt(r))}{if(!(a instanceof $e||a instanceof $i))throw new _t(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(Se.fromString(e,...s));return sx(r),new $e(a.firestore,a instanceof $i?a.converter:null,new jt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="AsyncQueue";class Yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dv(this,"async_queue_retry"),this._c=()=>{const r=Fh();r&&bt(Qx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=Fh();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Fh();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qr(e))throw e;bt(Qx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",Xx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Xf.createAndSchedule(this,e,s,r,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Vt(47125,{Pc:Xx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Xx(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(a){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of r)if(d in o&&typeof o[d]=="function")return!0;return!1})(a,["next","error","complete"])}class La extends Du{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Yx,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yx(e),this._firestoreClient=void 0,await e}}}function fS(a,e){const s=typeof a=="object"?a:a2(),r=typeof a=="string"?a:cu,o=t2(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const d=Gb("firestore");d&&hS(o,...d)}return o}function Wf(a){if(a._terminated)throw new _t(dt.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||mS(a),a._firestoreClient}function mS(a){var r,o,d;const e=a._freezeSettings(),s=(function(p,x,y,b){return new L2(p,x,y,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Dv(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(a._databaseId,((r=a._app)==null?void 0:r.options.appId)||"",a._persistenceKey,e);a._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new oS(a._authCredentials,a._appCheckCredentials,a._queue,s,a._componentsProvider&&(function(p){const x=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(x),_online:x}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(mn.fromBase64String(e))}catch(s){throw new _t(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Jn(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mo(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ke("string",Jn._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new _t(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new _t(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new _t(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(mo(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:Ke("string",Bs._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let d=0;d<r.length;++d)if(r[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mo(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Ps(e.vectorValues);throw new _t(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:Ke("string",Ps._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=/^__.*__$/;class pS{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new ia(e,this.data,this.fieldMask,s,this.fieldTransforms):new po(e,this.data,s,this.fieldTransforms)}}class Vv{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new ia(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function Ov(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:a})}}class em{constructor(e,s,r,o,d,m){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const s=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){var o;const s=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ov(this.Ac)&&gS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yS{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Cu(e)}Cc(e,s,r,o=!1){return new em({Ac:e,methodName:s,Dc:r,path:fn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nm(a){const e=a._freezeSettings(),s=Cu(a._databaseId);return new yS(a._databaseId,!!e.ignoreUndefinedProperties,s)}function xS(a,e,s,r,o,d={}){const m=a.Cc(d.merge||d.mergeFields?2:0,e,s,o);sm("Data must be an object, but it was:",m,r);const p=zv(r,m);let x,y;if(d.merge)x=new Ln(m.fieldMask),y=m.fieldTransforms;else if(d.mergeFields){const b=[];for(const E of d.mergeFields){const R=xf(e,E,s);if(!m.contains(R))throw new _t(dt.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Uv(b,R)||b.push(R)}x=new Ln(b),y=m.fieldTransforms.filter((E=>x.covers(E.field)))}else x=null,y=m.fieldTransforms;return new pS(new Cn(p),x,y)}class Vu extends tm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vu}}function vS(a,e,s,r){const o=a.Cc(1,e,s);sm("Data must be an object, but it was:",o,r);const d=[],m=Cn.empty();sa(r,((x,y)=>{const b=im(e,x,s);y=qs(y);const E=o.yc(b);if(y instanceof Vu)d.push(b);else{const R=_o(y,E);R!=null&&(d.push(b),m.set(b,R))}}));const p=new Ln(d);return new Vv(m,p,o.fieldTransforms)}function _S(a,e,s,r,o,d){const m=a.Cc(1,e,s),p=[xf(e,r,s)],x=[o];if(d.length%2!=0)throw new _t(dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<d.length;R+=2)p.push(xf(e,d[R])),x.push(d[R+1]);const y=[],b=Cn.empty();for(let R=p.length-1;R>=0;--R)if(!Uv(y,p[R])){const B=p[R];let it=x[R];it=qs(it);const F=m.yc(B);if(it instanceof Vu)y.push(B);else{const D=_o(it,F);D!=null&&(y.push(B),b.set(B,D))}}const E=new Ln(y);return new Vv(b,E,m.fieldTransforms)}function bS(a,e,s,r=!1){return _o(s,a.Cc(r?4:3,e))}function _o(a,e){if(kv(a=qs(a)))return sm("Unsupported field value:",e,a),zv(a,e);if(a instanceof tm)return(function(r,o){if(!Ov(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const d=r._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const d=[];let m=0;for(const p of r){let x=_o(p,o.wc(m));x==null&&(x={nullValue:"NULL_VALUE"}),d.push(x),m++}return{arrayValue:{values:d}}})(a,e)}return(function(r,o){if((r=qs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oE(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const d=Ne.fromDate(r);return{timestampValue:gu(o.serializer,d)}}if(r instanceof Ne){const d=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gu(o.serializer,d)}}if(r instanceof Bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:tv(o.serializer,r._byteString)};if(r instanceof $e){const d=o.databaseId,m=r.firestore._databaseId;if(!m.isEqual(d))throw o.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Lf(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ps)return(function(m,p){return{mapValue:{fields:{[C0]:{stringValue:j0},[uu]:{arrayValue:{values:m.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Of(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${_u(r)}`)})(a,e)}function zv(a,e){const s={};return T0(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(a,((r,o)=>{const d=_o(o,e.mc(r));d!=null&&(s[r]=d)})),{mapValue:{fields:s}}}function kv(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Ne||a instanceof Bs||a instanceof Jn||a instanceof $e||a instanceof tm||a instanceof Ps)}function sm(a,e,s){if(!kv(s)||!b0(s)){const r=_u(s);throw r==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+r)}}function xf(a,e,s){if((e=qs(e))instanceof Mu)return e._internalPath;if(typeof e=="string")return im(a,e);throw vu("Field path arguments must be of type string or ",a,!1,void 0,s)}const ES=new RegExp("[~\\*/\\[\\]]");function im(a,e,s){if(e.search(ES)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,s);try{return new Mu(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,s)}}function vu(a,e,s,r,o){const d=r&&!r.isEmpty(),m=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(d||m)&&(x+=" (found",d&&(x+=` in field ${r}`),m&&(x+=` in document ${o}`),x+=")"),new _t(dt.INVALID_ARGUMENT,p+a+x)}function Uv(a,e){return a.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,s,r,o,d){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(am("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class TS extends Lv{data(){return super.data()}}function am(a,e){return typeof e=="string"?im(a,e):e instanceof Mu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new _t(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class SS extends rm{}function vf(a,e,...s){let r=[];e instanceof rm&&r.push(e),r=r.concat(s),(function(d){const m=d.filter((x=>x instanceof lm)).length,p=d.filter((x=>x instanceof Ou)).length;if(m>1||m>0&&p>0)throw new _t(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)a=o._apply(a);return a}class Ou extends SS{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Ou(e,s,r)}_apply(e){const s=this._parse(e);return Pv(e._query,s),new qa(e.firestore,e.converter,rf(e._query,s))}_parse(e){const s=nm(e.firestore);return(function(d,m,p,x,y,b,E){let R;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new _t(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Zx(E,b);const it=[];for(const F of E)it.push($x(x,d,F));R={arrayValue:{values:it}}}else R=$x(x,d,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Zx(E,b),R=bS(p,m,E,b==="in"||b==="not-in");return Xe.create(y,b,R)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function nu(a,e,s){const r=e,o=am("where",a);return Ou._create(o,r,s)}class lm extends rm{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new lm(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:fs.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let m=o;const p=d.getFlattenedFilters();for(const x of p)Pv(m,x),m=rf(m,x)})(e._query,s),new qa(e.firestore,e.converter,rf(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $x(a,e,s){if(typeof(s=qs(s))=="string"){if(s==="")throw new _t(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U0(e)&&s.indexOf("/")!==-1)throw new _t(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(Se.fromString(s));if(!jt.isDocumentKey(r))throw new _t(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hx(a,new jt(r))}if(s instanceof $e)return hx(a,s._key);throw new _t(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_u(s)}.`)}function Zx(a,e){if(!Array.isArray(a)||a.length===0)throw new _t(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pv(a,e){const s=(function(o,d){for(const m of o)for(const p of m.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new _t(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _t(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class AS{convertValue(e,s="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return sa(e,((o,d)=>{r[o]=this.convertValue(d,s)})),r}convertVectorValue(e){var r,o,d;const s=(d=(o=(r=e.fields)==null?void 0:r[uu].arrayValue)==null?void 0:o.values)==null?void 0:d.map((m=>Ue(m.doubleValue)));return new Ps(s)}convertGeoPoint(e){return new Bs(Ue(e.latitude),Ue(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Tu(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){const s=Ji(e);return new Ne(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Se.fromString(e);he(rv(r),9688,{name:e});const o=new oo(r.get(1),r.get(3)),d=new jt(r.popFirst(5));return o.isEqual(s)||ui(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(a,e,s){let r;return r=a?a.toFirestore(e):e,r}class Jl{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oa extends Lv{constructor(e,s,r,o,d,m){super(e,s,r,o,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Oa._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oa._jsonSchema={type:Ke("string",Oa._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class su extends Oa{data(e={}){return super.data(e)}}class za{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new su(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new _t(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((p=>{const x=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const x=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),b=m.indexOf(p.doc.key)),{type:NS(p.type),doc:x,oldIndex:y,newIndex:b}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _t(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),r.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NS(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:a})}}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:Ke("string",za._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class om extends AS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,s)}}function _f(a){a=ks(a,qa);const e=ks(a.firestore,La),s=Wf(e),r=new om(e);return Bv(a._query),dS(s,a._query).then((o=>new za(e,r,a,o)))}function de(a,e,s,...r){a=ks(a,$e);const o=ks(a.firestore,La),d=nm(o);let m;return m=typeof(e=qs(e))=="string"||e instanceof Mu?_S(d,"updateDoc",a._key,e,s,r):vS(d,"updateDoc",a._key,e),cm(o,[m.toMutation(a._key,hs.exists(!0))])}function bf(a){return cm(ks(a.firestore,La),[new zf(a._key,hs.none())])}function Ef(a,e){const s=ks(a.firestore,La),r=se(a),o=wS(a.converter,e);return cm(s,[xS(nm(a.firestore),"addDoc",r._key,o,a.converter!==null,{}).toMutation(r._key,hs.exists(!1))]).then((()=>r))}function Jx(a,...e){var x,y,b;a=qs(a);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Kx(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kx(e[r])){const E=e[r];e[r]=(x=E.next)==null?void 0:x.bind(E),e[r+1]=(y=E.error)==null?void 0:y.bind(E),e[r+2]=(b=E.complete)==null?void 0:b.bind(E)}let d,m,p;if(a instanceof $e)m=ks(a.firestore,La),p=Vf(a._key.path),d={next:E=>{e[r]&&e[r](RS(m,a,E))},error:e[r+1],complete:e[r+2]};else{const E=ks(a,qa);m=ks(E.firestore,La),p=E._query;const R=new om(m);d={next:B=>{e[r]&&e[r](new za(m,R,E,B))},error:e[r+1],complete:e[r+2]},Bv(a._query)}return(function(R,B,it,F){const D=new jv(F),Q=new bv(B,D,it);return R.asyncQueue.enqueueAndForget((async()=>vv(await yf(R),Q))),()=>{D.Nu(),R.asyncQueue.enqueueAndForget((async()=>_v(await yf(R),Q)))}})(Wf(m),p,o,d)}function cm(a,e){return(function(r,o){const d=new Ki;return r.asyncQueue.enqueueAndForget((async()=>WT(await uS(r),o,d))),d.promise})(Wf(a),e)}function RS(a,e,s){const r=s.docs.get(e._key),o=new om(a);return new Oa(a,o,e._key,r,new Jl(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(o){Hr=o})(i2),lu(new io("firestore",((r,{instanceIdentifier:o,options:d})=>{const m=r.getProvider("app").getImmediate(),p=new La(new _2(r.getProvider("auth-internal")),new T2(m,r.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _t(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(y.options.projectId,b)})(m,o),m);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),Vr(Wy,tx,e),Vr(Wy,tx,"esm2020")})();const CS={apiKey:"AIzaSyBd7y1447dqwXQUjoBypLWa4BuORFeZ3s0",authDomain:"gestionale-tornei-2025.firebaseapp.com",projectId:"gestionale-tornei-2025",storageBucket:"gestionale-tornei-2025.firebasestorage.app",messagingSenderId:"138966224551",appId:"1:138966224551:web:1c5fc18d8aee6667d69582",measurementId:"G-4TMJJF6WQ9"},jS=c0(CS),Qt=fS(jS),IS=({event:a,tournament:e,setEvents:s})=>{var it;const[r,o]=lt.useState(((it=e.groups[0])==null?void 0:it.id)??""),d=e.groups.find(F=>F.id===r),[m,p]=lt.useState((d==null?void 0:d.rules)??""),[x,y]=lt.useState(!1),[b,E]=lt.useState("");lt.useEffect(()=>{p((d==null?void 0:d.rules)??""),E("")},[r,e.groups]);const R=F=>{o(F);const D=e.groups.find(Q=>Q.id===F);p((D==null?void 0:D.rules)??"")},B=async()=>{if(!d)return;y(!0),E("");const F=e.groups.map(D=>D.id===d.id?{...D,rules:m}:D);s(D=>D.map(Q=>Q.id!==a.id?Q:{...Q,tournaments:Q.tournaments.map(Z=>Z.id===e.id?{...Z,groups:F}:Z)})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(D=>D.id===e.id?{...D,groups:F}:D)}),y(!1),E("Regolamento salvato per il girone!")};return d?h.jsxs("div",{className:"mb-8 bg-secondary p-6 rounded-xl shadow-md",children:[h.jsx("h3",{className:"text-xl mb-4 font-bold text-accent",children:"Regolamenti Gironi"}),h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsx("label",{className:"font-semibold",children:"Scegli Girone:"}),h.jsx("select",{value:r,onChange:F=>R(F.target.value),className:"bg-tertiary rounded px-3 py-2 font-bold",children:e.groups.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))})]}),h.jsx("textarea",{value:m,onChange:F=>p(F.target.value),className:"w-full rounded bg-primary border p-3 min-h-[120px] mb-3",placeholder:"Scrivi qui il regolamento per il girone selezionato...",disabled:x}),h.jsx("button",{onClick:B,disabled:x,className:"bg-highlight text-white px-4 py-2 rounded font-bold",children:x?"Salvando...":"Salva regolamento per girone"}),b&&h.jsx("div",{className:"text-green-600 mt-3 font-semibold",children:b})]}):null};function DS(){return"slot_"+Math.random().toString(36).slice(2,10)}function MS(a){const e={};return(a.tournaments||[]).forEach(s=>{(s.groups||[]).forEach(r=>{(r.matches||[]).forEach(o=>{o.slotId&&(o.status==="scheduled"||o.status==="completed")&&(e[o.slotId]={match:o,group:r,tournament:s})})})}),e}function Wx(a){if(!a)return"";const e=new Date(a);if(isNaN(e.getTime()))return a;const s=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),d=String(e.getHours()).padStart(2,"0"),m=String(e.getMinutes()).padStart(2,"0");return`${s}/${r}/${o}, ${d}:${m}`}function VS(a){const e={};return(a.tournaments||[]).forEach(s=>{(s.groups||[]).forEach(r=>{(r.matches||[]).forEach(o=>{o.slotId&&o.status==="scheduled"&&(e[o.slotId]={match:o,group:r,tournament:s})})})}),e}const OS=({event:a,tournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o,selectedGroupId:d,globalTimeSlots:m=[]})=>{const[p,x]=lt.useState({start:"",location:"",field:""}),[y,b]=lt.useState(""),[E,R]=lt.useState(null),[B,it]=lt.useState(""),[F,D]=lt.useState("");if(!e){const Z=MS(a),Y=VS(a),rt=m.filter(A=>!Z[A.id]),gt=async()=>{if(b(""),!p.start||isNaN(Date.parse(p.start))){b("Inserisci una data e ora valida (ISO oppure YY-MM-DD HH:mm:ss).");return}if(!p.location){b("Inserisci il campo/luogo.");return}const A={id:DS(),start:p.start,location:p.location,field:p.field},w=[...a.globalTimeSlots||[],A];s(N=>N.map(V=>V.id===a.id?{...V,globalTimeSlots:w}:V)),await de(se(Qt,"events",a.id),{globalTimeSlots:w})},yt=async A=>{const w=(a.globalTimeSlots||[]).filter(N=>N.id!==A);s(N=>N.map(V=>V.id===a.id?{...V,globalTimeSlots:w}:V)),await de(se(Qt,"events",a.id),{globalTimeSlots:w})};return h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 text-accent",children:"Slot Orari Globali"}),h.jsx("h3",{className:"text-xl font-bold mb-6 text-accent",children:"Gestione slot orari globali"}),r&&h.jsxs("div",{className:"bg-[#212737] rounded-xl p-5 mb-6 shadow-lg w-full max-w-md flex flex-col gap-3",children:[h.jsx("h4",{className:"font-bold text-[#3AF2C5] text-lg mb-1",children:"Aggiungi nuovo slot"}),h.jsx("input",{type:"datetime-local",value:p.start,onChange:A=>x({...p,start:A.target.value}),placeholder:"Data e ora",className:"input mb-2 bg-[#22283A] text-white font-bold placeholder:text-white placeholder:font-bold"}),h.jsx("input",{type:"text",value:p.location,onChange:A=>x({...p,location:A.target.value}),placeholder:"Luogo",className:"input mb-2 bg-[#22283A] text-white font-bold placeholder:text-white placeholder:font-bold"}),h.jsx("input",{type:"text",value:p.field,onChange:A=>x({...p,field:A.target.value}),placeholder:"Campo",className:"input mb-2 bg-[#22283A] text-white font-bold placeholder:text-white placeholder:font-bold"}),h.jsx("button",{onClick:gt,className:"btn-accent self-start px-5 py-1 rounded font-semibold",children:"Aggiungi slot"}),y&&h.jsx("span",{className:"text-red-600 font-semibold",children:y})]}),h.jsxs("div",{className:"bg-[#212737] rounded-xl shadow-lg p-5 mb-6 w-full max-w-xl",children:[h.jsx("h4",{className:"font-bold text-[#3AF2C5] text-lg mb-3",children:"Slot disponibili"}),rt.length===0?h.jsx("p",{className:"text-gray-400 font-bold",children:"Nessuno slot libero."}):h.jsx("ul",{className:"space-y-2",children:rt.map(A=>h.jsxs("li",{className:"flex items-center justify-between border-b border-gray-800 pb-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-white",children:Wx(A.start)})," ",h.jsx("span",{className:"text-white",children:"-"})," ",h.jsx("span",{className:"text-accent font-bold",children:A.location})," ",h.jsx("span",{className:"text-white",children:"-"})," ",h.jsx("span",{className:"text-tertiary font-bold",children:A.field})]}),h.jsx("div",{children:r&&h.jsx("button",{className:"btn-tertiary px-3 py-1 rounded font-semibold",onClick:()=>yt(A.id),children:"Elimina"})})]},A.id))})]}),h.jsxs("div",{className:"bg-[#212737] rounded-xl shadow-lg p-5 mb-6 w-full max-w-xl",children:[h.jsx("h4",{className:"font-bold text-[#3AF2C5] text-lg mb-3",children:"Slot prenotati"}),Object.keys(Y).length===0?h.jsx("p",{className:"text-gray-400 font-bold",children:"Nessuna partita programmata."}):h.jsx("ul",{className:"space-y-2",children:Object.entries(Y).map(([A,w])=>{const N=m.find(V=>V.id===A);return N?{slot:N,...w}:null}).filter(Boolean).sort((A,w)=>{var M,z;const N=(M=A.slot)!=null&&M.start?new Date(A.slot.start).getTime():0,V=(z=w.slot)!=null&&z.start?new Date(w.slot.start).getTime():0;return N-V}).map(({slot:A,match:w,group:N,tournament:V})=>{var I,wt;const M=((I=a.players.find(St=>St.id===w.player1Id))==null?void 0:I.name)||w.player1Id,z=((wt=a.players.find(St=>St.id===w.player2Id))==null?void 0:wt.name)||w.player2Id;return h.jsxs("li",{className:"flex flex-col px-2 py-2 rounded bg-[#22283A] mb-2",children:[h.jsxs("span",{className:"font-bold text-white",children:[Wx(A.start)," - ",A.location," - ",A.field]}),h.jsx("span",{className:"font-bold text-accent",children:"Partita programmata:"}),h.jsxs("span",{className:"text-white font-bold",children:[M," vs ",z," ","(",V.name,", girone: ",N.name,")"]}),h.jsx("span",{className:"text-sm text-gray-300",children:"Stato: Programmata"})]},A.id)})})]})]})}e!=null&&e.groups&&e.groups.flatMap(Z=>Z.matches.filter(Y=>Y.status==="pending"&&(Y.player1Id===o||Y.player2Id===o)));const Q=a.tournaments.flatMap(Z=>Z.groups?Z.groups.flatMap(Y=>Y.matches.filter(rt=>rt.slotId&&(rt.status==="scheduled"||rt.status==="completed")).map(rt=>rt.slotId)):[]);return m.filter(Z=>!Q.includes(Z.id)),h.jsx("div",{})},zS=a=>{const e=new Date(a.start),s=e.toLocaleDateString("it-IT"),r=e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"});return`${s}  ${r}`},qv=({event:a,tournament:e,userId:s,onClickBook:r,matchesPending:o=[]})=>{const d=a.tournaments.flatMap(p=>p.groups||[]).flatMap(p=>p.matches||[]).filter(p=>p.slotId&&(p.status==="scheduled"||p.status==="completed")).map(p=>p.slotId),m=(a.globalTimeSlots||[]).filter(p=>!d.includes(p.id));return h.jsxs("div",{className:"bg-secondary p-5 rounded-xl shadow-lg max-w-2xl mx-auto my-8",children:[h.jsx("h3",{className:"text-lg font-bold mb-4 text-accent",children:"Slot Disponibili"}),m.length===0?h.jsx("p",{className:"text-text-secondary font-semibold",children:"Nessuno slot disponibile."}):h.jsx("ul",{className:"divide-y divide-tertiary",children:m.map(p=>h.jsxs("li",{className:"flex items-center justify-between py-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold",children:zS(p)}),p.location&&h.jsx("span",{className:"ml-2 text-accent",children:p.location}),p.field&&h.jsx("span",{className:"ml-2 text-tertiary",children:p.field})]}),r&&(o==null?void 0:o.length)>0?h.jsx("button",{className:"bg-accent hover:bg-highlight text-white px-4 py-2 rounded font-bold transition",onClick:()=>r(p),children:"Prenota"}):null]},p.id))}),r&&(!o||o.length===0)&&h.jsx("div",{className:"text-xs mt-3 text-text-secondary",children:h.jsx("span",{children:"Non hai partite prenotabili al momento."})})]})},kS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),US=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:a,children:h.jsx("path",{d:"M16.6 14.2c-.2-.1-1.5-.7-1.7-.8-.2-.1-.4-.1-.6.1-.2.2-.6.7-.8.9-.1.1-.3.1-.5 0-.2-.1-1-.4-1.9-1.2-.7-.6-1.2-1.4-1.3-1.6-.1-.2 0-.4.1-.5.1-.1.2-.2.4-.4.1-.1.2-.2.2-.4.1-.1.1-.2 0-.4-.1-.1-1.2-2.8-1.6-3.8-.4-1-.8-.8-.6-.8h.5c.2 0 .4.1.6.5.2.4.7 1.8.8 1.9.1.1.2.3.1.4-.1.1-.2.2-.4.4-.1.1-.3.3-.4.3-.1.1-.1.2.0.4 0.1,0.2 0.7,1.2 1.5,2 1,1 1.8,1.3 2,1.4 0.2,0.1 0.3,0 0.4-0.1 0.2-0.2 0.4-0.8 0.5-1 0.1-0.2 0.2-0.2 0.4-0.1s1.2 0.6 1.4 0.7c0.2 0.1 0.4 0.2 0.4 0.3 0.1 0.1 0.1 0.6-0.1 1.2s-1.1 1.2-1.3 1.2c-0.3 0-0.5-0.1-0.7-0.2zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"})}),LS=({className:a="w-5 h-5"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),Gv=({className:a="w-6 h-6"})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9.75 9.75 0 011.016-5.71 1.5 1.5 0 013.192.422 9.75 9.75 0 015.78 5.288zM12 21a9 9 0 100-18 9 9 0 000 18z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75V15m0 0V12.75m0 0H9.75m2.25 0h2.25"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6.75h.008v.008h-.008V6.75zm-7.5 0h.008v.008H8.25V6.75z"})]}),um=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),fo=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),BS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),PS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),qS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),GS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),HS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.828 14.828a4.06 4.06 0 01-5.656 0M9 10.5h.008v.008H9v-.008zm6 0h.008v.008h-.008v-.008zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),FS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),QS=({className:a="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),YS=()=>`${Date.now()}${Math.floor(Math.random()*1e4)}`,XS=({event:a,onSelectTournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o})=>{var C;const[d,m]=lt.useState(a.rules??""),[p,x]=lt.useState(!1),[y,b]=lt.useState(!1),[E,R]=lt.useState(""),[B,it]=lt.useState(!1),[F,D]=lt.useState(""),[Q,Z]=lt.useState(!1),[Y,rt]=lt.useState(null),[gt,yt]=lt.useState(null),[A,w]=lt.useState(""),[N,V]=lt.useState(!1);lt.useEffect(()=>{m(a.rules??"")},[a]);const M=async()=>{b(!0);try{s(j=>j.map(k=>k.id===a.id?{...k,rules:d}:k)),await de(se(Qt,"events",a.id),{rules:d}),R("Regolamento salvato!"),x(!1),setTimeout(()=>R(""),2500)}catch(j){console.error("Errore salvataggio regolamento",j)}finally{b(!1)}},z={pointsPerDraw:1,pointRules:[],tieBreakers:["wins","goalDifference","headToHead","goalsFor"],playoffSettings:[],consolationSettings:[],hasBronzeFinal:!1},I=()=>{rt(null),D(""),it(!0)},wt=()=>{it(!1),D(""),rt(null)},St=async j=>{if(j&&j.preventDefault(),rt(null),!F.trim()){rt("Inserisci il nome del torneo.");return}Z(!0);try{const k={id:YS(),name:F.trim(),groups:[],matches:[],settings:{...z}};s(P=>P.map(ct=>ct.id===a.id?{...ct,tournaments:[...ct.tournaments??[],k]}:ct)),await de(se(Qt,"events",a.id),{tournaments:(a.tournaments??[]).concat(k)}),it(!1),D("")}catch(k){console.error("Errore creazione torneo",k),rt((k==null?void 0:k.message)||"Errore durante la creazione del torneo")}finally{Z(!1)}},tt=async j=>{if(confirm("Sei sicuro di voler eliminare questo torneo?"))try{const k=(a.tournaments??[]).filter(P=>P.id!==j);s(P=>P.map(ct=>ct.id===a.id?{...ct,tournaments:k}:ct)),await de(se(Qt,"events",a.id),{tournaments:k})}catch(k){console.error("Errore eliminazione torneo",k)}},H=j=>{yt(j),w(j.name)},q=j=>{let k=0,P=0;return(j.groups??[]).forEach(ct=>{(ct.matches??[]).forEach(st=>{k++,(st.score1!=null&&st.score2!=null||st.status==="finished"||st.status==="completed")&&P++})}),{total:k,completed:P}},L=(j,k)=>{if(!k)return;const P=(j.groups||[]).find(ct=>(ct.playerIds||[]).includes(k));return P==null?void 0:P.id},J=(a.globalTimeSlots??[]).slice().sort((j,k)=>{const P=j!=null&&j.start?new Date(j.start).getTime():0,ct=k!=null&&k.start?new Date(k.start).getTime():0;return P-ct});return h.jsxs("div",{children:[h.jsx("div",{className:"bg-primary p-6 rounded-xl shadow-lg mb-8",children:h.jsxs("div",{className:"flex justify-between items-start gap-6",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:a.name}),h.jsxs("div",{className:"text-sm text-text-secondary",children:["Codice Invito: ",h.jsx("span",{className:"font-bold text-accent",children:a.invitationCode})]})]}),r&&h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{type:"button",onClick:I,className:"bg-accent px-5 py-2 rounded-lg text-white font-bold hover:bg-accent/80 shadow transition-all flex items-center gap-2",children:[h.jsx(um,{className:"w-4 h-4"}),"+ Aggiungi Torneo"]})})]})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Tornei"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(a.tournaments??[]).map(j=>{var ft;const{total:k,completed:P}=q(j),ct=k>0?Math.round(P/k*100):0,st=!!(o&&(j.groups||[]).some(vt=>(vt.playerIds||[]).includes(o))),pt=L(j,o),re=`p-4 rounded-xl flex flex-col justify-between transition-all duration-300 ${st?"bg-gradient-to-br from-indigo-700 to-indigo-600 ring-2 ring-accent transform scale-[1.01]":"bg-secondary"}`,je=`text-xl font-bold mb-2 ${st?"text-white":"text-accent"}`;return h.jsxs("div",{className:re,children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("h3",{className:je,children:j.name}),r&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>H(j),className:"text-text-secondary/80 hover:text-text-primary p-1 rounded",title:"Modifica nome torneo",children:"Modifica"}),h.jsx("button",{onClick:()=>tt(j.id),className:"text-text-secondary/60 hover:text-red-500 p-1 rounded",title:"Elimina torneo",children:h.jsx(fo,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[h.jsx("button",{onClick:()=>e(j,"matches",pt),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Partite",children:"Partite"}),h.jsx("button",{onClick:()=>e(j,"standings",pt),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Classifica",children:"Classifica"}),h.jsx("button",{onClick:()=>e(j,"participants"),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Partecipanti",children:"Partecipanti"}),h.jsx("button",{onClick:()=>e(j,"playoffs"),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Playoff",children:"Playoff"}),h.jsx("button",{onClick:()=>e(j,"consolation"),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Consolazione",children:"Consolazione"}),h.jsx("button",{onClick:()=>e(j,"slot",pt),className:"text-sm bg-tertiary/60 text-white px-3 py-1 rounded hover:bg-tertiary transition",title:"Apri il tab Slot Disponibili",children:"Slot Disponibili"})]}),h.jsx("div",{className:"flex items-center gap-3 mb-2 mt-4",children:h.jsxs("span",{className:"text-sm text-text-secondary",children:[((ft=j.groups)==null?void 0:ft.length)??0," gironi"]})}),h.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Progresso"}),h.jsx("div",{className:"w-full bg-tertiary/30 h-2 rounded-full mb-2",children:h.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${ct}%`}})}),h.jsxs("div",{className:"text-xs text-text-secondary mb-2 flex items-center justify-between",children:[h.jsxs("span",{children:[P," / ",k," partite"]}),h.jsxs("span",{children:[ct,"% Completato"]})]})]}),h.jsxs("div",{className:"mt-3 flex gap-2",children:[h.jsx("button",{onClick:()=>e(j),className:`text-white py-2 px-4 rounded-lg font-bold ${st?"bg-highlight/90 hover:bg-highlight":"bg-accent"}`,children:"Visualizza Torneo"}),st&&h.jsx("span",{className:"ml-auto inline-block bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded",children:"Il mio torneo"})]})]},j.id)})})]}),h.jsx(qv,{event:a}),r&&a.globalTimeSlots&&h.jsxs("div",{className:"mb-10",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Slot Orari Globali"}),h.jsx(OS,{event:a,tournament:void 0,setEvents:s,isOrganizer:r,loggedInPlayerId:o,selectedGroupId:void 0,globalTimeSlots:J})]}),r&&h.jsxs("div",{className:"bg-tertiary p-6 rounded-xl shadow-lg mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("h3",{className:"text-xl font-bold text-accent",children:"Regolamento Torneo"}),!p&&h.jsx("button",{onClick:()=>x(!0),className:"py-1 px-4 bg-highlight text-white rounded-lg font-semibold",children:"Modifica"})]}),p?h.jsxs("div",{children:[h.jsx("textarea",{value:d,onChange:j=>m(j.target.value),className:"w-full rounded bg-primary border p-3 min-h-[120px] mb-3",placeholder:"Scrivi qui il regolamento per il girone selezionato...",disabled:y}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:M,disabled:y,className:"bg-highlight text-white px-4 py-2 rounded font-bold",children:y?"Salvando...":"Salva regolamento per girone"}),h.jsx("button",{onClick:()=>{x(!1),m(a.rules??"")},className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"})]}),E&&h.jsx("div",{className:"text-green-600 mt-3 font-semibold",children:E})]}):h.jsx("div",{className:"bg-primary p-4 rounded-lg border border-tertiary mt-2 whitespace-pre-line",children:(C=a.rules)!=null&&C.trim()?a.rules:h.jsx("span",{className:"text-text-secondary",children:"Nessun regolamento inserito dall'organizzatore."})})]}),r&&(a.tournaments??[]).length>0&&(a.tournaments??[]).map(j=>h.jsx(IS,{event:a,tournament:j,setEvents:s},j.id)),B&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify_center z-50",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4 text-accent",children:"Aggiungi Nuovo Torneo"}),h.jsxs("form",{onSubmit:St,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1",children:"Nome Torneo"}),h.jsx("input",{autoFocus:!0,value:F,onChange:j=>D(j.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2",placeholder:"Esempio: Torneo Primavera"})]}),Y&&h.jsx("div",{className:"text-red-400",children:Y}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx("button",{onClick:wt,className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{type:"submit",disabled:Q,className:"bg-highlight text-white px-4 py-2 rounded font-bold",children:Q?"Creazione...":"Crea Torneo"})]})]})]})})]})},bo=(a,e,s)=>{const r={};return(Array.isArray(a.playerIds)?a.playerIds:[]).forEach(o=>{r[o]={playerId:o,played:0,wins:0,draws:0,losses:0,points:0,goalsFor:0,goalsAgainst:0,goalDifference:0}}),(Array.isArray(a.matches)?a.matches:[]).forEach(o=>{if(o.status!=="completed"||o.score1===null||o.score2===null)return;const{player1Id:d,player2Id:m,score1:p,score2:x}=o,y=r[d],b=r[m];if(!(!y||!b))if(y.played++,b.played++,y.goalsFor+=p,b.goalsFor+=x,y.goalsAgainst+=x,b.goalsAgainst+=p,y.goalDifference=y.goalsFor-y.goalsAgainst,b.goalDifference=b.goalsFor-b.goalsAgainst,p>x){y.wins++,b.losses++;const E=p-x,R=s.pointRules.find(B=>E>=B.minDiff&&E<=B.maxDiff);R&&(y.points+=R.winnerPoints,b.points+=R.loserPoints)}else if(x>p){b.wins++,y.losses++;const E=x-p,R=s.pointRules.find(B=>E>=B.minDiff&&E<=B.maxDiff);R&&(b.points+=R.winnerPoints,y.points+=R.loserPoints)}else y.draws++,b.draws++,y.points+=s.pointsPerDraw,b.points+=s.pointsPerDraw}),Object.values(r).sort((o,d)=>{if(d.points!==o.points)return d.points-o.points;for(const m of s.tieBreakers){let p=0;switch(m){case"headToHead":const x=(Array.isArray(a.matches)?a.matches:[]).find(y=>y.status==="completed"&&(y.player1Id===o.playerId&&y.player2Id===d.playerId||y.player1Id===d.playerId&&y.player2Id===o.playerId));if(x&&x.score1!==null&&x.score2!==null&&x.score1!==x.score2){const y=x.score1>x.score2?x.player1Id:x.player2Id;if(y===o.playerId)return-1;if(y===d.playerId)return 1}break;case"wins":p=d.wins-o.wins;break;case"goalDifference":p=d.goalDifference-o.goalDifference;break;case"goalsFor":p=d.goalsFor-o.goalsFor;break}if(p!==0)return p}return 0})},KS=({group:a,players:e,settings:s,loggedInPlayerId:r,onPlayerContact:o})=>{const d=lt.useMemo(()=>bo(a,e,s),[a,e,s]),m=p=>e.find(x=>x.id===p);return h.jsx("div",{className:"overflow-x-auto bg-secondary rounded-xl shadow-lg",children:h.jsxs("table",{className:"min-w-full text-sm text-left text-text-primary",children:[h.jsx("thead",{className:"bg-tertiary/50 text-xs uppercase text-text-secondary",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-4 py-3",children:"#"}),h.jsx("th",{scope:"col",className:"px-4 py-3",children:"Giocatore"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Punti",children:"PT"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Giocate",children:"G"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Vinte",children:"V"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Nulle",children:"N"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Perse",children:"P"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Differenza Game",children:"DG"}),h.jsx("th",{scope:"col",className:"px-2 py-3 text-center",title:"Game Fatti",children:"GF"})]})}),h.jsx("tbody",{children:d.map((p,x)=>{const y=m(p.playerId);if(!y)return null;const b=p.playerId===r;return h.jsxs("tr",{className:`border-b border-tertiary/50 transition-colors ${b?"bg-highlight/10":"hover:bg-tertiary/20"}`,children:[h.jsx("td",{className:`px-4 py-3 font-medium ${b?"text-accent":""} ${b?"border-l-4 border-accent":""}`,children:x+1}),h.jsx("th",{scope:"row",className:"px-4 py-3 font-medium whitespace-nowrap",children:h.jsxs("button",{onClick:()=>o(y),className:"flex items-center gap-3 text-left hover:text-accent transition-colors",children:[h.jsx("img",{src:y.avatar,alt:y.name,className:"w-8 h-8 rounded-full object-cover"}),h.jsx("span",{className:b?"text-text-primary":"",children:y.name})]})}),h.jsx("td",{className:`px-2 py-3 text-center font-bold ${b?"text-text-primary":""}`,children:p.points}),h.jsx("td",{className:"px-2 py-3 text-center",children:p.played}),h.jsx("td",{className:"px-2 py-3 text-center text-green-400",children:p.wins}),h.jsx("td",{className:"px-2 py-3 text-center text-yellow-400",children:p.draws}),h.jsx("td",{className:"px-2 py-3 text-center text-red-400",children:p.losses}),h.jsx("td",{className:"px-2 py-3 text-center",children:p.goalDifference>0?`+${p.goalDifference}`:p.goalDifference}),h.jsx("td",{className:"px-2 py-3 text-center",children:p.goalsFor})]},p.playerId)})})]})})};function $S({eventName:a,opponentName:e,date:s,startTime:r}){const o=b=>String(b).padStart(2,"0"),d=(()=>{const[b,E]=r.split(":").map(Number),R=new Date(`${s}T${r}`);return R.setHours(b+1),o(R.getHours())+o(R.getMinutes())})(),m=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",`SUMMARY:${a} - Partita vs ${e}`,`DTSTART:${s.replace(/-/g,"")}T${r.replace(":","")}00`,`DTEND:${s.replace(/-/g,"")}T${d}00`,`DESCRIPTION:Partita torneo contro ${e}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`),p=new Blob([m],{type:"text/calendar"}),x=URL.createObjectURL(p),y=document.createElement("a");y.href=x,y.download=`${a}_vs_${e}.ics`,y.click(),setTimeout(()=>URL.revokeObjectURL(x),1e3)}function ZS({eventName:a,opponentName:e,date:s,startTime:r,durationMinutes:o=60,location:d="",description:m=""}){const[p,x]=r.split(":").map(Number);let y=new Date(`${s}T${r}:00`);if(isNaN(y.getTime())){const Z=s.split("-").map(Number);y=new Date(Z[0],Z[1]-1,Z[2],p,x,0)}const b=new Date(y.getTime()+o*6e4),E=Z=>{const Y=V=>String(V).padStart(2,"0"),rt=Z.getUTCFullYear(),gt=Y(Z.getUTCMonth()+1),yt=Y(Z.getUTCDate()),A=Y(Z.getUTCHours()),w=Y(Z.getUTCMinutes()),N=Y(Z.getUTCSeconds());return`${rt}${gt}${yt}T${A}${w}${N}Z`},R=E(y),B=E(b),it=encodeURIComponent(`${a} - vs ${e}`),F=encodeURIComponent(m||`Partita vs ${e}`),D=encodeURIComponent(d||""),Q=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${it}&details=${F}&location=${D}&dates=${R}/${B}`;window.open(Q,"_blank")}const Yh=({match:a,player1:e,player2:s,onEditResult:r,onBookMatch:o,isOrganizer:d,loggedInPlayerId:m,onPlayerContact:p,onRescheduleMatch:x,onCancelBooking:y,onDeleteResult:b,viewingOwnGroup:E=!1})=>{if(!e||!s)return h.jsx("div",{className:"bg-secondary p-4 rounded-lg shadow",children:h.jsx("div",{className:"text-text-secondary",children:"Giocatori non disponibili per questa partita."})});const R=!!(m&&(m===e.id||m===s.id)),B=d||R&&E,it=d||R&&E,F=d||R&&E,D=d||R&&E,Q=a.status==="scheduled"&&a.scheduledTime?{date:new Date(a.scheduledTime).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}),time:new Date(a.scheduledTime).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),field:a.field||a.location||""}:null,Z=a.scheduledTime?a.scheduledTime.slice(0,10):"",Y=a.scheduledTime?a.scheduledTime.slice(11,16):"";return h.jsxs("div",{className:"bg-secondary p-4 rounded-lg shadow",children:[h.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 justify-start",children:[h.jsx("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full object-cover"}),h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),p(e)},className:"text-left font-semibold hover:underline text-text-primary cursor-pointer",children:e.name})]}),h.jsxs("div",{className:"flex flex-col items-center",children:[a.score1!=null&&a.score2!=null?h.jsxs("div",{className:"text-2xl font-bold text-center",children:[a.score1,"  ",a.score2]}):h.jsx("div",{className:"text-lg font-medium text-center text-text-secondary",children:"vs"}),Q&&h.jsxs("div",{className:"text-sm text-text-secondary mt-2 text-center",children:[h.jsxs("span",{children:[Q.date,"  ",Q.time]}),Q.field&&h.jsx("div",{className:"font-bold text-white",children:Q.field})]})]}),h.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),p(s)},className:"font-semibold hover:underline text-text-primary cursor-pointer",children:s.name}),h.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full object-cover"})]})]}),h.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4 mt-4 border-t border-tertiary/50",children:[a.status==="pending"&&F&&h.jsx("button",{onClick:rt=>{if(rt.stopPropagation(),console.log("[MatchList] Prenota button clicked, match id=",a==null?void 0:a.id," onBookMatch present?",typeof o=="function"),typeof o=="function")try{o(a)}catch(gt){console.error("[MatchList] Error calling onBookMatch:",gt)}else console.warn("[MatchList] onBookMatch is not a function. Cannot book match.")},className:"bg-accent/80 hover:bg-accent text-primary font-bold py-2 px-3 rounded-lg text-sm transition-colors",type:"button",children:"Prenota"}),it&&h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),r(a)},className:"bg-highlight/80 hover:bg-highlight text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"Risultato"}),a.status==="scheduled"&&B&&x&&h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),x(a)},className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"Modifica pren."}),a.status==="scheduled"&&B&&y&&h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),y(a)},className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"Annulla pren."}),a.score1!=null&&a.score2!=null&&D&&b&&h.jsx("button",{type:"button",onClick:rt=>{rt.stopPropagation(),console.log("[MatchList] Elimina risultato clicked, match id=",a==null?void 0:a.id," onDeleteResult present?",typeof b=="function");try{b(a)}catch(gt){console.error("[MatchList] Error calling onDeleteResult:",gt)}},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"Elimina risultato"})]}),a.status==="scheduled"&&R&&Q&&h.jsxs("div",{className:"flex gap-2 mt-4 justify-center",children:[h.jsx("button",{className:"bg-highlight text-white text-xs px-3 py-1 rounded hover:bg-accent",onClick:()=>{const rt="Partita torneo";m===e.id?e.name:s.name;const gt=m===e.id?s.name:e.name;$S({eventName:rt,opponentName:gt,date:Z,startTime:Y})},children:"Scarica .ics"}),h.jsx("button",{className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",onClick:()=>{const rt="Partita torneo",gt=m===e.id?s.name:e.name,yt=Q.field||"",A=`Partita del torneo contro ${gt} - prenotata tramite Tournament Manager.`;ZS({eventName:rt,opponentName:gt,date:Z,startTime:Y,durationMinutes:60,location:yt,description:A})},children:"Aggiungi a Google Calendar"}),h.jsx("a",{className:"bg-green-600 text-white text-xs px-3 py-1 rounded hover:bg-green-700",target:"_blank",rel:"noopener noreferrer",href:(()=>{const rt=m===e.id?e.name:s.name,gt=m===e.id?s.name:e.name,yt=m===e.id?s.phone:e.phone,A=encodeURIComponent(`Ciao ${gt},
ti ricordo che hai una partita prenotata al torneo contro di me (${rt}) il ${Z} alle ${Y}.`);return`https://wa.me/${yt==null?void 0:yt.replace(/[^0-9]/g,"")}?text=${A}`})(),children:"Invia promemoria WhatsApp"})]})]})},JS=({group:a=null,players:e=[],onEditResult:s,onBookMatch:r,isOrganizer:o,loggedInPlayerId:d,onPlayerContact:m,onRescheduleMatch:p,onCancelBooking:x,onDeleteResult:y,viewingOwnGroup:b=!1})=>{const[E,R]=lt.useState(o?"all":"my");if(!a)return h.jsx("p",{className:"text-center text-text-secondary py-6",children:"Seleziona un girone per vedere le partite."});const B=Y=>e.find(rt=>rt.id===Y),F=(Y=>a.matches.filter(rt=>{const gt=!!(d&&(rt.player1Id===d||rt.player2Id===d));return rt.status===Y&&(E==="all"||gt)}))("pending"),D=a.matches.filter(Y=>Y.status==="scheduled"&&Y.slotId&&Y.scheduledTime&&(E==="all"||!!d&&(Y.player1Id===d||Y.player2Id===d))),Q=a.matches.filter(Y=>Y.score1!=null&&Y.score2!=null),Z=Y=>Y.slice().sort((rt,gt)=>{const yt=rt.scheduledTime?new Date(rt.scheduledTime).getTime():0,A=gt.scheduledTime?new Date(gt.scheduledTime).getTime():0;return yt-A});return h.jsxs("div",{className:"space-y-6",children:[!o&&h.jsx("div",{className:"flex justify-center mb-4",children:h.jsxs("div",{className:"bg-tertiary/50 rounded-lg p-1 flex",children:[h.jsx("button",{onClick:()=>R("my"),className:`px-4 py-1 text-sm font-semibold rounded-md transition-colors ${E==="my"?"bg-highlight text-white":"text-text-secondary"}`,type:"button",children:"Le mie"}),h.jsx("button",{onClick:()=>R("all"),className:`px-4 py-1 text-sm font-semibold rounded-md transition-colors ${E==="all"?"bg-highlight text-white":"text-text-secondary"}`,type:"button",children:"Tutte"})]})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-accent",children:"Partite Programmate"}),h.jsx("div",{className:"space-y-3",children:D.length>0?Z(D).map(Y=>h.jsx(Yh,{match:Y,player1:B(Y.player1Id),player2:B(Y.player2Id),onEditResult:s,onBookMatch:r,isOrganizer:o,loggedInPlayerId:d,onPlayerContact:m,onRescheduleMatch:p,onCancelBooking:x,onDeleteResult:y,viewingOwnGroup:b},Y.id)):h.jsx("p",{className:"text-text-secondary text-center py-4",children:"Nessuna partita programmata."})})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-accent",children:"Partite da Fare"}),h.jsx("div",{className:"space-y-3",children:F.length>0?F.map(Y=>h.jsx(Yh,{match:Y,player1:B(Y.player1Id),player2:B(Y.player2Id),onEditResult:s,onBookMatch:r,isOrganizer:o,loggedInPlayerId:d,onPlayerContact:m,onRescheduleMatch:p,onCancelBooking:x,onDeleteResult:y,viewingOwnGroup:b},Y.id)):h.jsx("p",{className:"text-text-secondary text-center py-4",children:"Nessuna partita da disputare."})})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-accent",children:"Partite Completate"}),h.jsx("div",{className:"space-y-3",children:Q.length>0?Q.map(Y=>h.jsx(Yh,{match:Y,player1:B(Y.player1Id),player2:B(Y.player2Id),onEditResult:s,onBookMatch:r,isOrganizer:o,loggedInPlayerId:d,onPlayerContact:m,onRescheduleMatch:p,onCancelBooking:x,onDeleteResult:y,viewingOwnGroup:b},Y.id)):h.jsx("p",{className:"text-text-secondary text-center py-4",children:"Nessuna partita completata."})})]})]})},WS=({event:a,tournament:e,loggedInPlayerId:s})=>{const r=e.groups.find(o=>o.playerIds.includes(s||""));return r?h.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-secondary rounded-xl shadow space-y-6",children:[h.jsxs("h2",{className:"text-2xl font-bold mb-4 text-accent",children:["Partecipanti del Girone ",h.jsx("span",{className:"text-white",children:r.name})]}),h.jsx("ul",{className:"flex flex-col gap-3",children:r.playerIds.map(o=>{var x;const d=a.players.find(y=>y.id===o);if(!d)return null;const m=(x=d.phone)==null?void 0:x.replace(/[^0-9]/g,""),p=m?`https://wa.me/${m}`:void 0;return h.jsxs("li",{className:"bg-primary rounded-lg p-3 flex items-center justify-between hover:bg-primary/80 transition",children:[h.jsx("span",{className:"font-medium text-white",children:d.name}),p&&h.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-bold transition",title:`Contatta ${d.name} su WhatsApp`,children:"WhatsApp"})]},o)})})]}):h.jsx("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-2xl mx-auto text-center text-text-secondary",children:"Non sei assegnato a nessun girone."})},tA=()=>`${Date.now()}${Math.floor(Math.random()*1e4)}`,eA=({event:a,tournament:e,setEvents:s,isOrganizer:r})=>{const[o,d]=lt.useState(null),[m,p]=lt.useState(new Set),[x,y]=lt.useState(null),[b,E]=lt.useState(!1),[R,B]=lt.useState(""),[it,F]=lt.useState(4),[D,Q]=lt.useState(!1),[Z,Y]=lt.useState(null),[rt,gt]=lt.useState(""),[yt,A]=lt.useState(0),[w,N]=lt.useState(""),[V,M]=lt.useState(!1),[z,I]=lt.useState(null),[wt,St]=lt.useState(!1),[tt,H]=lt.useState(null),[q,L]=lt.useState(""),J=ft=>{d(ft),p(new Set(ft.playerIds)),L("")},C=ft=>{p(vt=>{const zt=new Set(vt);return zt.has(ft)?zt.delete(ft):zt.add(ft),zt})},j=async()=>{if(!o)return;const ft=e.groups.map(vt=>vt.id===o.id?{...vt,playerIds:Array.from(m)}:vt);s(vt=>vt.map(zt=>zt.id!==a.id?zt:{...zt,tournaments:zt.tournaments.map(kt=>kt.id!==e.id?kt:{...kt,groups:ft})})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(vt=>vt.id===e.id?{...vt,groups:ft}:vt)}),d(null)},k=async()=>{if(!x)return;const{player:ft,group:vt}=x,zt=e.groups.map(kt=>kt.id!==vt.id?kt:{...kt,playerIds:kt.playerIds.filter(ce=>ce!==ft.id),matches:kt.matches.filter(ce=>ce.player1Id!==ft.id&&ce.player2Id!==ft.id)});s(kt=>kt.map(ce=>ce.id!==a.id?ce:{...ce,tournaments:ce.tournaments.map(te=>te.id!==e.id?te:{...te,groups:zt})})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(kt=>kt.id===e.id?{...kt,groups:zt}:kt)}),y(null)},P=async ft=>{var ce;if(ft.playerIds.length<2){alert("Sono necessari almeno 2 giocatori per generare le partite.");return}const vt=!!((ce=e.settings)!=null&&ce.groupRoundRobin&&e.settings.groupRoundRobin[ft.id]),zt=[];for(let te=0;te<ft.playerIds.length;te++)for(let Ft=te+1;Ft<ft.playerIds.length;Ft++)zt.push({id:`m${Date.now()}${te}${Ft}`,player1Id:ft.playerIds[te],player2Id:ft.playerIds[Ft],score1:null,score2:null,status:"pending"}),vt&&zt.push({id:`m${Date.now()}${Ft}${te}_r`,player1Id:ft.playerIds[Ft],player2Id:ft.playerIds[te],score1:null,score2:null,status:"pending"});const kt=e.groups.map(te=>te.id===ft.id?{...te,matches:zt}:te);s(te=>te.map(Ft=>Ft.id!==a.id?Ft:{...Ft,tournaments:Ft.tournaments.map(fe=>fe.id===e.id?{...fe,groups:kt}:fe)})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(te=>te.id===e.id?{...te,groups:kt}:te)})},ct=()=>{B(""),F(4),H(null),E(!0)},st=async()=>{St(!0),H(null);try{const ft={id:tA(),name:R||`Girone ${e.groups.length+1}`,playerIds:[],matches:[],rules:""},vt=[...e.groups,ft];s(zt=>zt.map(kt=>kt.id!==a.id?kt:{...kt,tournaments:kt.tournaments.map(ce=>ce.id===e.id?{...ce,groups:vt}:ce)})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(zt=>zt.id===e.id?{...zt,groups:vt}:zt)}),E(!1),B(""),F(4)}catch(ft){console.error("Errore aggiunta girone",ft),H((ft==null?void 0:ft.message)||"Errore durante la creazione del girone")}finally{St(!1)}},pt=ft=>{var vt;Y(ft),gt(ft.name),A(((vt=ft.playerIds)==null?void 0:vt.length)??0),N(ft.rules??""),H(null),Q(!0)},Nt=async()=>{var ft;if(Z){St(!0),H(null);try{const vt=Z,zt=Math.max(0,Math.floor(yt));let kt=vt.playerIds?vt.playerIds.slice(0,zt):[];zt>(((ft=vt.playerIds)==null?void 0:ft.length)??0)&&(kt=vt.playerIds??[]);const ce=(vt.playerIds??[]).slice(zt),te=vt.matches?vt.matches.filter(Ie=>!ce.includes(Ie.player1Id)&&!ce.includes(Ie.player2Id)):[],Ft={...vt,name:rt,playerIds:kt,matches:te,rules:w},fe=e.groups.map(Ie=>Ie.id===Ft.id?Ft:Ie);s(Ie=>Ie.map(Wn=>Wn.id!==a.id?Wn:{...Wn,tournaments:Wn.tournaments.map(ts=>ts.id===e.id?{...ts,groups:fe}:ts)})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(Ie=>Ie.id===e.id?{...Ie,groups:fe}:Ie)}),Q(!1),Y(null)}catch(vt){console.error("Errore salvataggio modifica girone",vt),H((vt==null?void 0:vt.message)||"Errore durante il salvataggio della modifica")}finally{St(!1)}}},At=ft=>{I(ft),M(!0),H(null)},Ut=async()=>{if(z){St(!0),H(null);try{const ft=e.groups.filter(vt=>vt.id!==z.id);s(vt=>vt.map(zt=>zt.id!==a.id?zt:{...zt,tournaments:zt.tournaments.map(kt=>kt.id===e.id?{...kt,groups:ft}:kt)})),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(vt=>vt.id===e.id?{...vt,groups:ft}:vt)}),I(null),M(!1)}catch(ft){console.error("Errore eliminazione girone",ft),H((ft==null?void 0:ft.message)||"Errore durante l'eliminazione del girone")}finally{St(!1)}}},re=ft=>a.players.find(vt=>vt.id===ft),je=lt.useMemo(()=>{const ft=q.trim().toLowerCase();return(a.players??[]).slice().filter(vt=>ft?(vt.name??"").toLowerCase().includes(ft)||(vt.email??"").toLowerCase().includes(ft):!0).sort((vt,zt)=>(vt.name??"").localeCompare(zt.name??""))},[a.players,q]);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-accent",children:"Gestione Gironi"}),h.jsx("div",{className:"flex gap-2",children:h.jsx("button",{onClick:ct,className:"bg-accent hover:bg-accent/90 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"+ Aggiungi Girone"})})]}),e.groups.map(ft=>{var vt;return h.jsxs("div",{className:"bg-secondary p-4 rounded-xl shadow-md mb-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h4",{className:"text-lg font-bold text-accent",children:ft.name}),h.jsxs("span",{className:"text-sm text-text-secondary",children:[ft.playerIds.length," giocatori"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>J(ft),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors",children:"Assegna Giocatori"}),h.jsx("button",{onClick:()=>P(ft),disabled:ft.playerIds.length<2,className:"bg-highlight hover:bg-highlight/90 text-white font-bold py-2 px-3 rounded-lg text-sm transition-colors disabled:bg-tertiary disabled:cursor-not-allowed",children:"Genera Partite"}),h.jsx("button",{onClick:()=>pt(ft),className:"bg-tertiary hover:bg-tertiary/90 text-text-primary py-2 px-3 rounded-lg text-sm transition-colors",children:"Modifica"}),h.jsxs("button",{onClick:()=>At(ft),className:"bg-red-600 hover:bg-red-700 text-white py-2 px-3 rounded-lg text-sm transition-colors flex items-center gap-2",children:[h.jsx(fo,{className:"w-4 h-4"}),"Elimina"]})]})]}),h.jsxs("div",{children:[h.jsxs("h5",{className:"text-sm font-semibold mb-2 text-text-secondary",children:["Giocatori Assegnati (",ft.playerIds.length,")"]}),ft.playerIds.length>0?h.jsx("ul",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ft.playerIds.map(zt=>{const kt=re(zt);return kt?h.jsxs("li",{className:"bg-tertiary/50 p-2 rounded-lg flex items-center justify-between gap-2 group/player",children:[h.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[h.jsx("img",{src:kt.avatar,alt:kt.name,className:"w-8 h-8 rounded-full flex-shrink-0 object-cover"}),h.jsx("span",{className:"text-sm font-medium truncate",children:kt.name})]}),h.jsx("button",{onClick:()=>y({player:kt,group:ft}),className:"opacity-0 group-hover/player:opacity-100 text-text-secondary/50 hover:text-red-500 transition-colors p-1",children:h.jsx(fo,{className:"w-4 h-4"})})]},zt):null})}):h.jsx("p",{className:"text-text-secondary/80 italic text-sm",children:"Nessun giocatore assegnato a questo girone."})]}),h.jsxs("div",{className:"mt-4 pt-3 border-t border-tertiary/40",children:[h.jsx("h5",{className:"text-sm font-semibold mb-2 text-text-secondary",children:"Regolamento del Girone"}),h.jsx("div",{className:"bg-tertiary p-3 rounded-lg border border-tertiary",children:(vt=ft.rules)!=null&&vt.trim()?h.jsx("div",{style:{whiteSpace:"pre-line"},children:ft.rules}):h.jsx("span",{className:"text-text-secondary",children:"Nessun regolamento inserito per questo girone."})})]})]},ft.id)}),e.groups.length===0&&h.jsx("p",{className:"text-center text-text-secondary py-8",children:"Crea un girone per iniziare la gestione."}),o&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsxs("h4",{className:"text-lg font-bold mb-4",children:["Assegna Giocatori a ",o.name]}),h.jsx("div",{className:"mb-3",children:h.jsx("input",{id:"assignSearchInput",type:"text",value:q,onChange:ft=>L(ft.target.value),placeholder:"Cerca giocatore...",className:"w-full bg-primary border border-tertiary rounded px-3 py-2",autoFocus:!0})}),h.jsx("ul",{className:"mb-4 space-y-2 max-h-80 overflow-auto",children:je.map(ft=>h.jsxs("li",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",checked:m.has(ft.id),onChange:()=>C(ft.id)}),h.jsx("img",{src:ft.avatar,alt:ft.name,className:"w-7 h-7 rounded-full object-cover"}),h.jsx("span",{className:"font-medium",children:ft.name})]},ft.id))}),h.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[h.jsx("button",{onClick:()=>d(null),className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:j,className:"bg-highlight text-white px-4 py-2 rounded font-bold",children:"Salva Assegnazione"})]})]})}),x&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Rimuovi Giocatore dal Girone"}),h.jsxs("p",{className:"text-text-secondary mb-4",children:["Sei sicuro di voler rimuovere ",h.jsx("strong",{children:x.player.name})," dal girone ",h.jsx("strong",{children:x.group.name}),"? Questa operazione rimuover anche le sue partite nel girone."]}),h.jsxs("div",{className:"flex justify-end gap-4",children:[h.jsx("button",{onClick:()=>y(null),className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Rimuovi Giocatore"})]})]})}),D&&Z&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Modifica Girone"}),h.jsx("input",{value:rt,onChange:ft=>gt(ft.target.value),placeholder:"Nome girone",className:"w-full mb-2 p-2 rounded bg-primary border",autoFocus:!0}),h.jsxs("label",{className:"text-sm text-text-secondary",children:["Numero attuale di giocatori: ",Z.playerIds.length]}),h.jsx("p",{className:"text-sm text-text-secondary mb-2",children:'Per modificare i giocatori usa "Assegna Giocatori". Ridurre il numero rimuover i giocatori oltre la dimensione scelta e le loro partite verranno eliminate.'}),h.jsxs("div",{className:"mb-2",children:[h.jsx("label",{className:"text-sm text-text-secondary",children:"Regolamento del girone"}),h.jsx("textarea",{value:w,onChange:ft=>N(ft.target.value),placeholder:"Scrivi qui il regolamento per questo girone...",className:"w-full p-2 rounded bg-tertiary border mb-2 min-h-[80px]",rows:4})]}),h.jsxs("div",{className:"flex justify-end gap-4",children:[h.jsx("button",{onClick:()=>{Q(!1),Y(null)},className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:Nt,disabled:wt,className:"bg-highlight text-white px-4 py-2 rounded",children:wt?"Salvando...":"Salva Modifica"})]}),tt&&h.jsx("div",{className:"text-red-400 mt-2",children:tt})]})}),b&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Aggiungi nuovo Girone"}),h.jsx("input",{value:R,onChange:ft=>B(ft.target.value),placeholder:"Nome girone",className:"w-full mb-2 p-2 rounded bg-primary border",autoFocus:!0}),h.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Il nuovo girone partir senza giocatori e senza partite."}),h.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[h.jsx("button",{onClick:()=>E(!1),className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:st,disabled:wt||!R.trim(),className:"bg-highlight text-white px-4 py-2 rounded font-bold",children:wt?"Creando...":"Crea Girone"})]}),tt&&h.jsx("div",{className:"text-red-400 mt-2",children:tt})]})}),V&&z&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Conferma Eliminazione Girone"}),h.jsxs("p",{className:"text-text-secondary",children:['Sei sicuro di voler eliminare il girone "',z.name,'"? Questa azione rimuover anche le partite associate.']}),tt&&h.jsx("div",{className:"text-red-400 mt-2",children:tt}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>{M(!1),I(null)},className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:Ut,disabled:wt,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:wt?"Eliminando...":"Elimina Girone"})]})]})})]})},nA={goalDifference:"Differenza Game",goalsFor:"Game Fatti",wins:"Numero Vittorie",headToHead:"Scontro Diretto"},t0={pointsPerDraw:1,pointRules:[],tieBreakers:["wins","goalDifference","headToHead","goalsFor"],playoffSettings:[],consolationSettings:[],hasBronzeFinal:!1},sA=({event:a,tournament:e,setEvents:s})=>{const[r,o]=lt.useState({...t0,...e.settings||{},groupRoundRobin:e.settings&&e.settings.groupRoundRobin?e.settings.groupRoundRobin:{}}),[d,m]=lt.useState(!1);lt.useEffect(()=>{o({...t0,...e.settings||{},groupRoundRobin:e.settings&&e.settings.groupRoundRobin?e.settings.groupRoundRobin:{}})},[e]);const p=(D,Q,Z)=>{const Y=parseInt(Z,10)||0;o(rt=>({...rt,pointRules:rt.pointRules.map(gt=>gt.id===D?{...gt,[Q]:Y}:gt)}))},x=()=>{const D={id:`pr_${Date.now()}`,minDiff:1,maxDiff:1,winnerPoints:3,loserPoints:0};o(Q=>({...Q,pointRules:[...Q.pointRules,D]}))},y=D=>{o(Q=>({...Q,pointRules:Q.pointRules.filter(Z=>Z.id!==D)}))},b=(D,Q)=>{const Z=[...r.tieBreakers],Y=Z[D],rt=Q==="up"?D-1:D+1;rt<0||rt>=Z.length||(Z[D]=Z[rt],Z[rt]=Y,o(gt=>({...gt,tieBreakers:Z})))},E=(D,Q)=>{var rt,gt;const Z=parseInt(Q,10)||0,Y=Array.isArray(e.groups)?((gt=(rt=e.groups.find(yt=>yt.id===D))==null?void 0:rt.playerIds)==null?void 0:gt.length)??0:0;Z>Y||o(yt=>{const A=yt.playoffSettings.find(N=>N.groupId===D);let w;return A?w=yt.playoffSettings.map(N=>N.groupId===D?{...N,numQualifiers:Z}:N):w=[...yt.playoffSettings,{groupId:D,numQualifiers:Z}],{...yt,playoffSettings:w}})},R=(D,Q,Z)=>{const Y=parseInt(Z,10)||0;o(rt=>{const gt=rt.consolationSettings.find(A=>A.groupId===D);let yt;return gt?yt=rt.consolationSettings.map(A=>A.groupId===D?{...A,[Q]:Y}:A):yt=[...rt.consolationSettings,{groupId:D,startRank:0,endRank:0,[Q]:Y}],yt=yt.filter(A=>A.startRank!==0||A.endRank!==0),{...rt,consolationSettings:yt}})},B=D=>{o(Q=>{const Z={...Q.groupRoundRobin||{}};return Z[D]=!Z[D],{...Q,groupRoundRobin:Z}})},it=async D=>{D.preventDefault(),s(Q=>Q.map(Z=>Z.id===a.id?{...Z,tournaments:Z.tournaments.map(Y=>Y.id===e.id?{...Y,settings:r}:Y)}:Z)),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(Q=>Q.id===e.id?{...Q,settings:r}:Q)}),m(!0),setTimeout(()=>m(!1),2e3)},F="w-16 text-center bg-primary p-2 rounded-lg border border-tertiary focus:ring-2 focus:ring-accent";return h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-3xl mx-auto",children:[h.jsx("h3",{className:"text-xl font-bold mb-6 text-accent",children:"Impostazioni Torneo"}),h.jsxs("form",{onSubmit:it,className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-text-primary",children:"Regole Punteggio per Vittoria"}),h.jsxs("div",{className:"space-y-3 bg-primary/50 p-4 rounded-lg",children:[r.pointRules.map(D=>h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-center",children:[h.jsxs("div",{className:"col-span-1 sm:col-span-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-sm",children:"Se diff. game  tra"}),h.jsx("input",{type:"number",value:D.minDiff,onChange:Q=>p(D.id,"minDiff",Q.target.value),className:F}),h.jsx("span",{children:"e"}),h.jsx("input",{type:"number",value:D.maxDiff,onChange:Q=>p(D.id,"maxDiff",Q.target.value),className:F})]}),h.jsxs("div",{className:"col-span-1 sm:col-span-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-sm",children:"Punti:"}),h.jsx("input",{type:"number",value:D.winnerPoints,onChange:Q=>p(D.id,"winnerPoints",Q.target.value),className:F,title:"Punti Vinci"}),h.jsx("span",{children:"(V)"}),h.jsx("input",{type:"number",value:D.loserPoints,onChange:Q=>p(D.id,"loserPoints",Q.target.value),className:F,title:"Punti Sconfitto"}),h.jsx("span",{children:"(S)"})]}),h.jsx("div",{className:"col-span-1 flex justify-end",children:h.jsx("button",{type:"button",onClick:()=>y(D.id),className:"text-text-secondary/50 hover:text-red-500 transition-colors p-2",children:h.jsx(fo,{className:"w-5 h-5"})})})]},D.id)),h.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-sm text-accent hover:text-accent-hover font-semibold mt-2",children:[h.jsx(um,{className:"w-5 h-5"}),"Aggiungi Regola"]})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"pointsPerDraw",className:"block mb-1 text-lg font-semibold text-text-primary",children:"Punti per Pareggio"}),h.jsx("input",{type:"number",id:"pointsPerDraw",name:"pointsPerDraw",value:r.pointsPerDraw,onChange:D=>o({...r,pointsPerDraw:parseInt(D.target.value,10)||0}),className:"w-40 bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent"})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-text-primary",children:"Criteri Ordine Classifica (in caso di parit)"}),h.jsx("div",{className:"space-y-2 bg-primary/50 p-4 rounded-lg max-w-sm",children:(r.tieBreakers||[]).map((D,Q)=>h.jsxs("div",{className:"flex items-center justify-between bg-tertiary/50 p-2 rounded-lg",children:[h.jsxs("span",{className:"font-medium",children:[Q+1,". ",nA[D]]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("button",{type:"button",onClick:()=>b(Q,"up"),disabled:Q===0,className:"p-1 disabled:opacity-30 text-text-secondary hover:text-text-primary",children:h.jsx(BS,{className:"w-4 h-4"})}),h.jsx("button",{type:"button",onClick:()=>b(Q,"down"),disabled:Q===(r.tieBreakers||[]).length-1,className:"p-1 disabled:opacity-30 text-text-secondary hover:text-text-primary",children:h.jsx(PS,{className:"w-4 h-4"})})]})]},D))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-text-primary",children:"Andata e Ritorno per Girone"}),h.jsx("div",{className:"space-y-2 bg-primary/50 p-4 rounded-lg max-w-md",children:Array.isArray(e.groups)&&e.groups.length>0?e.groups.map(D=>{const Q=!!(r.groupRoundRobin&&r.groupRoundRobin[D.id]);return h.jsxs("div",{className:"flex items-center justify-between bg-tertiary/50 p-2 rounded-lg",children:[h.jsx("div",{className:"font-medium",children:D.name}),h.jsxs("label",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:Q,onChange:()=>B(D.id)}),h.jsx("span",{className:"text-sm",children:"Andata e Ritorno"})]})]},D.id)}):h.jsx("p",{className:"text-text-secondary",children:"Nessun girone creato per questo torneo."})})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-text-primary",children:"Impostazioni Playoff"}),h.jsxs("div",{className:"space-y-3 bg-primary/50 p-4 rounded-lg max-w-sm",children:[h.jsx("div",{className:"mb-4",children:h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.hasBronzeFinal,onChange:D=>o({...r,hasBronzeFinal:D.target.checked}),className:"w-5 h-5 rounded bg-primary border-tertiary text-accent focus:ring-accent ring-offset-secondary"}),h.jsx("span",{children:"Includi Finale 3/4 Posto"})]})}),h.jsx("p",{className:"text-sm text-text-secondary pt-2 border-t border-tertiary/50",children:"Specifica quanti giocatori si qualificano da ogni girone."}),Array.isArray(e.groups)&&e.groups.map(D=>{var Q;return h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("label",{htmlFor:`qualifiers-${D.id}`,className:"font-medium",children:D.name}),h.jsx("select",{id:`qualifiers-${D.id}`,value:((Q=r.playoffSettings.find(Z=>Z.groupId===D.id))==null?void 0:Q.numQualifiers)??0,onChange:Z=>E(D.id,Z.target.value),className:"w-24 bg-tertiary border border-tertiary/50 rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",children:[...Array((Array.isArray(D.playerIds)?D.playerIds.length:0)+1).keys()].map(Z=>h.jsx("option",{value:Z,children:Z},Z))})]},D.id)}),(!Array.isArray(e.groups)||e.groups.length===0)&&h.jsx("p",{className:"text-text-secondary",children:"Crea prima i gironi."})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3 text-text-primary",children:"Impostazioni Tabellone di Consolazione"}),h.jsxs("div",{className:"space-y-3 bg-primary/50 p-4 rounded-lg max-w-sm",children:[h.jsx("p",{className:"text-sm text-text-secondary",children:"Specifica quali giocatori si qualificano (es. dal 4 al 5 posto)."}),Array.isArray(e.groups)&&e.groups.map(D=>{const Q=r.consolationSettings.find(gt=>gt.groupId===D.id),Z=(Q==null?void 0:Q.startRank)??0,Y=(Q==null?void 0:Q.endRank)??0,rt=[...Array((Array.isArray(D.playerIds)?D.playerIds.length:0)+1).keys()];return h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("label",{htmlFor:`consolation-start-${D.id}`,className:"font-medium flex-1",children:D.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm",children:"Dal"}),h.jsx("select",{id:`consolation-start-${D.id}`,value:Z,onChange:gt=>R(D.id,"startRank",gt.target.value),className:"w-20 bg-tertiary border border-tertiary/50 rounded-lg p-1 text-text-primary text-sm focus:ring-2 focus:ring-accent",children:rt.map(gt=>h.jsx("option",{value:gt,children:gt===0?"N/A":`${gt}`},gt))}),h.jsx("span",{className:"text-sm",children:"al"}),h.jsx("select",{id:`consolation-end-${D.id}`,value:Y,onChange:gt=>R(D.id,"endRank",gt.target.value),className:"w-20 bg-tertiary border border-tertiary/50 rounded-lg p-1 text-text-primary text-sm focus:ring-2 focus:ring-accent",children:rt.map(gt=>h.jsx("option",{value:gt,children:gt===0?"N/A":`${gt}`},gt))})]})]},D.id)}),(!Array.isArray(e.groups)||e.groups.length===0)&&h.jsx("p",{className:"text-text-secondary",children:"Crea prima i gironi."})]})]}),h.jsxs("div",{className:"flex items-center justify-end pt-4",children:[d&&h.jsx("span",{className:"text-green-400 mr-4 transition-opacity duration-300 animate-fadeIn",children:"Impostazioni salvate!"}),h.jsx("button",{type:"submit",className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-lg shadow-highlight/20",children:"Salva Impostazioni"})]})]})]})},iA=({event:a,tournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o})=>{var tt,H,q;const[d,m]=lt.useState((tt=e.playoffs)!=null&&tt.isGenerated?"bracket":"setup"),p=lt.useMemo(()=>{const L=[];return e.groups.forEach(J=>{const C=e.settings.playoffSettings.find(j=>j.groupId===J.id);if(C&&C.numQualifiers>0){const k=bo(J,a.players,e.settings).slice(0,C.numQualifiers).map((P,ct)=>({playerId:P.playerId,rank:ct+1,fromGroup:J.id,groupName:J.name}));L.push(...k)}}),L},[e,a.players]),x=lt.useMemo(()=>{const L=p.length;return L<2?0:2**Math.ceil(Math.log2(L))},[p]),[y,b]=lt.useState([]),[E,R]=lt.useState(null),[B,it]=lt.useState(""),[F,D]=lt.useState(""),[Q,Z]=lt.useState(!1);lt.useEffect(()=>{d==="setup"&&b(Array(x).fill(null))},[p,d,x]);const Y=L=>L?a.players.find(J=>J.id===L)??null:null,rt=(L,J)=>{b(C=>{const j=[...C],k=j.findIndex(P=>P===J);return k!==-1&&J!=="BYE"&&(j[k]=null),j[L]=J===""?null:J,j})},gt=async()=>{var ct;if(y.some(st=>st===null)){alert("Per favore, riempi tutti gli slot del primo turno.");return}const L=[],J=Math.log2(x);let C=0;for(let st=1;st<=J;st++){const pt=x/2**st;for(let Nt=0;Nt<pt;Nt++)L.push({id:`plm-${C}`,round:st,matchIndex:C,player1Id:null,player2Id:null,score1:null,score2:null,winnerId:null,nextMatchId:null,loserGoesToBronzeFinal:st===J-1}),C++}L.forEach(st=>{if(st.round<J){const Nt=L.filter(re=>re.round===st.round).findIndex(re=>re.id===st.id),Ut=L.filter(re=>re.round===st.round+1)[Math.floor(Nt/2)];Ut&&(st.nextMatchId=Ut.id)}});let j=null;if(x>2&&e.settings.hasBronzeFinal){const st={id:"plm-bronze",isBronzeFinal:!0,round:J,matchIndex:999,player1Id:null,player2Id:null,score1:null,score2:null,winnerId:null,nextMatchId:null};L.push(st),j=st.id}const k=L.filter(st=>st.round===1);k.forEach((st,pt)=>{const Nt=y[pt*2],At=y[pt*2+1],Ut=Nt==="BYE",re=At==="BYE";st.player1Id=Ut?null:Nt,st.player2Id=re?null:At;let je=null;if(!Ut&&re&&(je=Nt),Ut&&!re&&(je=At),je){st.winnerId=je;const ft=L.find(vt=>vt.id===st.nextMatchId);ft&&(k.findIndex(zt=>zt.id===st.id)%2===0?ft.player1Id=je:ft.player2Id=je)}});const P={matches:L,isGenerated:!0,finalId:((ct=L.find(st=>st.round===J&&!st.isBronzeFinal))==null?void 0:ct.id)??null,bronzeFinalId:j};s(st=>st.map(pt=>pt.id===a.id?{...pt,tournaments:pt.tournaments.map(Nt=>Nt.id===e.id?{...Nt,playoffs:P}:Nt)}:pt)),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(st=>st.id===e.id?{...st,playoffs:P}:st)}),m("bracket")},yt=async()=>{s(L=>L.map(J=>J.id===a.id?{...J,tournaments:J.tournaments.map(C=>C.id===e.id?{...C,playoffs:{...C.playoffs,isGenerated:!1,matches:[],finalId:null,bronzeFinalId:null}}:C)}:J)),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(L=>L.id===e.id?{...L,playoffs:{...L.playoffs,isGenerated:!1,matches:[],finalId:null,bronzeFinalId:null}}:L)}),m("setup"),Z(!1)},A=async()=>{if(!E)return;const L=parseInt(B,10),J=parseInt(F,10);if(isNaN(L)||isNaN(J))return;s(k=>{const P=JSON.parse(JSON.stringify(k)),st=P.find(Ut=>Ut.id===a.id).tournaments.find(Ut=>Ut.id===e.id).playoffs,pt=st.matches.find(Ut=>Ut.id===E.id);pt.score1=L,pt.score2=J;const Nt=L>J?pt.player1Id:pt.player2Id,At=L>J?pt.player2Id:pt.player1Id;if(pt.winnerId=Nt,pt.nextMatchId){const Ut=st.matches.find(ft=>ft.id===pt.nextMatchId);st.matches.filter(ft=>ft.round===pt.round).sort((ft,vt)=>ft.matchIndex-vt.matchIndex).findIndex(ft=>ft.id===pt.id)%2===0?Ut.player1Id=Nt:Ut.player2Id=Nt}if(pt.loserGoesToBronzeFinal&&st.bronzeFinalId&&e.settings.hasBronzeFinal){const Ut=st.matches.find(re=>re.id===st.bronzeFinalId);Ut.player1Id===null?Ut.player1Id=At:Ut.player2Id===null&&(Ut.player2Id=At)}return P});const C=await se(Qt,"events",a.id),j={...e,playoffs:(()=>{const k={...e.playoffs},P=k.matches.find(ct=>ct.id===E.id);return P.score1=L,P.score2=J,P.winnerId=L>J?P.player1Id:P.player2Id,k})()};await de(C,{tournaments:a.tournaments.map(k=>k.id===e.id?j:k)}),R(null),it(""),D("")};if(d==="setup"){if(!r)return h.jsx("p",{className:"text-text-secondary text-center",children:"Il tabellone dei playoff non  stato ancora generato."});const L=p.filter(k=>!y.includes(k.playerId)),J=x-p.length,C=y.filter(k=>k==="BYE").length,j=({slotIndex:k})=>{const P=y[k],ct=Y(P);return h.jsxs("select",{value:P??"",onChange:st=>rt(k,st.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",children:[h.jsx("option",{value:"",children:"-- Seleziona --"}),P&&P!=="BYE"&&h.jsx("option",{value:P,children:ct==null?void 0:ct.name}),L.map(st=>{var pt;return h.jsx("option",{value:st.playerId,children:(pt=Y(st.playerId))==null?void 0:pt.name},st.playerId)}),(C<J||P==="BYE")&&h.jsx("option",{value:"BYE",children:"-- BYE --"})]})};return h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsx("h3",{className:"text-xl font-bold mb-2 text-accent",children:"Costruttore Tabellone Playoff"}),h.jsx("p",{className:"text-text-secondary mb-6",children:'Assegna manualmente i giocatori o i "bye" agli slot del primo turno.'}),h.jsx("div",{className:"space-y-4",children:x>0?Array.from({length:x/2}).map((k,P)=>h.jsxs("div",{className:"bg-primary/50 p-4 rounded-lg flex items-center gap-4",children:[h.jsxs("span",{className:"font-bold text-text-secondary",children:["M",P+1]}),h.jsx("div",{className:"flex-1",children:h.jsx(j,{slotIndex:P*2})}),h.jsx("span",{className:"text-tertiary",children:"vs"}),h.jsx("div",{className:"flex-1",children:h.jsx(j,{slotIndex:P*2+1})})]},P)):h.jsx("p",{className:"text-text-secondary",children:"Non ci sono abbastanza qualificati per un playoff."})}),h.jsx("div",{className:"mt-8",children:h.jsx("button",{onClick:gt,disabled:y.some(k=>k===null)||p.length<2,className:"w-full bg-highlight hover:bg-highlight/90 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:bg-tertiary disabled:cursor-not-allowed shadow-lg shadow-highlight/20",children:"Genera Tabellone"})})]}),h.jsxs("div",{className:"sticky top-4",children:[h.jsx("h4",{className:"font-semibold text-xl mb-4 text-accent",children:"Riepilogo"}),h.jsx("div",{className:"bg-primary/50 p-4 rounded-lg mb-6",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:p.length}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Qualificati"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:x}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Posti"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:J}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Bye"})]})]})}),h.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Giocatori da Assegnare"}),h.jsx("div",{className:"space-y-2",children:L.length>0?L.map(k=>{const P=Y(k.playerId);return h.jsxs("div",{className:"bg-tertiary/50 p-2 rounded-lg flex items-center gap-3",children:[h.jsx("img",{src:P==null?void 0:P.avatar,alt:P==null?void 0:P.name,className:"w-8 h-8 rounded-full"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-sm",children:P==null?void 0:P.name}),h.jsxs("div",{className:"text-xs text-text-secondary",children:[k.rank," class. ",k.groupName]})]})]},k.playerId)}):h.jsx("p",{className:"text-text-secondary text-sm italic",children:"Tutti i giocatori sono stati assegnati."})})]})]})}const{matches:w,bronzeFinalId:N}=e.playoffs,V=Math.max(0,...w.filter(L=>!L.isBronzeFinal).map(L=>L.round)),M=L=>{const J=V;return L===J?"Finale":L===J-1?"Semifinali":L===J-2?"Quarti di Finale":`Turno ${L}`},z=({player:L,winnerId:J})=>{if(!L)return h.jsx("span",{className:"text-text-secondary",children:"TBD"});const C=J===L.id,j=J!==null&&!C,k=L.id===o;return h.jsx("span",{className:`truncate ${C?"font-bold text-text-primary":j?"text-text-secondary/70 line-through":"text-text-secondary"} ${k?"text-accent font-bold":""}`,children:L.name})},I=({match:L})=>{const J=Y(L.player1Id),C=Y(L.player2Id),j=r&&L.player1Id&&L.player2Id&&L.winnerId===null;return h.jsxs("div",{className:"bg-secondary p-2 rounded-lg w-full",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx(z,{player:J,winnerId:L.winnerId}),L.score1!==null&&h.jsx("span",{className:`font-bold ${L.winnerId===(J==null?void 0:J.id)?"text-accent":"text-text-primary"}`,children:L.score1})]}),h.jsx("div",{className:"border-t border-tertiary/50 my-1"}),h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx(z,{player:C,winnerId:L.winnerId}),L.score2!==null&&h.jsx("span",{className:`font-bold ${L.winnerId===(C==null?void 0:C.id)?"text-accent":"text-text-primary"}`,children:L.score2})]}),j&&h.jsx("div",{className:"text-center mt-2",children:h.jsx("button",{onClick:()=>{var k,P;R(L),it(((k=L.score1)==null?void 0:k.toString())??""),D(((P=L.score2)==null?void 0:P.toString())??"")},className:"text-xs bg-highlight/80 hover:bg-highlight px-2 py-1 rounded-md text-white transition-colors",children:"Risultato"})})]})},wt=w.find(L=>L.round===V&&!L.isBronzeFinal),St=wt!=null&&wt.winnerId?Y(wt.winnerId):null;return h.jsxs("div",{className:"bg-secondary p-2 md:p-6 rounded-xl shadow-lg",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-bold text-accent",children:"Tabellone Playoff"}),St&&h.jsxs("div",{className:"mt-2 text-lg text-yellow-400 font-bold animate-subtlePulse",children:[" Vincitore: ",St.name," "]}),r&&h.jsx("button",{onClick:()=>Z(!0),className:"mt-2 text-sm text-yellow-500 hover:text-yellow-400 underline",children:"Modifica Tabellone"})]}),h.jsxs("div",{className:"flex justify-start items-stretch gap-4 md:gap-10 overflow-x-auto pb-4 px-2",children:[Array.from({length:V}).map((L,J)=>{const C=J+1,j=w.filter(k=>k.round===C&&!k.isBronzeFinal).sort((k,P)=>k.matchIndex-P.matchIndex);return j.length===0?null:h.jsxs("div",{className:"flex flex-col w-60 flex-shrink-0 justify-around",children:[h.jsx("h4",{className:"text-lg font-semibold text-center text-text-secondary mb-4",children:M(C)}),h.jsx("div",{className:"space-y-10",children:j.map(k=>h.jsxs("div",{className:"relative",children:[h.jsx(I,{match:k}),k.nextMatchId&&h.jsx("div",{className:"absolute top-1/2 -right-5 md:-right-8 w-5 md:w-8 h-px bg-tertiary z-0",children:h.jsx("div",{className:"absolute top-1/2 -right-px w-px h-10 md:h-12 bg-tertiary",style:{transform:`translateY(${k.matchIndex%2===0?"-100%":"0"})`}})})]},k.id))})]},J)}),h.jsxs("div",{className:"flex flex-col w-60 flex-shrink-0 justify-center items-center",children:[h.jsx("h4",{className:"text-lg font-semibold text-center text-text-secondary mb-4",children:"Campione"}),wt?h.jsx(I,{match:wt}):null]})]}),N&&e.settings.hasBronzeFinal&&h.jsxs("div",{className:"mt-8 pt-6 border-t border-tertiary/50",children:[h.jsx("h4",{className:"text-lg font-semibold text-center text-text-secondary mb-4",children:"Finale 3 Posto"}),h.jsx("div",{className:"max-w-xs mx-auto",children:h.jsx(I,{match:w.find(L=>L.id===N)})})]}),(!N||!e.settings.hasBronzeFinal)&&h.jsx("p",{className:"text-center text-xs text-text-secondary/50 mt-4",children:"Finale 3 Posto disabilitata nelle impostazioni."}),r&&E&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Risultato Playoff"}),h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsx("span",{className:"font-semibold",children:(H=Y(E.player1Id))==null?void 0:H.name}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"number",value:B,onChange:L=>it(L.target.value),className:"w-16 text-center bg-primary p-2 rounded-lg"}),h.jsx("span",{children:"-"}),h.jsx("input",{type:"number",value:F,onChange:L=>D(L.target.value),className:"w-16 text-center bg-primary p-2 rounded-lg"})]}),h.jsx("span",{className:"font-semibold",children:(q=Y(E.player2Id))==null?void 0:q.name})]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>R(null),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:A,className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Salva"})]})]})}),r&&Q&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Conferma Reset"}),h.jsx("p",{className:"text-text-secondary",children:"Sei sicuro di voler resettare il tabellone? Tutti i risultati dei playoff verranno persi e tornerai alla fase di costruzione manuale."}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>Z(!1),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:yt,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Resetta Tabellone"})]})]})})]})},aA=({event:a,tournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o})=>{var St,tt,H;const[d,m]=lt.useState((St=e.consolationBracket)!=null&&St.isGenerated?"bracket":"setup"),p=lt.useMemo(()=>{const q=[];return e.groups.forEach(L=>{const J=e.settings.consolationSettings.find(C=>C.groupId===L.id);if(J&&J.startRank>0&&J.endRank>=J.startRank){const j=bo(L,a.players,e.settings).slice(J.startRank-1,J.endRank).map((k,P)=>({playerId:k.playerId,rank:J.startRank+P,fromGroup:L.id,groupName:L.name}));q.push(...j)}}),q},[e,a.players]),x=lt.useMemo(()=>{const q=p.length;return q<2?0:2**Math.ceil(Math.log2(q))},[p]),[y,b]=lt.useState([]),[E,R]=lt.useState(null),[B,it]=lt.useState(""),[F,D]=lt.useState(""),[Q,Z]=lt.useState(!1);lt.useEffect(()=>{d==="setup"&&b(Array(x).fill(null))},[p,d,x]);const Y=q=>q?a.players.find(L=>L.id===q)??null:null,rt=(q,L)=>{b(J=>{const C=[...J],j=C.findIndex(k=>k===L);return j!==-1&&L!=="BYE"&&(C[j]=null),C[q]=L===""?null:L,C})},gt=async()=>{var k;if(y.some(P=>P===null)){alert("Per favore, riempi tutti gli slot del primo turno.");return}const q=[],L=Math.log2(x);let J=0;for(let P=1;P<=L;P++){const ct=x/2**P;for(let st=0;st<ct;st++)q.push({id:`con-m-${J}`,round:P,matchIndex:J,player1Id:null,player2Id:null,score1:null,score2:null,winnerId:null,nextMatchId:null}),J++}q.forEach(P=>{if(P.round<L){const st=q.filter(At=>At.round===P.round).findIndex(At=>At.id===P.id),Nt=q.filter(At=>At.round===P.round+1)[Math.floor(st/2)];Nt&&(P.nextMatchId=Nt.id)}});const C=q.filter(P=>P.round===1);C.forEach((P,ct)=>{const st=y[ct*2],pt=y[ct*2+1],Nt=st==="BYE",At=pt==="BYE";P.player1Id=Nt?null:st,P.player2Id=At?null:pt;let Ut=null;if(!Nt&&At&&(Ut=st),Nt&&!At&&(Ut=pt),Ut){P.winnerId=Ut;const re=q.find(je=>je.id===P.nextMatchId);re&&(C.findIndex(ft=>ft.id===P.id)%2===0?re.player1Id=Ut:re.player2Id=Ut)}});const j={matches:q,isGenerated:!0,finalId:((k=q.find(P=>P.round===L))==null?void 0:k.id)??null,bronzeFinalId:null};s(P=>P.map(ct=>ct.id===a.id?{...ct,tournaments:ct.tournaments.map(st=>st.id===e.id?{...st,consolationBracket:j}:st)}:ct)),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(P=>P.id===e.id?{...P,consolationBracket:j}:P)}),m("bracket")},yt=async()=>{s(q=>q.map(L=>L.id===a.id?{...L,tournaments:L.tournaments.map(J=>J.id===e.id?{...J,consolationBracket:{...J.consolationBracket,isGenerated:!1,matches:[],finalId:null,bronzeFinalId:null}}:J)}:L)),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(q=>q.id===e.id?{...q,consolationBracket:{...q.consolationBracket,isGenerated:!1,matches:[],finalId:null,bronzeFinalId:null}}:q)}),m("setup"),Z(!1)},A=async()=>{if(!E)return;const q=parseInt(B,10),L=parseInt(F,10);isNaN(q)||isNaN(L)||(s(J=>{const C=JSON.parse(JSON.stringify(J)),k=C.find(st=>st.id===a.id).tournaments.find(st=>st.id===e.id).consolationBracket,P=k.matches.find(st=>st.id===E.id);P.score1=q,P.score2=L;const ct=q>L?P.player1Id:P.player2Id;if(P.winnerId=ct,P.nextMatchId){const st=k.matches.find(At=>At.id===P.nextMatchId);k.matches.filter(At=>At.round===P.round).sort((At,Ut)=>At.matchIndex-Ut.matchIndex).findIndex(At=>At.id===P.id)%2===0?st.player1Id=ct:st.player2Id=ct}return C}),await de(se(Qt,"events",a.id),{tournaments:a.tournaments.map(J=>J.id===e.id?{...J,consolationBracket:(()=>{const C={...J.consolationBracket},j=C.matches.find(k=>k.id===E.id);return j.score1=q,j.score2=L,j.winnerId=q>L?j.player1Id:j.player2Id,C})()}:J)}),R(null),it(""),D(""))};if(d==="setup"){if(!r)return h.jsx("p",{className:"text-text-secondary text-center",children:"Il tabellone di consolazione non  stato ancora generato."});const q=p.filter(j=>!y.includes(j.playerId)),L=x-p.length,J=y.filter(j=>j==="BYE").length,C=({slotIndex:j})=>{const k=y[j],P=Y(k);return h.jsxs("select",{value:k??"",onChange:ct=>rt(j,ct.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",children:[h.jsx("option",{value:"",children:"-- Seleziona --"}),k&&k!=="BYE"&&h.jsx("option",{value:k,children:P==null?void 0:P.name}),q.slice().sort((ct,st)=>{const pt=Y(ct.playerId),Nt=Y(st.playerId);return((pt==null?void 0:pt.name)||"").localeCompare((Nt==null?void 0:Nt.name)||"")}).map(ct=>{var st;return h.jsx("option",{value:ct.playerId,children:(st=Y(ct.playerId))==null?void 0:st.name},ct.playerId)}),(J<L||k==="BYE")&&h.jsx("option",{value:"BYE",children:"-- BYE --"})]})};return h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsx("h3",{className:"text-xl font-bold mb-2 text-accent",children:"Costruttore Tabellone Consolazione"}),h.jsx("p",{className:"text-text-secondary mb-6",children:"Assegna manualmente i giocatori qualificati agli slot del primo turno."}),h.jsx("div",{className:"space-y-4",children:x>0?Array.from({length:x/2}).map((j,k)=>h.jsxs("div",{className:"bg-primary/50 p-4 rounded-lg flex items-center gap-4",children:[h.jsxs("span",{className:"font-bold text-text-secondary",children:["M",k+1]}),h.jsx("div",{className:"flex-1",children:h.jsx(C,{slotIndex:k*2})}),h.jsx("span",{className:"text-tertiary",children:"vs"}),h.jsx("div",{className:"flex-1",children:h.jsx(C,{slotIndex:k*2+1})})]},k)):h.jsx("p",{className:"text-text-secondary",children:"Nessun giocatore qualificato per il tabellone di consolazione."})}),h.jsx("div",{className:"mt-8",children:h.jsx("button",{onClick:gt,disabled:y.some(j=>j===null)||p.length<2,className:"w-full bg-highlight hover:bg-highlight/90 text-white font-bold py-2 px-4 rounded-lg transition-colors text-lg",children:"Genera Tabellone"})})]}),h.jsxs("div",{className:"sticky top-4",children:[h.jsx("h4",{className:"font-semibold text-xl mb-4 text-accent",children:"Riepilogo"}),h.jsx("div",{className:"bg-primary/50 p-4 rounded-lg mb-6",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:p.length}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Qualificati"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:x}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Posti"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:L}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Bye"})]})]})}),h.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Giocatori da Assegnare"}),h.jsx("div",{className:"space-y-2",children:q.length>0?q.slice().sort((j,k)=>{const P=Y(j.playerId),ct=Y(k.playerId);return((P==null?void 0:P.name)||"").localeCompare((ct==null?void 0:ct.name)||"")}).map(j=>{const k=Y(j.playerId);return h.jsxs("div",{className:"bg-tertiary/50 p-2 rounded-lg flex items-center gap-3",children:[h.jsx("img",{src:k==null?void 0:k.avatar,alt:k==null?void 0:k.name,className:"w-8 h-8 rounded-full"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-sm",children:k==null?void 0:k.name}),h.jsxs("div",{className:"text-xs text-text-secondary",children:[j.rank," class. ",j.groupName]})]})]},j.playerId)}):h.jsx("p",{className:"text-text-secondary text-sm italic",children:"Tutti i giocatori sono stati assegnati."})})]})]})}const{matches:w}=e.consolationBracket,N=Math.max(0,...w.map(q=>q.round)),V=q=>q===N?"Finale":q===N-1?"Semifinali":`Turno ${q}`,M=({player:q,winnerId:L})=>{if(!q)return h.jsx("span",{className:"text-text-secondary",children:"TBD"});const J=L===q.id,C=L!==null&&!J,j=q.id===o;return h.jsx("span",{className:`truncate ${J?"font-bold text-text-primary":C?"text-text-secondary/70 line-through":"text-text-secondary"} ${j?"text-accent font-bold":""}`,children:q.name})},z=({match:q})=>{const L=Y(q.player1Id),J=Y(q.player2Id),C=r&&q.player1Id&&q.player2Id&&q.winnerId===null;return h.jsxs("div",{className:"bg-secondary p-2 rounded-lg w-full",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx(M,{player:L,winnerId:q.winnerId}),q.score1!==null&&h.jsx("span",{className:`font-bold ${q.winnerId===(L==null?void 0:L.id)?"text-accent":"text-text-primary"}`,children:q.score1})]}),h.jsx("div",{className:"border-t border-tertiary/50 my-1"}),h.jsxs("div",{className:"flex justify-between items-center text-sm",children:[h.jsx(M,{player:J,winnerId:q.winnerId}),q.score2!==null&&h.jsx("span",{className:`font-bold ${q.winnerId===(J==null?void 0:J.id)?"text-accent":"text-text-primary"}`,children:q.score2})]}),C&&h.jsx("div",{className:"text-center mt-2",children:h.jsx("button",{onClick:()=>{var j,k;R(q),it(((j=q.score1)==null?void 0:j.toString())??""),D(((k=q.score2)==null?void 0:k.toString())??"")},className:"text-xs bg-highlight/80 hover:bg-highlight text-white px-3 py-1 rounded-lg font-bold",children:"Inserisci Risultato"})})]})},I=w.find(q=>q.round===N),wt=I!=null&&I.winnerId?Y(I.winnerId):null;return h.jsxs("div",{className:"bg-secondary p-2 md:p-6 rounded-xl shadow-lg",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-2xl font-bold text-accent",children:"Tabellone di Consolazione"}),wt&&h.jsxs("div",{className:"mt-2 text-lg text-yellow-400 font-bold animate-subtlePulse",children:[" Vincitore: ",wt.name," "]}),r&&h.jsx("button",{onClick:()=>Z(!0),className:"mt-2 text-sm text-yellow-500 hover:text-yellow-400 underline",children:"Modifica Tabellone"})]}),h.jsxs("div",{className:"flex justify-start items-stretch gap-4 md:gap-10 overflow-x-auto pb-4 px-2",children:[Array.from({length:N}).map((q,L)=>{const J=L+1,C=w.filter(j=>j.round===J).sort((j,k)=>j.matchIndex-k.matchIndex);return C.length===0?null:h.jsxs("div",{className:"flex flex-col w-60 flex-shrink-0 justify-around",children:[h.jsx("h4",{className:"text-lg font-semibold text-center text-text-secondary mb-4",children:V(J)}),h.jsx("div",{className:"space-y-10",children:C.map(j=>h.jsxs("div",{className:"relative",children:[h.jsx(z,{match:j}),j.nextMatchId&&h.jsx("div",{className:"absolute top-1/2 -right-5 md:-right-8 w-5 md:w-8 h-px bg-tertiary z-0",children:h.jsx("div",{className:"absolute top-1/2 -right-px w-px h-10 md:h-12 bg-tertiary",style:{transform:`translateY(${j.matchIndex%2===0?"-100%":"0"})`}})})]},j.id))})]},L)}),h.jsxs("div",{className:"flex flex-col w-60 flex-shrink-0 justify-center items-center",children:[h.jsx("h4",{className:"text-lg font-semibold text-center text-text-secondary mb-4",children:"Campione"}),I?h.jsx(z,{match:I}):null]})]}),r&&E&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Risultato Consolazione"}),h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsx("span",{className:"font-semibold",children:(tt=Y(E.player1Id))==null?void 0:tt.name}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"number",value:B,onChange:q=>it(q.target.value),className:"w-16 text-center bg-primary p-2 rounded-lg"}),h.jsx("span",{children:"-"}),h.jsx("input",{type:"number",value:F,onChange:q=>D(q.target.value),className:"w-16 text-center bg-primary p-2 rounded-lg"})]}),h.jsx("span",{className:"font-semibold",children:(H=Y(E.player2Id))==null?void 0:H.name})]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>R(null),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:A,className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Salva"})]})]})}),r&&Q&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Conferma Reset"}),h.jsx("p",{className:"text-text-secondary",children:"Sei sicuro di voler resettare il tabellone di consolazione? Tutti i risultati verranno persi."}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>Z(!1),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:yt,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Resetta"})]})]})})]})},rA=a=>{const e=a.split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase(),s=["#8b5cf6","#22d3ee","#f59e0b","#10b981","#ef4444","#3b82f6"],o=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100"><rect width="100" height="100" fill="${s[e.charCodeAt(0)%s.length]}"/><text x="50" y="50" font-family="sans-serif" font-size="48" fill="white" text-anchor="middle" alignment-baseline="central" dy=".3em">${e}</text></svg>`;return`data:image/svg+xml;base64,${btoa(o)}`};async function lA(a,e){const s=zr(Qt,"players"),r=vf(s,nu("name","==",e.name),nu("phone","==",e.phone)),o=await _f(r);let d;o.empty?d=(await Ef(s,{name:e.name,phone:e.phone,avatar:e.avatar,status:"confirmed"})).id:d=o.docs[0].id;const m=zr(Qt,"users"),p=vf(m,nu("username","==",e.name));if((await _f(p)).empty&&await Ef(m,{username:e.name,password:"1234",role:"participant",playerId:d}),!a.players.some(b=>b.id===d)){const b={id:d,name:e.name,phone:e.phone,avatar:e.avatar,status:"confirmed"},E=[...a.players,b];await de(se(Qt,"events",a.id),{players:E})}}async function oA(a,e){const s=a.players.filter(m=>m.id!==e);await de(se(Qt,"events",a.id),{players:s}),await bf(se(Qt,"players",e));const r=zr(Qt,"users"),o=vf(r,nu("playerId","==",e));(await _f(o)).forEach(m=>bf(m.ref))}const cA=(a,e)=>a.tournaments.some(s=>s.groups.some(r=>{var o;return(o=r.playerIds)==null?void 0:o.includes(e)})),uA=({event:a,setEvents:e,isOrganizer:s,onPlayerContact:r})=>{const[o,d]=lt.useState(null),[m,p]=lt.useState(""),[x,y]=lt.useState(""),[b,E]=lt.useState(""),[R,B]=lt.useState(!1),[it,F]=lt.useState(null),[D,Q]=lt.useState(""),[Z,Y]=lt.useState(""),[rt,gt]=lt.useState(!1),yt=a.players.filter((H,q,L)=>L.findIndex(J=>J.id===H.id)===q),A=yt.filter(H=>H.status==="confirmed"),w=yt.filter(H=>H.status==="pending"),N=async H=>{if(H.preventDefault(),!(!x.trim()||!b.trim())){B(!0);try{await lA(a,{name:x.trim(),phone:b.trim(),avatar:rA(x.trim())}),e(q=>q.map(L=>L.id===a.id?{...L,players:[...L.players.filter((J,C,j)=>j.findIndex(k=>k.id===J.id)===C)]}:L)),y(""),E("")}catch(q){alert("Errore durante la creazione: "+q.message)}B(!1)}},V=async H=>{const q=a.players.map(L=>L.id===H?{...L,status:"confirmed"}:L);e(L=>L.map(J=>J.id!==a.id?J:{...J,players:q})),await de(se(Qt,"events",a.id),{players:q})},M=async H=>{B(!0);try{await oA(a,H),e(q=>q.map(L=>L.id===a.id?{...L,players:L.players.filter(J=>J.id!==H)}:L))}catch(q){alert("Errore cancellazione: "+q.message)}B(!1)},z=async()=>{if(!o||!m)return;const H=a.tournaments.map(q=>({...q,groups:q.groups.map(L=>L.playerIds.includes(o.id)?{...L,playerIds:L.playerIds.map(J=>J===o.id?m:J),matches:L.matches.map(J=>J.player1Id===o.id?{...J,player1Id:m}:J.player2Id===o.id?{...J,player2Id:m}:J)}:L)}));e(q=>q.map(L=>L.id===a.id?{...L,tournaments:H}:L)),await de(se(Qt,"events",a.id),{tournaments:H}),d(null)},I=A.filter(H=>H.id!==(o==null?void 0:o.id)),wt=H=>{F(H),Q(H.name??""),Y(H.phone??"")},St=()=>{F(null),Q(""),Y("")},tt=async()=>{if(it){gt(!0);try{const H=a.players.map(q=>q.id===it.id?{...q,name:D.trim(),phone:Z.trim()||void 0}:q);e(q=>q.map(L=>L.id===a.id?{...L,players:H}:L)),await de(se(Qt,"events",a.id),{players:H}),St()}catch(H){alert("Errore durante il salvataggio: "+H.message),console.error(H)}finally{gt(!1)}}};return h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg",children:[h.jsxs("h3",{className:"text-xl font-bold mb-6 text-accent",children:["Partecipanti (",A.length,")"]}),s&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-8 bg-primary/50 p-4 rounded-lg",children:[h.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Aggiungi Nuovo Giocatore"}),h.jsxs("form",{onSubmit:N,className:"flex flex-col sm:flex-row gap-3",children:[h.jsx("input",{type:"text",placeholder:"Nome Cognome",value:x,onChange:H=>y(H.target.value),className:"flex-grow bg-secondary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",required:!0}),h.jsx("input",{type:"tel",placeholder:"Numero di telefono",value:b,onChange:H=>E(H.target.value),className:"flex-grow bg-secondary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",required:!0}),h.jsx("button",{type:"submit",disabled:R,className:"bg-highlight hover:bg-highlight/90 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:R?"Aggiungo...":"Aggiungi"})]})]}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("h4",{className:"text-lg font-semibold mb-3",children:["Richieste di Iscrizione (",w.length,")"]}),w.length>0?h.jsx("ul",{className:"space-y-3",children:w.slice().sort((H,q)=>H.name.localeCompare(q.name)).map((H,q)=>h.jsxs("li",{className:"flex items-center justify-between bg-tertiary/50 p-3 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:H.avatar,alt:H.name,className:"w-10 h-10 rounded-full object-cover"}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-semibold",children:[q+1,". ",H.name]}),h.jsx("div",{className:"text-sm text-text-secondary",children:H.phone})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>V(H.id),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Conferma"}),h.jsx("button",{onClick:()=>M(H.id),disabled:R,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Elimina"})]})]},H.id))}):h.jsx("p",{className:"text-text-secondary italic",children:"Nessuna richiesta di iscrizione in attesa."})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Partecipanti Confermati"}),h.jsx("ul",{className:"space-y-3",children:A.slice().sort((H,q)=>H.name.localeCompare(q.name)).map((H,q)=>h.jsxs("li",{className:"flex items-center justify-between bg-tertiary/50 p-3 rounded-lg",children:[h.jsxs("button",{onClick:()=>r(H),className:"flex items-center gap-3 text-left hover:opacity-80 transition-opacity",children:[h.jsx("img",{src:H.avatar,alt:H.name,className:"w-10 h-10 rounded-full object-cover"}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[q+1,". ",H.name,cA(a,H.id)&&h.jsx("span",{className:"ml-2 px-2 py-[2px] rounded bg-green-600 text-white text-xs font-semibold",children:"Assegnato"})]}),h.jsx("div",{className:"text-sm text-text-secondary",children:H.phone})]})]}),s&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>d(H),className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Sostituisci"}),h.jsx("button",{onClick:()=>{wt(H)},className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Modifica"}),h.jsx("button",{onClick:()=>M(H.id),disabled:R,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Elimina"})]})]},H.id))})]}),s&&o&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsxs("h4",{className:"text-lg font-bold mb-4",children:["Sostituisci ",o.name]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("p",{className:"text-text-secondary",children:["Seleziona un giocatore con cui sostituire ",o.name,". I risultati precedenti verranno mantenuti."]}),h.jsxs("select",{value:m,onChange:H=>p(H.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",children:[h.jsx("option",{value:"",children:"Seleziona un giocatore"}),I.slice().sort((H,q)=>H.name.localeCompare(q.name)).map(H=>h.jsx("option",{value:H.id,children:H.name},H.id))]})]}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>d(null),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:z,disabled:!m,className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Conferma Sostituzione"})]})]})}),it&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Modifica Giocatore"}),h.jsxs("div",{className:"mb-3",children:[h.jsx("label",{className:"text-sm text-text-secondary block mb-1",children:"Nome"}),h.jsx("input",{value:D,onChange:H=>Q(H.target.value),className:"w-full p-2 rounded bg-primary border",autoFocus:!0})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"text-sm text-text-secondary block mb-1",children:"Telefono"}),h.jsx("input",{value:Z,onChange:H=>Y(H.target.value),className:"w-full p-2 rounded bg-primary border",placeholder:"Es. +391234567890"})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx("button",{onClick:St,className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:tt,disabled:rt,className:"bg-highlight text-white px-4 py-2 rounded",children:rt?"Salvando...":"Salva Modifica"})]})]})})]})},dA=({event:a,tournament:e,setEvents:s,isOrganizer:r})=>{const o=lt.useMemo(()=>{const F=[];return(e.groups??[]).forEach(D=>{var Y;const Q=(Y=e.settings.playoffSettings)==null?void 0:Y.find(rt=>rt.groupId===D.id),Z=(Q==null?void 0:Q.numQualifiers)??0;if(Z>0){const gt=bo(D,a.players,e.settings).slice(0,Z).map((yt,A)=>({playerId:yt.playerId,rank:A+1,fromGroup:D.id,groupName:D.name}));F.push(...gt)}}),F},[e.groups,a.players,e.settings]),d=lt.useMemo(()=>{const F=o.length;return F<2?0:2**Math.ceil(Math.log2(F))},[o]),[m,p]=lt.useState([]);lt.useEffect(()=>{p(Array(d).fill(null))},[d]);const x=F=>F?a.players.find(D=>D.id===F)??null:null,y=(F,D)=>{p(Q=>{const Z=[...Q],Y=Z.findIndex(rt=>rt===D);return Y!==-1&&D!=="BYE"&&(Z[Y]=null),Z[F]=D===""?null:D,Z})},b=()=>{console.log("Genera playoff bracket",m),alert("Tabellone playoff generato! (collega qui il salvataggio Firestore)")},E=o.filter(F=>!m.includes(F.playerId)),R=d-o.length,B=m.filter(F=>F==="BYE").length,it=({slotIndex:F})=>{const D=m[F],Q=x(D);return h.jsxs("select",{value:D??"",onChange:Z=>y(F,Z.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",children:[h.jsx("option",{value:"",children:"-- Seleziona --"}),D&&D!=="BYE"&&h.jsx("option",{value:D,children:Q==null?void 0:Q.name}),E.slice().sort((Z,Y)=>{const rt=x(Z.playerId),gt=x(Y.playerId);return((rt==null?void 0:rt.name)||"").localeCompare((gt==null?void 0:gt.name)||"")}).map(Z=>{var Y;return h.jsx("option",{value:Z.playerId,children:(Y=x(Z.playerId))==null?void 0:Y.name},Z.playerId)}),(B<R||D==="BYE")&&h.jsx("option",{value:"BYE",children:"-- BYE --"})]})};return h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsx("h3",{className:"text-xl font-bold mb-2 text-accent",children:"Costruttore Tabellone Playoff"}),h.jsx("p",{className:"text-text-secondary mb-6",children:"Assegna manualmente i giocatori qualificati agli slot del primo turno."}),h.jsx("div",{className:"space-y-4",children:d>0?Array.from({length:d/2}).map((F,D)=>h.jsxs("div",{className:"bg-primary/50 p-4 rounded-lg flex items-center gap-4",children:[h.jsxs("span",{className:"font-bold text-text-secondary",children:["M",D+1]}),h.jsx("div",{className:"flex-1",children:h.jsx(it,{slotIndex:D*2})}),h.jsx("span",{className:"text-tertiary",children:"vs"}),h.jsx("div",{className:"flex-1",children:h.jsx(it,{slotIndex:D*2+1})})]},D)):h.jsx("p",{className:"text-text-secondary",children:"Nessun giocatore qualificato per il tabellone playoff."})}),h.jsx("div",{className:"mt-8",children:h.jsx("button",{onClick:b,disabled:m.some(F=>F===null)||o.length<2,className:"w-full bg-highlight hover:bg-highlight/90 text-white font-bold py-3 rounded-lg transition-colors",children:"Genera Tabellone"})})]}),h.jsxs("div",{className:"sticky top-4",children:[h.jsx("h4",{className:"font-semibold text-xl mb-4 text-accent",children:"Riepilogo"}),h.jsx("div",{className:"bg-primary/50 p-4 rounded-lg mb-6",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:o.length}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Qualificati"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:d}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Posti"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:R}),h.jsx("div",{className:"text-sm text-text-secondary",children:"Bye"})]})]})}),h.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Giocatori da Assegnare"}),h.jsx("div",{className:"space-y-2",children:E.length>0?E.slice().sort((F,D)=>{const Q=x(F.playerId),Z=x(D.playerId);return((Q==null?void 0:Q.name)||"").localeCompare((Z==null?void 0:Z.name)||"")}).map(F=>{const D=x(F.playerId);return h.jsxs("div",{className:"bg-tertiary/50 p-2 rounded-lg flex items-center gap-3",children:[(D==null?void 0:D.avatar)&&h.jsx("img",{src:D.avatar,alt:D.name,className:"w-8 h-8 rounded-full"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold text-sm",children:D==null?void 0:D.name}),h.jsxs("div",{className:"text-xs text-text-secondary",children:[F.rank," class. ",F.groupName]})]})]},F.playerId)}):h.jsx("p",{className:"text-text-secondary text-sm italic",children:"Tutti i giocatori sono stati assegnati."})})]})]})};function hA(a,e=448,s=400){if(!a)return null;const r=a.getBoundingClientRect(),o=window.innerWidth,d=window.innerHeight,m=window.scrollY||window.pageYOffset,p=window.scrollX||window.pageXOffset,x=16;let y=r.bottom+m+8,b=r.left+p;b+e>o-x&&(b=Math.max(x,r.right+p-e)),b<x&&(b=x);const E=d-r.bottom-x;if(E<Math.min(s,300)){const B=r.top-x;B>E&&(y=r.top+m-Math.min(s,B)-8)}y<m+x&&(y=m+x);const R=Math.min(s,d-x*2);return{top:y,left:b,maxHeight:R}}function fA(){return window.innerWidth<768}const mA=({event:a,tournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o,initialActiveTab:d,initialSelectedGroupId:m,onPlayerContact:p})=>{var fe,Ie,Wn,ts,We,ms,hi,fi;const x=e.groups.find(mt=>mt.playerIds.includes(o??"")),[y,b]=lt.useState(m??(x?x.id:(fe=e.groups[0])==null?void 0:fe.id)),E=e.groups.find(mt=>mt.id===y),[R,B]=lt.useState(d??"standings");lt.useEffect(()=>{d&&B(d)},[d]),lt.useEffect(()=>{m&&e.groups.some(mt=>mt.id===m)&&b(m)},[m,e.groups]);const[it,F]=lt.useState(null),[D,Q]=lt.useState(""),[Z,Y]=lt.useState(""),[rt,gt]=lt.useState(null),[yt,A]=lt.useState(""),[w,N]=lt.useState(null),[V,M]=lt.useState(""),[z,I]=lt.useState(null),[wt,St]=lt.useState(""),tt=lt.useRef(null),[H,q]=lt.useState(null);lt.useEffect(()=>{const mt=ue=>{var Dt;const Mt=ue.target.closest("button");if(Mt){const Rt=((Dt=Mt.textContent)==null?void 0:Dt.toLowerCase())||"";(Rt.includes("prenota")||Rt.includes("risultato")||Rt.includes("modifica pren")||Rt.includes("annulla pren")||Rt.includes("elimina risultato"))&&(tt.current=Mt)}};return document.addEventListener("click",mt,!0),()=>document.removeEventListener("click",mt,!0)},[]);const L=()=>{if(fA()){q(null);return}const mt=hA(tt.current);q(mt)},[J,C]=lt.useState(null),j=E?E.matches.filter(mt=>mt.status==="pending"&&(mt.player1Id===o||mt.player2Id===o)):[],k=mt=>C(mt),P=async mt=>{const ue=E==null?void 0:E.matches.find(Rt=>Rt.id===mt);if(!ue||!J)return;St("");const ye={...ue,status:"scheduled",scheduledTime:new Date(J.start).toISOString(),location:J.location??"",field:J.field??J.location??"",slotId:J.id},Mt=e.groups.map(Rt=>Rt.id===(E==null?void 0:E.id)?{...Rt,matches:Rt.matches.map(xe=>xe.id===ue.id?ye:xe)}:Rt),Dt=a.tournaments.map(Rt=>Rt.id===e.id?{...Rt,groups:Mt}:Rt);s(Rt=>Rt.map(xe=>xe.id===a.id?{...xe,tournaments:Dt}:xe)),await de(se(Qt,"events",a.id),{tournaments:Dt}),C(null)};function ct(){return a.tournaments.flatMap(mt=>mt.groups?mt.groups.flatMap(ue=>ue.matches.filter(ye=>ye.slotId&&(ye.status==="scheduled"||ye.status==="completed")).map(ye=>ye.slotId)):[])}function st(){const mt=Array.isArray(a.globalTimeSlots)?a.globalTimeSlots:[],ue=ct();return mt.filter(ye=>!ue.includes(ye.id))}const pt=mt=>{const ue=mt;if(p){p(ue);return}ue.phone&&window.open(`https://wa.me/${ue.phone.replace(/[^0-9]/g,"")}`,"_blank")},Nt=mt=>{L(),F(mt),Q(mt.score1!==null?String(mt.score1):""),Y(mt.score2!==null?String(mt.score2):"")};async function At(mt){if(!E)return;const ue={...mt,score1:Number(D),score2:Number(Z),status:"completed"},ye=e.groups.map(Dt=>Dt.id===E.id?{...Dt,matches:Dt.matches.map(Rt=>Rt.id===mt.id?ue:Rt)}:Dt),Mt=a.tournaments.map(Dt=>Dt.id===e.id?{...Dt,groups:ye}:Dt);s(Dt=>Dt.map(Rt=>Rt.id===a.id?{...Rt,tournaments:Mt}:Rt)),await de(se(Qt,"events",a.id),{tournaments:Mt}),F(null),Q(""),Y("")}const Ut=mt=>{L(),I(mt)};async function re(mt){if(!E)return;const ue={...mt,score1:null,score2:null,status:"pending"},ye=e.groups.map(Dt=>Dt.id===E.id?{...Dt,matches:Dt.matches.map(Rt=>Rt.id===mt.id?ue:Rt)}:Dt),Mt=a.tournaments.map(Dt=>Dt.id===e.id?{...Dt,groups:ye}:Dt);s(Dt=>Dt.map(Rt=>Rt.id===a.id?{...Rt,tournaments:Mt}:Rt)),await de(se(Qt,"events",a.id),{tournaments:Mt}),I(null)}const je=mt=>{L(),gt(mt),A(""),St("")};async function ft(mt){if(!E)return;const ue=Array.isArray(a.globalTimeSlots)?a.globalTimeSlots:[],ye=ct();if(!yt){St("Seleziona uno slot orario.");return}if(ye.includes(yt)){St("Slot gi prenotato, scegli un altro slot.");return}const Mt=ue.find(Ot=>Ot.id===yt);if(!Mt){St("Slot non trovato tra quelli globali.");return}const Dt=new Date(Mt.start);if(!Mt.start||isNaN(Dt.getTime())){St("Invalid data - campo orario non valido.");return}const Rt={...mt,status:"scheduled",scheduledTime:Dt.toISOString(),slotId:Mt.id,location:Mt.location??"",field:Mt.field??Mt.location??""},xe=e.groups.map(Ot=>Ot.id===E.id?{...Ot,matches:Ot.matches.map(en=>en.id===mt.id?Rt:en)}:Ot),tn=a.tournaments.map(Ot=>Ot.id===e.id?{...Ot,groups:xe}:Ot);s(Ot=>Ot.map(en=>en.id===a.id?{...en,tournaments:tn}:en)),await de(se(Qt,"events",a.id),{tournaments:tn}),gt(null),A(""),St("")}const vt=mt=>{L(),N(mt),M("")};async function zt(mt){if(!E)return;const ue=Array.isArray(a.globalTimeSlots)?a.globalTimeSlots:[],ye=ct();if(!V){St("Seleziona uno slot orario.");return}if(ye.includes(V)){St("Slot gi prenotato da un'altra partita.");return}const Mt=ue.find(Ot=>Ot.id===V),Dt=Mt?new Date(Mt.start):null,Rt={...mt,scheduledTime:Mt!=null&&Mt.start?(Dt==null?void 0:Dt.toISOString())??"":"",slotId:(Mt==null?void 0:Mt.id)??"",location:(Mt==null?void 0:Mt.location)??"",field:(Mt==null?void 0:Mt.field)??(Mt==null?void 0:Mt.location)??""},xe=e.groups.map(Ot=>Ot.id===E.id?{...Ot,matches:Ot.matches.map(en=>en.id===mt.id?Rt:en)}:Ot),tn=a.tournaments.map(Ot=>Ot.id===e.id?{...Ot,groups:xe}:Ot);s(Ot=>Ot.map(en=>en.id===a.id?{...en,tournaments:tn}:en)),await de(se(Qt,"events",a.id),{tournaments:tn}),N(null),M(""),St("")}async function kt(mt){if(!E)return;const ue={...mt,status:"pending",scheduledTime:null,slotId:null,location:"",field:""},ye=e.groups.map(Dt=>Dt.id===E.id?{...Dt,matches:Dt.matches.map(Rt=>Rt.id===mt.id?ue:Rt)}:Dt),Mt=a.tournaments.map(Dt=>Dt.id===e.id?{...Dt,groups:ye}:Dt);s(Dt=>Dt.map(Rt=>Rt.id===a.id?{...Rt,tournaments:Mt}:Rt)),await de(se(Qt,"events",a.id),{tournaments:Mt})}const ce=()=>H?"fixed inset-0 bg-black/70 z-50":"fixed inset-0 bg-black/70 flex items-center justify-center z-50",te=()=>H?{position:"absolute",top:`${H.top}px`,left:`${H.left}px`,maxHeight:H.maxHeight?`${H.maxHeight}px`:void 0,overflowY:"auto"}:{},Ft="bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary";return h.jsxs("div",{children:[h.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[h.jsx("button",{onClick:()=>B("standings"),className:`px-4 py-2 rounded-full ${R==="standings"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Classifica"}),h.jsx("button",{onClick:()=>B("matches"),className:`px-4 py-2 rounded-full ${R==="matches"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Partite"}),h.jsx("button",{onClick:()=>B("slot"),className:`px-4 py-2 rounded-full ${R==="slot"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Slot Disponibili"}),!r&&h.jsx("button",{onClick:()=>B("participants"),className:`px-4 py-2 rounded-full ${R==="participants"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Partecipanti"}),h.jsx("button",{onClick:()=>B("playoffs"),className:`px-4 py-2 rounded-full ${R==="playoffs"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Playoff"}),h.jsx("button",{onClick:()=>B("consolation"),className:`px-4 py-2 rounded-full ${R==="consolation"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Consolazione"}),r&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>B("groups"),className:`px-4 py-2 rounded-full ${R==="groups"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Gestione Gironi"}),h.jsx("button",{onClick:()=>B("players"),className:`px-4 py-2 rounded-full ${R==="players"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Giocatori"})]}),h.jsx("button",{onClick:()=>B("rules"),className:`px-4 py-2 rounded-full ${R==="rules"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Regolamento"}),r&&h.jsx("button",{onClick:()=>B("settings"),className:`px-4 py-2 rounded-full ${R==="settings"?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-transparent text-accent"}`,children:"Impostazioni"})]}),E&&h.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[h.jsx("label",{className:"font-bold text-text-secondary",children:"Seleziona Girone:"}),h.jsx("select",{value:y,onChange:mt=>b(mt.target.value),className:"bg-tertiary rounded px-3 py-2 font-semibold",children:e.groups.map(mt=>h.jsx("option",{value:mt.id,children:mt.name},mt.id))})]}),h.jsxs("div",{children:[R==="standings"&&E&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-3 text-accent",children:E.name}),h.jsx(KS,{group:E,players:a.players,settings:e.settings,loggedInPlayerId:o,onPlayerContact:pt})]}),R==="matches"&&E&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold mb-3 text-accent",children:E.name}),h.jsx(JS,{group:E,players:a.players,onEditResult:Nt,onBookMatch:je,isOrganizer:r,loggedInPlayerId:o,onPlayerContact:pt,onRescheduleMatch:vt,onCancelBooking:kt,onDeleteResult:Ut,viewingOwnGroup:E.playerIds.includes(o??"")}),it&&h.jsx("div",{className:ce(),children:h.jsxs("div",{className:Ft,style:te(),children:[h.jsx("h4",{className:"mb-4 font-bold text-lg text-accent",children:"Modifica Risultato"}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("label",{className:"font-bold mb-1 text-white",children:["Risultato per ",(Ie=a.players.find(mt=>mt.id===it.player1Id))==null?void 0:Ie.name]}),h.jsx("input",{type:"number",min:"0",value:D,onChange:mt=>Q(mt.target.value),className:"border px-3 py-2 rounded font-bold text-white bg-primary"})]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("label",{className:"font-bold mb-1 text-white",children:["Risultato per ",(Wn=a.players.find(mt=>mt.id===it.player2Id))==null?void 0:Wn.name]}),h.jsx("input",{type:"number",min:"0",value:Z,onChange:mt=>Y(mt.target.value),className:"border px-3 py-2 rounded font-bold text-white bg-primary"})]}),h.jsxs("div",{className:"flex gap-2 justify-end pt-3",children:[h.jsx("button",{onClick:()=>F(null),className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{disabled:D===""||Z==="",onClick:async()=>{await At(it),F(null)},className:"bg-highlight text-white px-4 py-2 rounded",children:"Salva"})]})]})]})}),rt&&h.jsx("div",{className:ce(),children:h.jsxs("div",{className:Ft,style:te(),children:[h.jsx("h4",{className:"mb-4 font-bold text-lg text-accent",children:"Prenota Partita"}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("label",{className:"font-bold mb-1 text-white",children:"Scegli uno slot libero:"}),h.jsxs("select",{value:yt,onChange:mt=>{A(mt.target.value),St("")},className:"border px-3 py-2 rounded font-bold text-white bg-primary",children:[h.jsx("option",{value:"",children:"Seleziona uno slot"}),st().map(mt=>h.jsxs("option",{value:mt.id,children:[new Date(mt.start).toLocaleString("it-IT"),mt.location?` - ${mt.location}`:"",mt.field?` - ${mt.field}`:""]},mt.id))]}),wt&&h.jsx("div",{className:"text-red-500 font-bold",children:wt}),h.jsxs("div",{className:"flex gap-2 justify-end pt-3",children:[h.jsx("button",{onClick:()=>{gt(null),St(""),A("")},className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{disabled:!yt,onClick:async()=>{rt&&await ft(rt)},className:"bg-highlight text-white px-4 py-2 rounded",children:"Prenota"})]}),st().length===0&&h.jsx("p",{className:"text-text-secondary mt-2",children:"Nessuno slot disponibile, chiedi all'organizzatore di aggiungere slot!"})]})]})}),w&&h.jsx("div",{className:ce(),children:h.jsxs("div",{className:Ft,style:te(),children:[h.jsx("h4",{className:"mb-4 font-bold text-lg text-accent",children:"Modifica Prenotazione"}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("label",{className:"font-bold mb-1 text-white",children:"Scegli uno slot libero:"}),h.jsxs("select",{value:V,onChange:mt=>{M(mt.target.value),St("")},className:"border px-3 py-2 rounded font-bold text-white bg-primary",children:[h.jsx("option",{value:"",children:"Seleziona uno slot"}),st().map(mt=>h.jsxs("option",{value:mt.id,children:[new Date(mt.start).toLocaleString("it-IT"),mt.location?` - ${mt.location}`:"",mt.field?` - ${mt.field}`:""]},mt.id))]}),wt&&h.jsx("div",{className:"text-red-500 font-bold",children:wt}),h.jsxs("div",{className:"flex gap-2 justify-end pt-3",children:[h.jsx("button",{onClick:()=>{N(null),M(""),St("")},className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{disabled:!V,onClick:async()=>{w&&await zt(w)},className:"bg-highlight text-white px-4 py-2 rounded",children:"Salva"})]}),st().length===0&&h.jsx("p",{className:"text-text-secondary mt-2",children:"Nessuno slot disponibile, chiedi all'organizzatore di aggiungere slot!"})]})]})}),z&&h.jsx("div",{className:ce(),children:h.jsxs("div",{className:Ft,style:te(),children:[h.jsx("h4",{className:"mb-4 font-bold text-lg text-red-600",children:"Elimina risultato partita"}),h.jsxs("p",{className:"mb-6 font-bold text-white",children:["Sei sicuro di voler eliminare il risultato della partita tra",h.jsx("strong",{children:(ts=a.players.find(mt=>mt.id===z.player1Id))==null?void 0:ts.name})," e",h.jsx("strong",{children:(We=a.players.find(mt=>mt.id===z.player2Id))==null?void 0:We.name}),"?"]}),h.jsxs("div",{className:"flex gap-2 justify-end pt-3",children:[h.jsx("button",{onClick:()=>I(null),className:"bg-tertiary px-4 py-2 rounded",children:"Annulla"}),h.jsx("button",{onClick:async()=>{z&&await re(z)},className:"bg-red-600 text-white px-4 py-2 rounded",children:"Elimina"})]})]})})]}),R==="slot"&&h.jsxs(h.Fragment,{children:[h.jsx(qv,{event:a,tournament:e,userId:o,onClickBook:k,matchesPending:j}),J&&j.length>0&&h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"mb-4 font-bold text-lg text-accent",children:"Prenota Slot"}),h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-semibold",children:"Slot:"})," ",new Date(J.start).toLocaleString("it-IT"),J.location&&h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{className:"font-semibold",children:J.location})]}),J.field&&h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{children:J.field})]})]}),h.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[h.jsx("span",{className:"font-semibold mb-2",children:"Scegli partita da prenotare:"}),j.map(mt=>{var ue,ye;return h.jsxs("button",{className:"w-full bg-accent hover:bg-highlight text-white rounded-lg px-4 py-2 mb-2 font-bold",onClick:()=>P(mt.id),children:[(ue=a.players.find(Mt=>Mt.id===mt.player1Id))==null?void 0:ue.name," vs ",(ye=a.players.find(Mt=>Mt.id===mt.player2Id))==null?void 0:ye.name]},mt.id)})]}),h.jsx("button",{onClick:()=>C(null),className:"mt-4 bg-tertiary px-4 py-2 rounded",children:"Annulla"})]})})]}),R==="participants"&&!r&&h.jsx(WS,{event:a,tournament:e,loggedInPlayerId:o}),R==="playoffs"&&r&&h.jsx(dA,{event:a,tournament:e,setEvents:s,isOrganizer:r}),R==="playoffs"&&!r&&((ms=e.playoffs)==null?void 0:ms.isGenerated)&&h.jsx("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-3xl mx-auto",children:h.jsx(iA,{event:a,tournament:e,setEvents:s})}),R==="consolation"&&h.jsx(aA,{event:a,tournament:e,setEvents:s,isOrganizer:r,loggedInPlayerId:o}),R==="groups"&&r&&h.jsx(eA,{event:a,tournament:e,setEvents:s,isOrganizer:r}),R==="players"&&r&&h.jsx(uA,{event:a,setEvents:s,isOrganizer:r,onPlayerContact:pt}),R==="settings"&&r&&h.jsx(sA,{event:a,tournament:e,setEvents:s}),R==="rules"&&h.jsxs("div",{className:"bg-secondary p-6 rounded-xl shadow-lg max-w-3xl mx-auto whitespace-pre-line",children:[h.jsx("h3",{className:"text-xl font-bold mb-4 text-accent",children:"Regolamento Torneo"}),(hi=a.rules)!=null&&hi.trim()?h.jsx("div",{className:"bg-primary p-4 rounded-lg border border-tertiary",children:a.rules}):h.jsx("p",{className:"text-text-secondary",children:"Nessun regolamento inserito dall'organizzatore."}),h.jsxs("div",{className:"mt-8",children:[h.jsxs("h3",{className:"text-xl font-bold mb-4 text-accent",children:["Regolamento Girone: ",E==null?void 0:E.name]}),(fi=E==null?void 0:E.rules)!=null&&fi.trim()?h.jsx("div",{className:"bg-primary p-4 rounded-lg border border-tertiary",children:E.rules}):h.jsx("p",{className:"text-text-secondary",children:"Nessun regolamento inserito per questo girone."})]})]})]})]})},gA=({users:a,onLoginSuccess:e})=>{const[s,r]=lt.useState(""),[o,d]=lt.useState(""),[m,p]=lt.useState(""),x=y=>{y.preventDefault();const b=a.find(E=>E.username.trim().toLowerCase()===s.trim().toLowerCase()&&E.password===o);b?e(b):p("Username o password non validi.")};return h.jsx("div",{className:"min-h-screen bg-primary text-text-primary flex flex-col items-center justify-center p-4 animate-fadeIn",children:h.jsxs("div",{className:"w-full max-w-sm",children:[h.jsxs("div",{className:"flex flex-col items-center mb-8",children:[h.jsx(Gv,{className:"w-12 h-12 text-accent"}),h.jsx("h1",{className:"text-3xl font-bold tracking-tight mt-2",children:"Tournament Manager Pro"}),h.jsx("p",{className:"text-text-secondary",children:"Accedi per continuare"})]}),h.jsx("div",{className:"bg-secondary p-8 rounded-xl shadow-2xl border border-tertiary/50",children:h.jsxs("form",{onSubmit:x,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-text-secondary",children:"Username"}),h.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:s,onChange:y=>r(y.target.value),className:"mt-1 block w-full bg-primary border border-tertiary rounded-lg p-3 text-text-primary focus:ring-2 focus:ring-accent focus:border-accent"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-text-secondary",children:"Password"}),h.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:y=>d(y.target.value),className:"mt-1 block w-full bg-primary border border-tertiary rounded-lg p-3 text-text-primary focus:ring-2 focus:ring-accent focus:border-accent"})]}),m&&h.jsx("p",{className:"text-sm text-red-400 text-center",children:m}),h.jsx("div",{children:h.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg shadow-highlight/20 text-sm font-medium text-white bg-highlight hover:bg-highlight/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-secondary focus:ring-highlight transition-all",children:"Accedi"})})]})}),h.jsx("div",{className:"text-center mt-4 text-xs text-text-secondary/50",children:h.jsxs("p",{children:["Partecipante: ",h.jsx("strong",{children:"Nome Cognome"})," / ",h.jsx("strong",{children:"1234"})]})})]})})},pA=["","","","","","","","","","","",""],yA=({user:a,users:e,setUsers:s,events:r,setEvents:o,onClose:d})=>{const[m,p]=lt.useState("password"),[x,y]=lt.useState(""),[b,E]=lt.useState(""),[R,B]=lt.useState(""),[it,F]=lt.useState(""),[D,Q]=lt.useState(""),[Z,Y]=lt.useState(""),rt=N=>{N.preventDefault(),F(""),Q("");const V=e.find(M=>M.id===a.id);if(!V||V.password!==x){F("La vecchia password non  corretta.");return}if(b.length<4){F("La nuova password deve essere di almeno 4 caratteri.");return}if(b!==R){F("Le nuove password non coincidono.");return}s(M=>M.map(z=>z.id===a.id?{...z,password:b}:z)),Q("Password modificata con successo!"),y(""),E(""),B(""),setTimeout(()=>{Q("")},2e3)},gt=N=>{a.playerId&&o(V=>V.map(M=>({...M,players:M.players.map(z=>z.id===a.playerId?{...z,avatar:N}:z)})))},yt=N=>{const V=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100"><text x="50" y="50" font-size="80" text-anchor="middle" dominant-baseline="central" dy=".1em">${N}</text></svg>`;return`data:image/svg+xml;base64,${btoa(V)}`},A=N=>{var M;const V=(M=N.target.files)==null?void 0:M[0];if(V){const z=new FileReader;z.onloadend=()=>{gt(z.result)},z.readAsDataURL(V)}},w=N=>{N.preventDefault(),Z.trim()&&(gt(Z.trim()),Y(""))};return h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl w-full max-w-md border border-tertiary",children:[h.jsxs("div",{className:"flex border-b border-tertiary",children:[h.jsx("button",{onClick:()=>p("password"),className:`flex-1 p-3 font-semibold transition-colors ${m==="password"?"bg-tertiary/70 text-accent":"text-text-secondary hover:bg-tertiary/40"}`,children:"Cambia Password"}),h.jsx("button",{onClick:()=>p("avatar"),className:`flex-1 p-3 font-semibold transition-colors ${m==="avatar"?"bg-tertiary/70 text-accent":"text-text-secondary hover:bg-tertiary/40"}`,children:"Modifica Avatar"})]}),h.jsxs("div",{className:"p-6",children:[m==="password"&&h.jsxs("form",{onSubmit:rt,className:"space-y-4 animate-fadeIn",children:[h.jsxs("h4",{className:"text-lg font-bold mb-2",children:["Profilo di ",a.username]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Vecchia Password"}),h.jsx("input",{type:"password",value:x,onChange:N=>y(N.target.value),className:"mt-1 block w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Nuova Password"}),h.jsx("input",{type:"password",value:b,onChange:N=>E(N.target.value),className:"mt-1 block w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Conferma Nuova Password"}),h.jsx("input",{type:"password",value:R,onChange:N=>B(N.target.value),className:"mt-1 block w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent",required:!0})]}),it&&h.jsx("p",{className:"text-sm text-red-400",children:it}),D&&h.jsx("p",{className:"text-sm text-green-400",children:D}),h.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[h.jsx("button",{type:"button",onClick:d,className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Chiudi"}),h.jsx("button",{type:"submit",className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Salva Modifiche"})]})]}),m==="avatar"&&h.jsx(h.Fragment,{children:a.role==="participant"?h.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[h.jsx("h4",{className:"text-lg font-bold",children:"Personalizza il tuo Avatar"}),h.jsxs("div",{children:[h.jsxs("h5",{className:"flex items-center gap-2 text-sm font-semibold text-text-secondary mb-2",children:[h.jsx(HS,{className:"w-5 h-5"})," Scegli un Emoji"]}),h.jsx("div",{className:"grid grid-cols-6 gap-2 bg-primary/50 p-3 rounded-lg",children:pA.map(N=>h.jsx("button",{onClick:()=>gt(yt(N)),className:"text-3xl rounded-lg hover:bg-tertiary transition-colors p-1",children:N},N))})]}),h.jsxs("div",{children:[h.jsxs("h5",{className:"flex items-center gap-2 text-sm font-semibold text-text-secondary mb-2",children:[h.jsx(FS,{className:"w-5 h-5"})," Incolla URL Immagine"]}),h.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[h.jsx("input",{type:"url",placeholder:"https://...",value:Z,onChange:N=>Y(N.target.value),className:"flex-grow bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent"}),h.jsx("button",{type:"submit",className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-3 rounded-lg transition-colors",children:"Imposta"})]})]}),h.jsxs("div",{children:[h.jsxs("h5",{className:"flex items-center gap-2 text-sm font-semibold text-text-secondary mb-2",children:[h.jsx(QS,{className:"w-5 h-5"})," Carica dal tuo dispositivo"]}),h.jsx("label",{htmlFor:"avatar-upload",className:"w-full text-center block bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors cursor-pointer",children:"Scegli un file..."}),h.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:A,className:"hidden"})]}),h.jsx("div",{className:"flex justify-end pt-2",children:h.jsx("button",{type:"button",onClick:d,className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Chiudi"})})]}):h.jsxs("div",{className:"text-center p-8 animate-fadeIn",children:[h.jsx("p",{className:"text-text-secondary",children:"La personalizzazione dell'avatar non  disponibile per l'organizzatore."}),h.jsx("div",{className:"flex justify-end pt-6",children:h.jsx("button",{type:"button",onClick:d,className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Chiudi"})})]})})]})]})})},xA=({events:a,playerId:e,onSelectEvent:s})=>{const r=a.filter(d=>Array.isArray(d.players)&&d.players.some(m=>m.id===e&&m.status==="confirmed")),o=d=>{let m="N/A",p=0,x=0,y=0,b=0,E="";const R=Array.isArray(d.tournaments)?d.tournaments.find(B=>Array.isArray(B.groups)&&B.groups.some(it=>Array.isArray(it.playerIds)&&it.playerIds.includes(e))):void 0;if(R){E=R.name;const B=Array.isArray(R.groups)?R.groups.find(it=>Array.isArray(it.playerIds)&&it.playerIds.includes(e)):void 0;if(B){const F=bo(B,d.players,R.settings).findIndex(Q=>Q.playerId===e);F!==-1&&(m=`${F+1}`);const D=Array.isArray(B.matches)?B.matches.filter(Q=>Q.player1Id===e||Q.player2Id===e):[];y=D.length,p=D.filter(Q=>Q.status==="completed").length,x=y-p,b=y>0?Math.round(p/y*100):0}}return{position:m,played:p,toPlay:x,totalMatches:y,completionPercentage:b,tournamentName:E}};return h.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[h.jsx("h2",{className:"text-3xl font-bold",children:"I Miei Eventi"}),r.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(d=>{const m=o(d);return h.jsxs("div",{onClick:()=>s(d),className:"bg-secondary rounded-xl shadow-lg transition-all duration-300 group relative overflow-hidden flex flex-col cursor-pointer",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-accent/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h.jsxs("div",{className:"p-6 flex-grow z-10",children:[h.jsx("h3",{className:"text-xl font-bold text-accent truncate",children:d.name}),h.jsx("p",{className:"text-text-secondary mt-1 text-sm",children:m.tournamentName}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-tertiary/50 grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:m.position}),h.jsx("div",{className:"text-xs text-text-secondary",children:"Classifica"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:m.played}),h.jsx("div",{className:"text-xs text-text-secondary",children:"Giocate"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold",children:m.toPlay}),h.jsx("div",{className:"text-xs text-text-secondary",children:"Da giocare"})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"w-full bg-tertiary/30 h-2 rounded-full",children:h.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${m.completionPercentage}%`}})}),h.jsxs("div",{className:"text-xs text-text-secondary mt-1 text-right",children:[m.completionPercentage,"% Completato"]})]})]})]},d.id)})}):h.jsx("p",{className:"text-text-secondary text-center py-8",children:"Nessun evento trovato."})]})},vA=({player:a,onClose:e})=>h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",onClick:e,children:h.jsx("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",onClick:s=>s.stopPropagation(),children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("img",{src:a.avatar,alt:a.name,className:"w-24 h-24 rounded-full mb-4 border-4 border-accent object-cover"}),h.jsx("h4",{className:"text-xl font-bold mb-2",children:a.name}),h.jsxs("div",{className:"space-y-4 w-full mt-4",children:[h.jsxs("a",{href:`tel:${a.phone}`,className:"flex items-center justify-center gap-3 w-full bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-3 px-4 rounded-lg transition-colors",children:[h.jsx(LS,{className:"w-5 h-5"}),h.jsx("span",{children:a.phone})]}),h.jsxs("a",{href:`https://wa.me/${a.phone}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors",children:[h.jsx(US,{className:"w-6 h-6"}),h.jsx("span",{children:"Contatta su WhatsApp"})]})]}),h.jsx("button",{onClick:e,className:"mt-6 bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors w-full",children:"Chiudi"})]})})}),_A=()=>{const[a,e]=lt.useState([]),[s,r]=lt.useState([]),[o,d]=lt.useState(null),[m,p]=lt.useState("dashboard"),[x,y]=lt.useState(null),[b,E]=lt.useState(null),[R,B]=lt.useState(void 0),[it,F]=lt.useState(void 0),[D,Q]=lt.useState(!1),[Z,Y]=lt.useState(!1),[rt,gt]=lt.useState(""),[yt,A]=lt.useState(null),[w,N]=lt.useState(null),V=(o==null?void 0:o.role)==="organizer",M=o==null?void 0:o.playerId;lt.useEffect(()=>{const j=Jx(zr(Qt,"events"),P=>{e(P.docs.map(ct=>({id:ct.id,...ct.data()})))}),k=Jx(zr(Qt,"users"),P=>{r(P.docs.map(ct=>({id:ct.id,...ct.data()})))});return()=>{j(),k()}},[]);const z=j=>{B(void 0),F(void 0),y(j),p("event")},I=(j,k,P)=>{E(j),B(k),F(P),p("tournament")},wt=()=>{m==="tournament"?(p("event"),E(null),B(void 0),F(void 0)):m==="event"&&(p("dashboard"),y(null))},St=async j=>{if(j.preventDefault(),!rt.trim())return;const k={name:rt.trim(),invitationCode:Math.random().toString(36).substring(2,8).toUpperCase(),players:[],tournaments:[]};await Ef(zr(Qt,"events"),k),gt(""),Q(!1)},tt=async()=>{yt&&(await bf(se(Qt,"events",yt.id)),A(null))},H=()=>{d(null),p("dashboard"),y(null),E(null),B(void 0),F(void 0)},q=lt.useMemo(()=>a.find(j=>j.id===(x==null?void 0:x.id)),[a,x]),L=lt.useMemo(()=>q==null?void 0:q.tournaments.find(j=>j.id===(b==null?void 0:b.id)),[q,b]),J=lt.useMemo(()=>V?a:[],[a,V]);if(!o)return h.jsx(gA,{users:s,onLoginSuccess:d});const C=()=>m==="dashboard"?!V&&M?h.jsx(xA,{events:a,playerId:M,onSelectEvent:z}):h.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-3xl font-bold",children:"I Miei Eventi"}),V&&h.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 bg-highlight/80 hover:bg-highlight text-white font-bold py-2 px-4 rounded-lg transition-all shadow-lg",children:[h.jsx(um,{className:"w-5 h-5"}),"Crea Evento"]})]}),J.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(j=>{const{totalMatches:k,completedMatches:P,completionPercentage:ct}=(()=>{let st=0,pt=0;j.tournaments.forEach(At=>{At.groups.forEach(Ut=>{st+=Ut.matches.length,pt+=Ut.matches.filter(re=>re.status==="completed").length})});const Nt=st>0?Math.round(pt/st*100):0;return{totalMatches:st,completedMatches:pt,completionPercentage:Nt}})();return h.jsxs("div",{className:"bg-secondary rounded-xl shadow-lg transition-all duration-300 group relative overflow-hidden flex flex-col",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-accent/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h.jsxs("div",{onClick:()=>z(j),className:"p-6 cursor-pointer flex-grow z-10",children:[h.jsx("h3",{className:"text-xl font-bold text-accent truncate",children:j.name}),h.jsxs("p",{className:"text-text-secondary mt-2 text-sm",children:[j.tournaments.length," tornei  ",j.players.length," giocatori"]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-tertiary/50",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[h.jsx("span",{className:"text-text-secondary",children:"Progresso"}),h.jsxs("span",{className:"font-semibold text-text-primary",children:[P," / ",k," partite"]})]}),h.jsx("div",{className:"w-full bg-tertiary/50 rounded-full h-2.5",children:h.jsx("div",{className:"bg-gradient-to-r from-accent to-highlight h-2.5 rounded-full transition-all duration-500",style:{width:`${ct}%`}})}),h.jsxs("div",{className:"text-right text-xs text-text-secondary mt-1",children:[ct,"% Completato"]})]})]}),V&&h.jsx("div",{className:"p-2 flex justify-end z-10",children:h.jsx("button",{onClick:st=>{st.stopPropagation(),A(j)},className:"text-text-secondary/50 hover:text-red-500 transition-colors",children:h.jsx(fo,{className:"w-5 h-5"})})})]},j.id)})}):h.jsx("p",{className:"text-text-secondary text-center py-8",children:"Nessun evento creato."})]}):m==="event"&&q?h.jsx("div",{className:"animate-fadeIn",children:h.jsx(XS,{event:q,onSelectTournament:I,setEvents:e,isOrganizer:V,loggedInPlayerId:M})}):m==="tournament"&&q&&L?h.jsx("div",{className:"animate-fadeIn",children:h.jsx(mA,{event:q,tournament:L,setEvents:e,isOrganizer:V,loggedInPlayerId:M,initialActiveTab:R,initialSelectedGroupId:it,onPlayerContact:N})}):null;return h.jsxs("div",{className:"min-h-screen bg-primary text-text-primary p-4 sm:p-6 lg:p-8",children:[h.jsx("header",{className:"mb-8",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(Gv,{className:"w-8 h-8 text-accent"}),h.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Tournament Manager Pro"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"text-sm text-text-secondary hidden sm:block",children:["Accesso come: ",h.jsx("strong",{className:"text-text-primary",children:o.username})]}),h.jsx("button",{onClick:()=>Y(!0),className:"text-text-secondary hover:text-text-primary transition-colors",children:h.jsx(qS,{className:"w-7 h-7"})}),h.jsx("button",{onClick:H,className:"flex items-center gap-2 text-text-secondary hover:text-text-primary transition-colors",children:h.jsx(GS,{className:"w-6 h-6"})})]})]})}),h.jsxs("main",{className:"max-w-7xl mx-auto",children:[m!=="dashboard"&&h.jsxs("button",{onClick:wt,className:"flex items-center gap-2 text-accent-hover hover:text-accent font-semibold mb-6 transition-colors",children:[h.jsx(kS,{className:"w-5 h-5"}),h.jsx("span",{children:"Indietro"})]}),C()]}),w&&h.jsx(vA,{player:w,onClose:()=>N(null)}),Z&&h.jsx(yA,{user:o,users:s,setUsers:r,events:a,setEvents:e,onClose:()=>Y(!1)}),D&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-sm border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Crea Nuovo Evento"}),h.jsxs("form",{onSubmit:St,children:[h.jsx("input",{type:"text",placeholder:"Nome dell'evento",value:rt,onChange:j=>gt(j.target.value),className:"w-full bg-primary border border-tertiary rounded-lg p-2 text-text-primary focus:ring-2 focus:ring-accent focus:border-accent",autoFocus:!0}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{type:"button",onClick:()=>Q(!1),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{type:"submit",className:"bg-highlight hover:bg-highlight/80 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crea Evento"})]})]})]})}),yt&&h.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fadeIn",children:h.jsxs("div",{className:"bg-secondary rounded-xl shadow-2xl p-6 w-full max-w-md border border-tertiary",children:[h.jsx("h4",{className:"text-lg font-bold mb-4",children:"Conferma Eliminazione"}),h.jsxs("p",{className:"text-text-secondary",children:[`Sei sicuro di voler eliminare l'evento "`,yt.name,'"? Tutti i tornei, gironi e risultati associati verranno persi definitivamente.']}),h.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[h.jsx("button",{onClick:()=>A(null),className:"bg-tertiary hover:bg-tertiary/80 text-text-primary font-bold py-2 px-4 rounded-lg transition-colors",children:"Annulla"}),h.jsx("button",{onClick:tt,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Elimina Evento"})]})]})})]})},Hv=document.getElementById("root");if(!Hv)throw new Error("Could not find root element to mount to");const bA=Db.createRoot(Hv);bA.render(h.jsx(Sb.StrictMode,{children:h.jsx(_A,{})}));
